<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>QT4 CG Meeting 070 Minutes 2024-03-19</title>
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="/meeting/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="../../../css/style.css"/>
<link rel="shortcut icon" href="/img/QT4-64.png" />
<link rel="apple-touch-icon" sizes="64x64" href="/img/QT4-64.png" type="image/png" />
<link rel="apple-touch-icon" sizes="76x76" href="/img/QT4-76.png" type="image/png" />
<link rel="apple-touch-icon" sizes="120x120" href="/img/QT4-120.png" type="image/png" />
<link rel="apple-touch-icon" sizes="152x152" href="/img/QT4-152.png" type="image/png" />
</head>
<body>
<div id="content" class="content">
<h1 class="title">QT4 CG Meeting 070 Minutes 2024-03-19</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#minutes">Draft Minutes</a></li>
<li><a href="#new-actions">Summary of new and continuing actions <code>[0/6]</code></a></li>
<li><a href="#administrivia">1. Administrivia</a>
<ul>
<li><a href="#roll-call">1.1. Roll call <code>[14/15]</code></a></li>
<li><a href="#agenda">1.2. Accept the agenda</a>
<ul>
<li><a href="#so-far">1.2.1. Status so far…</a></li>
</ul>
</li>
<li><a href="#approve-minutes">1.3. Approve minutes of the previous meeting</a></li>
<li><a href="#next-meeting">1.4. Next meeting</a></li>
<li><a href="#open-actions">1.5. Review of open action items <code>[8/12]</code></a></li>
<li><a href="#open-pull-requests">1.6. Review of open pull requests and issues</a>
<ul>
<li><a href="#blocked">1.6.1. Blocked</a></li>
<li><a href="#merge-without-discussion">1.6.2. Merge without discussion</a></li>
<li><a href="#close-without-action">1.6.3. Close without action</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#technical-agenda">2. Technical Agenda</a>
<ul>
<li><a href="#demo">2.1. Brief demo</a></li>
<li><a href="#pr-1066">2.2. PR #1066: 1052 Simplify the results of parse-csv</a></li>
<li><a href="#pr-1059">2.3. PR #1059: 1019 XQFO: Unknown option parameters</a></li>
</ul>
</li>
<li><a href="#any-other-business">3. Any other business</a></li>
<li><a href="#adjourned">4. Adjourned</a></li>
</ul>
</div>
</div>
<p>
<a href="../">Meeting index</a> / <a href="https://qt4cg.org">QT4CG.org</a> / <a href="https://qt4cg.org/dashboard">Dashboard</a> / <a href="https://github.com/qt4cg/qtspecs/issues">GH Issues</a> / <a href="https://github.com/qt4cg/qtspecs/pulls">GH Pull Requests</a>
</p>

<div id="outline-container-minutes" class="outline-2">
<h2 id="minutes">Draft Minutes</h2>
<div class="outline-text-2" id="text-minutes">
</div>
</div>

<div id="outline-container-new-actions" class="outline-2">
<h2 id="new-actions">Summary of new and continuing actions <code>[0/6]</code></h2>
<div class="outline-text-2" id="text-new-actions">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-063-04: NW to try to add test review to the editorial meeting.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-063-06: MK to consider refactoring the declare item type syntax to something like declare record</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-064-08: NW to open an issue to try to resolve $search to $target consistently.</li>
<li class="trans"><code>[-]</code> QT4CG-069-02: NW to coordinate with MK to use the introspection features on the test suite.
<ul class="org-ul">
<li>In progress…</li>
</ul></li>
<li class="off"><code>[&#xa0;]</code> QT4CG-070-01: NW to review how records are formatted.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-070-02: MK to raise the line separators issue in parse-csv.</li>
</ul>
</div>
</div>

<div id="outline-container-administrivia" class="outline-2">
<h2 id="administrivia"><span class="section-number-2">1.</span> Administrivia</h2>
<div class="outline-text-2" id="text-administrivia">
</div>

<div id="outline-container-roll-call" class="outline-3">
<h3 id="roll-call"><span class="section-number-3">1.1.</span> Roll call <code>[14/15]</code></h3>
<div class="outline-text-3" id="text-roll-call">
<ul class="org-ul">
<li class="on"><code>[X]</code> Reece Dunn (RD)</li>
<li class="on"><code>[X]</code> Sasha Firsov (SF)</li>
<li class="on"><code>[X]</code> Mukul Gandhi (MG)</li>
<li class="on"><code>[X]</code> Christian Grün (CG)</li>
<li class="on"><code>[X]</code> Joel Kalvesmaki (JK)</li>
<li class="on"><code>[X]</code> Michael Kay (MK)</li>
<li class="on"><code>[X]</code> Juri Leino (JLO)</li>
<li class="on"><code>[X]</code> John Lumley (JLY)</li>
<li class="on"><code>[X]</code> Dimitre Novatchev (DN)</li>
<li class="on"><code>[X]</code> Matt Patterson (MP)</li>
<li class="on"><code>[X]</code> Wendell Piez (WP)</li>
<li class="on"><code>[X]</code> Ed Porter (EP)</li>
<li class="on"><code>[X]</code> Liam Quin (LQ)</li>
<li class="off"><code>[&#xa0;]</code> Adam Retter (AR)</li>
<li class="on"><code>[X]</code> C. M. Sperberg-McQueen (MSM)</li>
<li class="on"><code>[X]</code> Norm Tovey-Walsh (NW). <i>Scribe</i>. <i>Chair</i>.</li>
</ul>
</div>
</div>

<div id="outline-container-agenda" class="outline-3">
<h3 id="agenda"><span class="section-number-3">1.2.</span> Accept the agenda</h3>
<div class="outline-text-3" id="text-agenda">
<p>
Proposal: Accept <a href="../../agenda/2024/03-19.html">the agenda</a>.
</p>
</div>

<div id="outline-container-so-far" class="outline-4">
<h4 id="so-far"><span class="section-number-4">1.2.1.</span> Status so far…</h4>
<div class="outline-text-4" id="text-so-far">

<div id="org540b704" class="figure">
<p><img src="./issues-open-2024-03-19.png" alt="issues-open-2024-03-19.png" />
</p>
<p><span class="figure-number">Figure 1: </span>“Burn down” chart on open issues</p>
</div>


<div id="org49b8857" class="figure">
<p><img src="./issues-by-spec-2024-03-19.png" alt="issues-by-spec-2024-03-19.png" />
</p>
<p><span class="figure-number">Figure 2: </span>Open issues by specification</p>
</div>


<div id="org190e9c0" class="figure">
<p><img src="./issues-by-type-2024-03-19.png" alt="issues-by-type-2024-03-19.png" />
</p>
<p><span class="figure-number">Figure 3: </span>Open issues by type</p>
</div>
</div>
</div>
</div>

<div id="outline-container-approve-minutes" class="outline-3">
<h3 id="approve-minutes"><span class="section-number-3">1.3.</span> Approve minutes of the previous meeting</h3>
<div class="outline-text-3" id="text-approve-minutes">
<p>
Proposal: Accept <a href="../../minutes/2024/03-12.html">the minutes of the previous meeting</a>.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-next-meeting" class="outline-3">
<h3 id="next-meeting"><span class="section-number-3">1.4.</span> Next meeting</h3>
<div class="outline-text-3" id="text-next-meeting">
<p>
The next meeting <a href="../../agenda/2024/03-26.html">is scheduled for Tuesday, 26 March 2024</a>.
</p>

<p>
Any regrets for the next meeting?
</p>

<p>
None heard.
</p>
</div>
</div>

<div id="outline-container-open-actions" class="outline-3">
<h3 id="open-actions"><span class="section-number-3">1.5.</span> Review of open action items <code>[8/12]</code></h3>
<div class="outline-text-3" id="text-open-actions">
<ul class="org-ul">
<li class="on"><code>[X]</code> QT4CG-052-02: NW to consider how to schedule an “editor’s meeting”
<ul class="org-ul">
<li>Proposed: next Tuesday at 15:00GMT (16:00CET, 11:00EDT)</li>
</ul></li>
<li class="off"><code>[&#xa0;]</code> QT4CG-063-04: NW to try to add test review to the editorial meeting.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-063-06: MK to consider refactoring the declare item type syntax to something like declare record</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-064-08: NW to open an issue to try to resolve $search to $target consistently.</li>
<li class="on"><code>[X]</code> QT4CG-069-01: MK to list the remaining issues that need discussion.
<ul class="org-ul">
<li>MK: I’ve been doing a lot of work going through the PRs (open and closed) to
check that there are tests tagged against each PR or are clearly marked as
not having tests.</li>
</ul></li>
<li class="trans"><code>[-]</code> QT4CG-069-02: NW to coordinate with MK to use the introspection features on the test suite.
<ul class="org-ul">
<li>In progress…</li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-open-pull-requests" class="outline-3">
<h3 id="open-pull-requests"><span class="section-number-3">1.6.</span> Review of open pull requests and issues</h3>
<div class="outline-text-3" id="text-open-pull-requests">
</div>

<div id="outline-container-blocked" class="outline-4">
<h4 id="blocked"><span class="section-number-4">1.6.1.</span> Blocked</h4>
<div class="outline-text-4" id="text-blocked">
<p>
The following PRs are open but have merge conflicts or comments which
suggest they aren’t ready for action.
</p>

<ul class="org-ul">
<li>PR <a href="https://qt4cg.org/dashboard/#pr-956">#956</a>: 850-partial Editorial improvements to parse-html()</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-832">#832</a>: 77 Add map:deep-update and array:deep-update</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-529">#529</a>: 528 fn:elements-to-maps</li>
</ul>
</div>
</div>

<div id="outline-container-merge-without-discussion" class="outline-4">
<h4 id="merge-without-discussion"><span class="section-number-4">1.6.2.</span> Merge without discussion</h4>
<div class="outline-text-4" id="text-merge-without-discussion">
<p>
The following PRs are editorial, small, or otherwise appeared to be
uncontroversial when the agenda was prepared. The chairs propose that
these can be merged without discussion. If you think discussion is
necessary, please say so.
</p>

<ul class="org-ul">
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1090">#1090</a>: 1089 Add rounding rules for casting string to duration etc</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1083">#1083</a>: 1079 Change book used in example</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1081">#1081</a>: 1050 Fix ItemType grammar ambiguity</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1080">#1080</a>: 1036 Rephrase the rules for number-parser with liberal JSON</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1073">#1073</a>: XQFO (editorial)</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1072">#1072</a>: 883 Return type of load-xquery-module</li>
</ul>

<p>
Proposal: merge these PRs without discussion.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-close-without-action" class="outline-4">
<h4 id="close-without-action"><span class="section-number-4">1.6.3.</span> Close without action</h4>
<div class="outline-text-4" id="text-close-without-action">
<p>
It has been proposed that the following issues be closed without action.
If you think discussion is necessary, please say so.
</p>

<ul class="org-ul">
<li>Issue <a href="https://github.com/qt4cg/qtspecs/issues/757">#757</a>: Function families</li>
<li>Issue <a href="https://github.com/qt4cg/qtspecs/issues/463">#463</a>: fn:parts() - extract the parts of a (not-really) atomic value</li>
<li>Issue <a href="https://github.com/qt4cg/qtspecs/issues/448">#448</a>: Support extended dateTime formats of ISO-8601:2019?</li>
<li>Issue <a href="https://github.com/qt4cg/qtspecs/issues/283">#283</a>: Enumeration types</li>
<li>Issue <a href="https://github.com/qt4cg/qtspecs/issues/218">#218</a>: Function library for maps with composite keys: and thoughts on encapsulation</li>
<li>Issue <a href="https://github.com/qt4cg/qtspecs/issues/119">#119</a>: Allow a map's key value to be any sequence</li>
<li>Issue <a href="https://github.com/qt4cg/qtspecs/issues/33">#33</a>: JSON Parsing &amp; Serialization: Numbers</li>
</ul>

<p>
Proposal: close these issues without further action.
</p>

<p>
Accepted.
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-technical-agenda" class="outline-2">
<h2 id="technical-agenda"><span class="section-number-2">2.</span> Technical Agenda</h2>
<div class="outline-text-2" id="text-technical-agenda">
<p>
This agenda is the unfinished items from last week with “1077” slotted into the
middle. If we get through all of these in less than an hour, we’ll look for some
easy things.
</p>
</div>

<div id="outline-container-demo" class="outline-3">
<h3 id="demo"><span class="section-number-3">2.1.</span> Brief demo</h3>
<div class="outline-text-3" id="text-demo">
<p>
SF gave a brief demo of a web component that contains XSLT.
</p>

<ul class="org-ul">
<li>SF: The XSLT elements are “foreign elements” that are blended in without an XSL namespace.
<ul class="org-ul">
<li>… Current plans are to use XSLT 1.0 because that’s what the browser supports</li>
<li>… Future plans to upgrade to XSLT 3.x or 4.x</li>
<li>… Uses JavaScript <code>??</code> convention to support defaults</li>
</ul></li>
<li>SF: Managing the syntax highlighting in the IDE is tricky; help solicited.</li>
<li>SF: Fate of XHTML is unclear at the moment.</li>
</ul>

<p>
Work is going on in the <a href="https://www.w3.org/community/webcomponents/">Web Components Community Group</a> at the W3C.
</p>

<p>
SF’s demo is online here: <a href="https://unpkg.com/@epa-wg/custom-element@0.0.17/demo/dom-merge.html">https://unpkg.com/@epa-wg/custom-element@0.0.17/demo/dom-merge.html</a>
</p>
</div>
</div>

<div id="outline-container-pr-1066" class="outline-3">
<h3 id="pr-1066"><span class="section-number-3">2.2.</span> PR #1066: 1052 Simplify the results of parse-csv</h3>
<div class="outline-text-3" id="text-pr-1066">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-1066">#1066</a>
</p>

<p>
MK introduces the PR.
</p>

<ul class="org-ul">
<li>MK: The attempt here was to simplify what the <code>fn:parse-csv</code> function returns,
but along the way there were other edge cases.
<ul class="org-ul">
<li>… The interface to <code>fn:parse-csv</code> has changed quite a bit</li>
<li>… Changes to the description of <code>fn:csv-to-xml</code> is mostly editorial.</li>
</ul></li>
<li>MK describes the changes to end-of-line normalization</li>
</ul>

<p>
MK observes that we currently describe options in a tabular structure. We should
do it with records, but that should be done globally, not just in this function.
</p>

<ul class="org-ul">
<li>MK: Attempted to shorten the examples so that they’re easier to read.</li>
</ul>

<p>
MK describes the changes to <code>fn:parse-csv</code>.
</p>

<ul class="org-ul">
<li>MK: Changed to deliver a single record with four fields; the same information
but packaged differently.
<ul class="org-ul">
<li>… There’s a <code>get</code> function on the content as a whole were you can supply a
row/column.</li>
</ul></li>

<li>JLY: I first read that as the <code>as</code> is not properly formatted.</li>
</ul>

<p>
ACTION: QT4CG-070-01: NW to review how records are formatted.
</p>

<p>
MK describes the changes to the options.
</p>

<ul class="org-ul">
<li>MK: Function specification is now organized around the different options.
<ul class="org-ul">
<li>… The error conditions have changed a little bit.</li>
</ul></li>
<li>MK: The examples have been reworked to simplify their presentation.
<ul class="org-ul">
<li>… Each example now fits on one screen</li>
</ul></li>
<li>CG: I like all the changes; I’ve given feedback in the issues.
<ul class="org-ul">
<li>… My main concern is handling of new lines. In XML, carriage returns are
simply discarded. Just recently, I’ve seen test cases for XQuery 1.0 that
discard carriage returns and normalize newlines.</li>
<li>… At the moment, it’s actually difficult to get carriage returns <b>into</b> the data.</li>
<li>… Looking at other libraries, it’s hard to see that these options are really
necessary.</li>
<li>… I’d really like to have this on a global level; it will be important to
define serialization with respect to newlines.</li>
</ul></li>
<li>MP: If you export a CSV from Excel today, it is CR/LF by default even on a
Mac. I don’t think we can ignore that.
<ul class="org-ul">
<li>… Except in certain use cases, there will almost always be CR/LF line ends.</li>
</ul></li>
<li>CG: But how do we get it into our language at all? Using <code>unparsed-text</code>
normalizes line ends.</li>
</ul>

<p>
Some discussion of the changes to <code>unparsed-text</code> to normalize newlines.
</p>

<p>
Some discussion of normalization of line endings in quoted strings.
</p>

<ul class="org-ul">
<li>MP: I worry that that’s a breaking implementation thing. If you know that CR
has a special meaning in a field, losing it could be problematic.</li>
<li>CG: The specification should describe how we get this data. I think we should
do this more globally, for example allowing to specify line termination in <code>unparsed-text</code>.</li>
<li>MP: The reason we have it specially here is because that’s a feature of almost
all the CSV libraries.
<ul class="org-ul">
<li>… If Python have gotten away without changing the terminator, then maybe we
could do that too.</li>
</ul></li>
<li>MP: Serialization is a different matter. But even in the Python situation,
it’s important to note that they “do the right thing” with different line
endings.</li>
<li>CG: I think we need ways to normalize, but I don’t think it should be in CSV.
It’s not special to CSV.</li>
<li>MP: It’s in the CSV section because of the poor quality of the CSV specification.
<ul class="org-ul">
<li>… If we think we can avoid that complexity, then I don’t mind doing that.</li>
</ul></li>
<li>MK: I think it’s safer to keep the capability in.</li>
<li>MP: I think normalization will probably have to be enabled by default.</li>
<li>CG: Our CSV library has normalized line ends for 10 years and no one has ever
asked for options to deal with that.</li>
<li>MP: Anecdotally, I expect your users have more regular data than the sorts of
random CSVs you find if you’re doing ad hoc processing.
<ul class="org-ul">
<li>… In my experience, so much of the data has weird idiosyncrasies.</li>
</ul></li>
</ul>

<p>
Some discussion of where this might occur.
</p>

<ul class="org-ul">
<li>MK: I wonder if we can step back. Are there any bigger issues?</li>
<li>MP: I think that’s maybe the biggest issue.
<ul class="org-ul">
<li>… I worry a little bit about returning strings rather than arrays of strings
in parse-csv, but if everyone else is happy, then that’s fine.</li>
</ul></li>
<li>MK: I think the sequences of array model works pretty well.</li>
<li>MP: Having to specify a 45 item sequence to get the 45th column seems harder
than constructing a map with 3 entries. But it’s not the end of the world.</li>
<li>JLO: Interesting so far. I’m wondering why we can’t choose a different row
terminator. It might not be a new line, it might be a null or some other character.</li>
<li>MK: It can be any single character.</li>
</ul>

<p>
MK reviews how you can approach the line ending normalization problem.
</p>

<ul class="org-ul">
<li>JLO: In the examples, there’s a very long <code>instance of</code> expression. Simplifying that would make it more readable.</li>
<li>MK: I can do that.</li>
</ul>

<p>
ACTION: QT4CG-070-02: MK to raise the line separators issue.
</p>

<p>
Proposal: accept this PR.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-pr-1059" class="outline-3">
<h3 id="pr-1059"><span class="section-number-3">2.3.</span> PR #1059: 1019 XQFO: Unknown option parameters</h3>
<div class="outline-text-3" id="text-pr-1059">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-1059">#1059</a>
</p>

<p>
CG reviews where we are and how we got here.
</p>

<ul class="org-ul">
<li>CG: We could also add an option to decide if unknown options are an error.</li>
<li>MK: Should we categorize this as a “plausibility error”. It says the
implementation can say this is probably wrong but it doesn’t have to.</li>
<li>CG: How does this work?</li>
<li>MK: They’re typically type checking at the moment. Some of these you might be
able to detect statically.
<ul class="org-ul">
<li>… Going back a bit to the 1.0 concept of a recoverable error. It’s defined
to be an error but the implementation isn’t required to report it.</li>
</ul></li>
<li>NW: I’m confused by the prose, it seems to suggest a different namespace but still require an error.</li>
<li>CG: Yes, perhaps that’s not really clarified yet.</li>
<li>NW: In XProc, we said extension options have to be in a namespace and
implementations are free to ignore them. That’s worked well for us.</li>
<li>MK: I think that’s a good policy.</li>
<li>MSM: I’m a little torn because I like two things that are incompatible.
Sometimes, I really do want the ability to say, please go through this entire
code base and tell me if there are any options you don’t understand. So I like
the ability to raise an error, even for things in a different namespace. On
the other hand, I think if processors are required to raise an error every
time they see an extension for another processor, that is problematic.
<ul class="org-ul">
<li>… I have a highly developed fear of being lumped into a single implementation.</li>
<li>… I like having an option and I would like two flavors.</li>
</ul></li>
</ul>

<p>
Ran out of time. NW suggests CG redraft it and see if we can get consensus to
merge without further review.
</p>
</div>
</div>
</div>

<div id="outline-container-any-other-business" class="outline-2">
<h2 id="any-other-business"><span class="section-number-2">3.</span> Any other business</h2>
<div class="outline-text-2" id="text-any-other-business">
<p>
None heard.
</p>
</div>
</div>

<div id="outline-container-adjourned" class="outline-2">
<h2 id="adjourned"><span class="section-number-2">4.</span> Adjourned</h2>
<div class="outline-text-2" id="text-adjourned">
</div>
</div>
</div>
</body>
</html>
