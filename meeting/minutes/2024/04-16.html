<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>QT4 CG Meeting 073 Minutes 2024-04-16</title>
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="/meeting/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="../../../css/style.css"/>
<link rel="shortcut icon" href="/img/QT4-64.png" />
<link rel="apple-touch-icon" sizes="64x64" href="/img/QT4-64.png" type="image/png" />
<link rel="apple-touch-icon" sizes="76x76" href="/img/QT4-76.png" type="image/png" />
<link rel="apple-touch-icon" sizes="120x120" href="/img/QT4-120.png" type="image/png" />
<link rel="apple-touch-icon" sizes="152x152" href="/img/QT4-152.png" type="image/png" />
</head>
<body>
<div id="content" class="content">
<h1 class="title">QT4 CG Meeting 073 Minutes 2024-04-16</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#minutes">Draft Minutes</a></li>
<li><a href="#new-actions">Summary of new and continuing actions <code>[0/5]</code></a></li>
<li><a href="#administrivia">1. Administrivia</a>
<ul>
<li><a href="#roll-call">1.1. Roll call <code>[9/14]</code></a></li>
<li><a href="#agenda">1.2. Accept the agenda</a>
<ul>
<li><a href="#so-far">1.2.1. Status so far…</a></li>
</ul>
</li>
<li><a href="#approve-minutes">1.3. Approve minutes of the previous meeting</a></li>
<li><a href="#next-meeting">1.4. Next meeting</a></li>
<li><a href="#open-actions">1.5. Review of open action items <code>[5/9]</code></a></li>
<li><a href="#open-pull-requests">1.6. Review of open pull requests and issues</a>
<ul>
<li><a href="#merge-without-discussion">1.6.1. Merge without discussion</a></li>
<li><a href="#close-without-action">1.6.2. Close without action</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#technical-agenda">2. Technical Agenda</a>
<ul>
<li><a href="#pr-1152">2.1. PR #1152: 1146 Inline change log</a></li>
<li><a href="#h-FAF778CF-41F9-4D93-B67C-58F3CB7D4AC5">2.2. Making records and options consistent</a></li>
<li><a href="#pr-1151">2.3. PR #1151: 1138 Merge format and format-name params of format-number</a></li>
<li><a href="#pr-1150">2.4. PR #1150: 1142 Drop restriction disallowing items-equal with unordered</a></li>
<li><a href="#pr-1148">2.5. PR #1148: 1143 Coercion rules: handle choice types before atomization</a></li>
<li><a href="#pr-1147">2.6. PR #1147: QT4CG-072-01 Clarify schema type terminology</a></li>
<li><a href="#pr-1141">2.7. PR #1141: 1140 Replace 'search' with 'target' for indexing functions</a></li>
</ul>
</li>
<li><a href="#any-other-business">3. Any other business</a></li>
<li><a href="#adjourned">4. Adjourned</a></li>
</ul>
</div>
</div>
<p>
<a href="../">Meeting index</a> / <a href="https://qt4cg.org">QT4CG.org</a> / <a href="https://qt4cg.org/dashboard">Dashboard</a> / <a href="https://github.com/qt4cg/qtspecs/issues">GH Issues</a> / <a href="https://github.com/qt4cg/qtspecs/pulls">GH Pull Requests</a>
</p>

<div id="outline-container-minutes" class="outline-2">
<h2 id="minutes">Draft Minutes</h2>
<div class="outline-text-2" id="text-minutes">
</div>
</div>

<div id="outline-container-new-actions" class="outline-2">
<h2 id="new-actions">Summary of new and continuing actions <code>[0/5]</code></h2>
<div class="outline-text-2" id="text-new-actions">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-063-06: MK to consider refactoring the declare item type syntax to something like declare record</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-071-06: NW to clarify the cases that are distinguished by the leading empty string in path segments</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-072-03: NW to clarify the round-tripping of URIs</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-072-04: DN to raise an issue about having a function to test if a collation URI is supported</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-073-01: NW to proceed with the records/options proposal and make a PR.</li>
</ul>
</div>
</div>

<div id="outline-container-administrivia" class="outline-2">
<h2 id="administrivia"><span class="section-number-2">1.</span> Administrivia</h2>
<div class="outline-text-2" id="text-administrivia">
</div>

<div id="outline-container-roll-call" class="outline-3">
<h3 id="roll-call"><span class="section-number-3">1.1.</span> Roll call <code>[9/14]</code></h3>
<div class="outline-text-3" id="text-roll-call">
<p>
Regrets: JLY, SF.
</p>

<ul class="org-ul">
<li class="on"><code>[X]</code> Reece Dunn (RD)</li>
<li class="off"><code>[&#xa0;]</code> Sasha Firsov (SF)</li>
<li class="on"><code>[X]</code> Christian Grün (CG)</li>
<li class="on"><code>[X]</code> Joel Kalvesmaki (JK)</li>
<li class="on"><code>[X]</code> Michael Kay (MK)</li>
<li class="off"><code>[&#xa0;]</code> Juri Leino (JLO)</li>
<li class="off"><code>[&#xa0;]</code> John Lumley (JLY)</li>
<li class="on"><code>[X]</code> Dimitre Novatchev (DN)</li>
<li class="on"><code>[X]</code> Wendell Piez (WP) [:57-]</li>
<li class="on"><code>[X]</code> Ed Porter (EP)</li>
<li class="off"><code>[&#xa0;]</code> Liam Quin (LQ)</li>
<li class="off"><code>[&#xa0;]</code> Adam Retter (AR)</li>
<li class="on"><code>[X]</code> C. M. Sperberg-McQueen (MSM)</li>
<li class="on"><code>[X]</code> Norm Tovey-Walsh (NW). <i>Scribe</i>. <i>Chair</i>.</li>
</ul>
</div>
</div>

<div id="outline-container-agenda" class="outline-3">
<h3 id="agenda"><span class="section-number-3">1.2.</span> Accept the agenda</h3>
<div class="outline-text-3" id="text-agenda">
<p>
Proposal: Accept <a href="../../agenda/2024/04-16.html">the agenda</a>.
</p>

<p>
Accepted.
</p>
</div>

<div id="outline-container-so-far" class="outline-4">
<h4 id="so-far"><span class="section-number-4">1.2.1.</span> Status so far…</h4>
<div class="outline-text-4" id="text-so-far">

<div id="org1c7b75c" class="figure">
<p><img src="./issues-open-2024-04-16.png" alt="issues-open-2024-04-16.png" />
</p>
<p><span class="figure-number">Figure 1: </span>“Burn down” chart on open issues</p>
</div>


<div id="org36a96d4" class="figure">
<p><img src="./issues-by-spec-2024-04-16.png" alt="issues-by-spec-2024-04-16.png" />
</p>
<p><span class="figure-number">Figure 2: </span>Open issues by specification</p>
</div>


<div id="org2fb6611" class="figure">
<p><img src="./issues-by-type-2024-04-16.png" alt="issues-by-type-2024-04-16.png" />
</p>
<p><span class="figure-number">Figure 3: </span>Open issues by type</p>
</div>
</div>
</div>
</div>

<div id="outline-container-approve-minutes" class="outline-3">
<h3 id="approve-minutes"><span class="section-number-3">1.3.</span> Approve minutes of the previous meeting</h3>
<div class="outline-text-3" id="text-approve-minutes">
<p>
Proposal: Accept <a href="../../minutes/2024/04-09.html">the minutes of the previous meeting</a>.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-next-meeting" class="outline-3">
<h3 id="next-meeting"><span class="section-number-3">1.4.</span> Next meeting</h3>
<div class="outline-text-3" id="text-next-meeting">
<p>
The next meeting <a href="../../agenda/2024/04-23.html">is scheduled for Tuesday, 23 April 2024</a>.
</p>

<p>
JLY gives regrets 23 April.
</p>
</div>
</div>

<div id="outline-container-open-actions" class="outline-3">
<h3 id="open-actions"><span class="section-number-3">1.5.</span> Review of open action items <code>[5/9]</code></h3>
<div class="outline-text-3" id="text-open-actions">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-063-06: MK to consider refactoring the declare item type syntax to something like declare record</li>
<li class="on"><code>[X]</code> QT4CG-064-08: NW to open an issue to try to resolve $search to $target consistently.</li>
<li class="on"><code>[X]</code> QT4CG-069-02: NW to coordinate with MK to use the introspection features on the test suite.</li>
<li class="on"><code>[X]</code> QT4CG-070-01: NW to review how records are formatted.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-071-06: NW to clarify the cases that are distinguished by the leading empty string in path segments</li>
<li class="on"><code>[X]</code> QT4CG-072-01: MK to consider whether and when a choice type should be classified as a schema type</li>
<li class="on"><code>[X]</code> QT4CG-072-02: MK to clarify that the position variable is a single, positive integer.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-072-03: NW to clarify the round-tripping of URIs</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-072-04: DN to raise an issue about having a function to test if a collation URI is supported</li>
</ul>
</div>
</div>

<div id="outline-container-open-pull-requests" class="outline-3">
<h3 id="open-pull-requests"><span class="section-number-3">1.6.</span> Review of open pull requests and issues</h3>
<div class="outline-text-3" id="text-open-pull-requests">
</div>

<div id="outline-container-merge-without-discussion" class="outline-4">
<h4 id="merge-without-discussion"><span class="section-number-4">1.6.1.</span> Merge without discussion</h4>
<div class="outline-text-4" id="text-merge-without-discussion">
<p>
The following PRs are editorial, small, or otherwise appeared to be
uncontroversial when the agenda was prepared. The chairs propose that
these can be merged without discussion. If you think discussion is
necessary, please say so.
</p>

<ul class="org-ul">
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1149">#1149</a>: 1084 Add fos:default-description to support prose descriptions of defaults</li>
</ul>

<p>
Proposal: merge without discussion.
</p>

<p>
Approved.
</p>
</div>
</div>

<div id="outline-container-close-without-action" class="outline-4">
<h4 id="close-without-action"><span class="section-number-4">1.6.2.</span> Close without action</h4>
<div class="outline-text-4" id="text-close-without-action">
<p>
It has been proposed that the following issues be closed without action.
If you think discussion is necessary, please say so.
</p>

<ul class="org-ul">
<li>Issue <a href="https://github.com/qt4cg/qtspecs/issues/1115">#1115</a>: XSLT - ability to call a function from xslt (not just xpath)</li>
<li>Issue <a href="https://github.com/qt4cg/qtspecs/issues/836">#836</a>: Add support for CSV 'dialect' features covered by the OKFN's Frictionless Data CSV spec in `fn:parse-csv` and related functions</li>
<li>Issue <a href="https://github.com/qt4cg/qtspecs/issues/397">#397</a>: Type names</li>
<li>Issue <a href="https://github.com/qt4cg/qtspecs/issues/298">#298</a>: Abstract supertype for map and array</li>
<li>Issue <a href="https://github.com/qt4cg/qtspecs/issues/115">#115</a>: Lookup operator on arrays of maps</li>
</ul>

<p>
Proposal: close without further action.
</p>

<p>
Approved.
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-technical-agenda" class="outline-2">
<h2 id="technical-agenda"><span class="section-number-2">2.</span> Technical Agenda</h2>
<div class="outline-text-2" id="text-technical-agenda">
</div>

<div id="outline-container-pr-1152" class="outline-3">
<h3 id="pr-1152"><span class="section-number-3">2.1.</span> PR #1152: 1146 Inline change log</h3>
<div class="outline-text-3" id="text-pr-1152">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-1152">#1152</a>
</p>

<p>
MK describes his proposal for managing change log appendices.
</p>

<ul class="org-ul">
<li>JK: I think this is fantastic; what practices should we follow for PRs?</li>
<li>MK: Let me show you the markup…
<ul class="org-ul">
<li>… The editors should maintain this in PRs.</li>
</ul></li>
</ul>

<p>
Some discussion of the content model. 
</p>

<ul class="org-ul">
<li>MSM: If you need more than one paragraph, you should put that description into
the issue or something hyperlinked from the note.</li>
<li>RD: With respect to the delta’s, can we improve the presentations</li>
<li>NW: Yeah, I can fix that.</li>
<li>MSM: The choice of delta as a symbol is suggestive.</li>
</ul>

<p>
Some discussion of whether this is for the final presentation or just for
work-in-progress. Manual change markings aren’t too distracting.
</p>

<ul class="org-ul">
<li>RD: When we publish the new version, are we intending on publishing the diffs
as well. Would it make sense to link the changes to the relevant sections in
the diff version.</li>
</ul>

<p>
Some discussion of the automatically generated diff; probably too much noise.
</p>

<ul class="org-ul">
<li>DN: The delta is very useful; it would not be so useful if there are too many
of them. Could we make sections with greater numbers of changes stand out more.</li>
<li>NW: We can try to do something like that.</li>
<li>RD: Do we have a formal notion of how to phrase the changes?</li>
<li>MK: Getting that consistent is a challenge.</li>
</ul>

<p>
Proposal: adopt this change.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-h-FAF778CF-41F9-4D93-B67C-58F3CB7D4AC5" class="outline-3">
<h3 id="h-FAF778CF-41F9-4D93-B67C-58F3CB7D4AC5"><span class="section-number-3">2.2.</span> Making records and options consistent</h3>
<div class="outline-text-3" id="text-h-FAF778CF-41F9-4D93-B67C-58F3CB7D4AC5">
<p>
See <a href="https://lists.w3.org/Archives/Public/public-xslt-40/2024Apr/0005.html">email thread</a>.
</p>

<p>
NW describes the email thread.
</p>

<ul class="org-ul">
<li>RD: I think it makes sense to keep them like the prototype
<ul class="org-ul">
<li>… Being able to name the record would be useful.</li>
<li>… We could use the declare-type URI structure record.</li>
<li>… It would also be nice to have the record/description definitions be links.</li>
</ul></li>
<li>MK: What about making the record and the description more closely linked,
shading or a box.</li>
<li>ED: Some sort of title perhaps.</li>
<li>JK: Go with this. If we need more do more in the future, we can add more markup.</li>
</ul>

<p>
ACTION: NW to proceed with the records/options proposal and make a PR.
</p>
</div>
</div>

<div id="outline-container-pr-1151" class="outline-3">
<h3 id="pr-1151"><span class="section-number-3">2.3.</span> PR #1151: 1138 Merge format and format-name params of format-number</h3>
<div class="outline-text-3" id="text-pr-1151">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-1151">#1151</a>
</p>

<p>
MK introduces the PR.
</p>

<ul class="org-ul">
<li>RD: I like the proposal; I wonder what the reason is for dropping the QName in the format name.</li>
<li>MK: Because we added that earlier in 4.0 so it’s not backwards incompatible.</li>
<li>RD: The format-name parameter in the map allows either.</li>
<li>MK: Specifying it in the map is slightly different; if you use it in the
options it doesn’t depend on the namespace context. If you want a QName, you
have to use a QName. A name without a prefix will always be in no namespace.</li>
<li>RD: But in terms of consistency between a format name outside of the options
map or inside it,…if you specify it as a string, then the string will be case to an NCName.</li>
</ul>

<p>
Some discussion of how conversion applies here. 
</p>

<ul class="org-ul">
<li>MK: If you supply a string, then it’ll be cast to an NCName. That’s why
they’re in the order specified.</li>
<li>RD: So the only other case is where you have an xs:QName as a format name; you
can pass that to the options map but you can’t pass it to the function directly.</li>
<li>MK: Right. That wasn’t allowed in 3.1.</li>
<li>RD: I’d be in favor of keeping the xs:QName as a function argument to preserve symmetry.</li>
<li>MK: That’s not the only asymmetry, there’s also a difference in how unprefixed
names are handled.</li>
</ul>

<p>
Proposal: accept this PR.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-pr-1150" class="outline-3">
<h3 id="pr-1150"><span class="section-number-3">2.4.</span> PR #1150: 1142 Drop restriction disallowing items-equal with unordered</h3>
<div class="outline-text-3" id="text-pr-1150">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-1150">#1150</a>
</p>

<p>
MK introduces the PR.
</p>

<ul class="org-ul">
<li>MK: When we introduced the items-equal callback to deep-equal, I added a
paternalistic restriction that it was forbidden when doing unordered
comparisons.
<ul class="org-ul">
<li>… CG persuaded me that we should let users ask for it if they want. There
are other places where users can ask for things that will have poor performance.</li>
</ul></li>
<li>DN: Can we put in the specification that implementations should warn if users do this?</li>
<li>MK: Implementations can always produce warnings.</li>
<li>MSM: Looking at the text highlighted, I think there is a warning in the specification.
<ul class="org-ul">
<li>… And if I’m an implementor then I might take this as advice to issue a warning.</li>
</ul></li>
</ul>

<p>
General nods of agreement that this is a good place.
</p>

<ul class="org-ul">
<li>DN: I think there are very few users who read the full specification. So as a
user it would always be valuable to have such a warning. It wouldn’t interfere
with processing.</li>
<li>MSM: If implementations warned about everything that could be costly, then
almost every program I write will come with so many warnings that I start
looking up how to turn warnings off. I don’t worry about performance except
when it’s running. I don’t worry about code that runs “fast enough.”</li>
<li>MK: I’d add that there are users who want to get code to a point where there
are no warnings; that makes me reluctant to create false alarm warnings.</li>
<li>NW: If we try to decide what all the warnings should be, we’ll never finish.</li>
<li>CG: Most of the time, this will probably perform fine, it depends entirely on the size of the data.</li>
<li>RD: Profilers are more useful than warnings for performance issues.</li>
</ul>

<p>
Proposal: accept this PR.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-pr-1148" class="outline-3">
<h3 id="pr-1148"><span class="section-number-3">2.5.</span> PR #1148: 1143 Coercion rules: handle choice types before atomization</h3>
<div class="outline-text-3" id="text-pr-1148">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-1148">#1148</a>
</p>

<p>
MK introduces the PR.
</p>

<ul class="org-ul">
<li>MK: When discussion choice item times last week, we skimmed over the coercion rules.
<ul class="org-ul">
<li>… When writing tests and implementing, I discovered that’s quite a thorny subject.</li>
<li>… If you have a choice between string and map and you provide a sequence of
untyped atomics and maps, then the way each item is coerced is going to be
different.</li>
<li>… There’s a structural impact on the coercion rules.</li>
</ul></li>
<li>MK: I’m not completely convinced that I’ve got to the bottom of it.</li>
</ul>

<p>
MK reviews the rules in the revised specification.
</p>

<ul class="org-ul">
<li>MK: I propose we don’t merge this now, but review is encouraged.</li>
<li>RD: I wonder if the change to the function coercion rules is more applicable
than just the choice.
<ul class="org-ul">
<li>… Specifically, if one implementation applied the rules at compile time and
another did it at runtime if you’d get different behavior.</li>
</ul></li>
<li>MK: Yes. And the 3.1 spec allows that.</li>
<li>RD: So we’re refining that.</li>
</ul>
</div>
</div>

<div id="outline-container-pr-1147" class="outline-3">
<h3 id="pr-1147"><span class="section-number-3">2.6.</span> PR #1147: QT4CG-072-01 Clarify schema type terminology</h3>
<div class="outline-text-3" id="text-pr-1147">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-1147">#1147</a>
</p>

<p>
MK introduces the PR.
</p>

<ul class="org-ul">
<li>MK: This was the question of what was or was not a schema type. There was
previous a vague statement about union types.
<ul class="org-ul">
<li>… There’s now a definition of schema type in our specification with caveats
about what can and cannot be used for validation.</li>
<li>… Types defined with our syntax can’t be used for validation.</li>
</ul></li>
<li>MSM: In the definition of schema type, the deletion of the words “or could be”.</li>
<li>MK: The effect of that is that types you’ve defined as unions locally, not
using XSD capabilities, are no longer categorized as schema types.</li>
<li>MSM: I’m concerned primarily because it was a big deal for some in the schema
working group that you should be able to define schema types and validate
against them using mechanisms other than XSD schema documents.
<ul class="org-ul">
<li>… I have no idea if anybody does that, but because it was a big deal in the
WG, I’m made a little nervous by it here.</li>
</ul></li>
<li>MK: We don’t say it has to be defined in a schema document, we just say in a schema.</li>
<li>MSM: Ok, that’s probably enough of an out.</li>
<li>MSM: The other question is, local union types not being schema types has the
consequence that they will never be used in type annotations. But that’s true anyway…</li>
<li>MK: One thing to check carefully is what you can use as the target of cast.
<ul class="org-ul">
<li>… A cast target is now a type name, always a scheme type, or a choice item
type or an enumeration type.</li>
</ul></li>
</ul>

<p>
Proposal: accept this PR.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-pr-1141" class="outline-3">
<h3 id="pr-1141"><span class="section-number-3">2.7.</span> PR #1141: 1140 Replace 'search' with 'target' for indexing functions</h3>
<div class="outline-text-3" id="text-pr-1141">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-1141">#1141</a>
</p>

<ul class="org-ul">
<li>NW: I took an action to replace <code>$search</code> with <code>$target</code> in two indexing functions.
<ul class="org-ul">
<li>… That generated a bit of discussion about other alternatives to <code>$target</code>.</li>
<li>… Does anyone want to discuss those.</li>
</ul></li>
<li>MK: I don’t like <code>$target</code> but I couldn’t think of anything better.</li>
<li>NW: Right then, I’d like to propose we merge this without any more discussion.</li>
</ul>

<p>
General nods of agreement.
</p>

<p>
Proposal: accept this PR.
</p>

<p>
Accepted.
</p>
</div>
</div>
</div>

<div id="outline-container-any-other-business" class="outline-2">
<h2 id="any-other-business"><span class="section-number-2">3.</span> Any other business</h2>
<div class="outline-text-2" id="text-any-other-business">
<p>
None heard.
</p>
</div>
</div>

<div id="outline-container-adjourned" class="outline-2">
<h2 id="adjourned"><span class="section-number-2">4.</span> Adjourned</h2>
<div class="outline-text-2" id="text-adjourned">
</div>
</div>
</div>
</body>
</html>
