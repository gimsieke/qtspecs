:PROPERTIES:
:ID:       48588399-F2B4-439D-BBD2-D93AB915D22F
:END:
#+title: QT4 CG Meeting 060 Minutes 2024-01-09
#+author: Norm Tovey-Walsh
#+filetags: :qt4cg:
#+options: html-style:nil h:6
#+html_head: <link rel="stylesheet" type="text/css" href="/meeting/css/htmlize.css"/>
#+html_head: <link rel="stylesheet" type="text/css" href="../../../css/style.css"/>
#+html_head: <link rel="shortcut icon" href="/img/QT4-64.png" />
#+html_head: <link rel="apple-touch-icon" sizes="64x64" href="/img/QT4-64.png" type="image/png" />
#+html_head: <link rel="apple-touch-icon" sizes="76x76" href="/img/QT4-76.png" type="image/png" />
#+html_head: <link rel="apple-touch-icon" sizes="120x120" href="/img/QT4-120.png" type="image/png" />
#+html_head: <link rel="apple-touch-icon" sizes="152x152" href="/img/QT4-152.png" type="image/png" />
#+options: author:nil email:nil creator:nil timestamp:nil
#+startup: showall

[[../][Meeting index]] / [[https://qt4cg.org][QT4CG.org]] / [[https://qt4cg.org/dashboard][Dashboard]] / [[https://github.com/qt4cg/qtspecs/issues][GH Issues]] / [[https://github.com/qt4cg/qtspecs/pulls][GH Pull Requests]]

* Draft Minutes
:PROPERTIES:
:unnumbered: t
:CUSTOM_ID: minutes
:END:

* Summary of new and continuing actions [0/6]
:PROPERTIES:
:unnumbered: t
:CUSTOM_ID: new-actions
:END:

+ [ ] QT4CG-052-02: NW to consider how to schedule an “editor’s meeting”
+ [ ] QT4CG-052-06: MK to consider the editorial question of “promotion” for the symmetric relations.
+ [ ] QT4CG-055-01: MK to clarify that the return type of the deep lookup operator is a flat sequence.
+ [ ] QT4CG-056-04: MK to write a proposal for adding a select attribute to xsl:text
+ [ ] QT4CG-058-01: MK to clarify in ~fn:numeric-compare~ that -0 and +0 are equal.
+ [ ] QT4CG-058-02: MK to consider providing more advice about the pitfalls of mixing decimal and double when sorting
+ [ ] QT4CG-060-01: NW to describe why we’re closing #899 without change
+ [ ] QT4CG-060-02: MK to sketch out a proposal with ~subsequence~ and ~subsequence-where~.
+ [ ] QT4CG-060-03: MK to review PR and if there are no concerns, merge it without discussion next weeks
+ [ ] QT4CG-060-04: CG to make a PR to remove ~numeric-compare~ and consider other functions

* Administrivia
:PROPERTIES:
:CUSTOM_ID: administrivia
:END:

** Roll call [10/11]
:PROPERTIES:
:CUSTOM_ID: roll-call
:END:

Regrets: MSM.

+ [X] Reece Dunn (RD)
+ [X] Sasha Firsov (SF)
+ [X] Christian Grün (CG)
+ [X] Joel Kalvesmaki (JK) [:10-]
+ [X] Michael Kay (MK)
+ [X] John Lumley (JL)
+ [X] Dimitre Novatchev (DN)
+ [X] Wendell Piez (WP) [:10-]
+ [X] Ed Porter (EP)
+ [ ] C. M. Sperberg-McQueen (MSM)
+ [X] Norm Tovey-Walsh (NW). /Scribe/. /Chair/.

** Accept the agenda
:PROPERTIES:
:CUSTOM_ID: agenda
:END:

Proposal: Accept [[../../agenda/2024/01-09.html][the agenda]].

Accepted.

*** Status so far…
:PROPERTIES:
:CUSTOM_ID: so-far
:END:

#+CAPTION: “Burn down” chart on open issues
#+NAME:   fig:open-issues
[[./issues-open-2024-01-09.png]]

#+CAPTION: Open issues by specification
#+NAME:   fig:open-issues-by-spec
[[./issues-by-spec-2024-01-09.png]]

#+CAPTION: Open issues by type
#+NAME:   fig:open-issues-by-type
[[./issues-by-type-2024-01-09.png]]

** Approve minutes of the previous meeting
:PROPERTIES:
:CUSTOM_ID: approve-minutes
:END:

Proposal: Accept [[../../minutes/2023/12-19.html][the minutes of the previous meeting]].

Accepted.

** Next meeting
:PROPERTIES:
:CUSTOM_ID: next-meeting
:END:

The next meeting [[../../agenda/2024/01-16.html][is scheduled for Tuesday, 16 January 2024]].

Any regrets for the next meeting?

** Review of open action items [0/6]
:PROPERTIES:
:CUSTOM_ID: open-actions
:END:

+ [ ] QT4CG-052-02: NW to consider how to schedule an “editor’s meeting”
+ [ ] QT4CG-052-06: MK to consider the editorial question of “promotion” for the symmetric relations.
+ [ ] QT4CG-055-01: MK to clarify that the return type of the deep lookup operator is a flat sequence.
+ [ ] QT4CG-056-04: MK to write a proposal for adding a select attribute to xsl:text
+ [ ] QT4CG-058-01: MK to clarify in ~fn:numeric-compare~ that -0 and +0 are equal.
+ [ ] QT4CG-058-02: MK to consider providing more advice about the pitfalls of mixing decimal and double when sorting

** Review of open pull requests and issues
:PROPERTIES:
:CUSTOM_ID: open-pull-requests
:END:

*** Blocked
:PROPERTIES:
:CUSTOM_ID: blocked
:END:

The following PRs are open but have merge conflicts or comments which
suggest they aren’t ready for action.

+ PR [[https://qt4cg.org/dashboard/#pr-795][#795]]: 655: fn:sort-with
+ PR [[https://qt4cg.org/dashboard/#pr-529][#529]]: 528: revision of json(), and renaming to elements-to-maps()

*** Merge without discussion
:PROPERTIES:
:CUSTOM_ID: merge-without-discussion
:END:

The following PRs are editorial, small, or otherwise appeared to be
uncontroversial when the agenda was prepared. The chairs propose that
these can be merged without discussion. If you think discussion is
necessary, please say so.

+ PR [[https://qt4cg.org/dashboard/#pr-926][#926]]: 860 Editorial rearrangement of spec for shallow lookup
+ PR [[https://qt4cg.org/dashboard/#pr-925][#925]]: 780 Document incompatibility in format-number etc
+ PR [[https://qt4cg.org/dashboard/#pr-924][#924]]: 648 Disallow user modifications to schema for FN namespace
+ PR [[https://qt4cg.org/dashboard/#pr-923][#923]]: 913-new-examples-for-local-name-etc
+ PR [[https://qt4cg.org/dashboard/#pr-922][#922]]: 915 function body terminology
+ PR [[https://qt4cg.org/dashboard/#pr-918][#918]]: Minor cx through chap. 14
+ PR [[https://qt4cg.org/dashboard/#pr-914][#914]]: XQFO minor edits
+ PR [[https://qt4cg.org/dashboard/#pr-912][#912]]: XQFO: Minor edits
+ PR [[https://qt4cg.org/dashboard/#pr-907][#907]]: 906 fn:deep-equal: unordered → ordered
+ PR [[https://qt4cg.org/dashboard/#pr-905][#905]]: 898 - relax the constraints on document-uri
+ PR [[https://qt4cg.org/dashboard/#pr-904][#904]]: 821 Annotations: Make default namespace explicit
+ PR [[https://qt4cg.org/dashboard/#pr-901][#901]]: 895 Parameters with default values: allow empty sequences

Proposal: merged without discussion

Accepted.

*** Close without action
:PROPERTIES:
:CUSTOM_ID: close-without-action
:END:

It has been proposed that the following issues be closed without action.
If you think discussion is necessary, please say so.

+ Issue [[https://github.com/qt4cg/qtspecs/issues/899][#899]]: Simplifying the language - types have behaviour.

Propocal: close without action

+ MK: We know this is a problem, but no one’s come up with a better
  solution. It’s an area where adding any additional features will
  just make it more complicated.

Accepted.

ACTION QT4CG-060-01: NW to describe why we’re closing #899 without change

*** XSLT focused
:PROPERTIES:
:CUSTOM_ID: xslt-focused
:END:

The following PRs appear to be candidates for a future XSLT-focused
meeting.

+ PR [[https://qt4cg.org/dashboard/#pr-871][#871]]: Action qt4 cg 027 01 next match

These issues identify the XSLT-focused changes that have been made to
the specifications but which have not been established by the
community group as the status quo.

+ Issue [[https://github.com/qt4cg/qtspecs/issues/168][#168]]: XSLT Extension Instructions invoking Named Templates

*** Substantive PRs
:PROPERTIES:
:CUSTOM_ID: substantive
:END:

The following substantive PRs were open when this agenda was prepared.

+ PR [[https://qt4cg.org/dashboard/#pr-927][#927]]: 861 Rewrite spec of deep lookup operator
+ PR [[https://qt4cg.org/dashboard/#pr-921][#921]]: 920 Allow xsl:break and xsl:next-iteration within branch of xsl:switch
+ PR [[https://qt4cg.org/dashboard/#pr-916][#916]]: 720 Allow methods in maps with access to $this
+ PR [[https://qt4cg.org/dashboard/#pr-909][#909]]: 893 fn:compare: Support for arbitrary atomic types
+ PR [[https://qt4cg.org/dashboard/#pr-880][#880]]: 872 Symmetry: fn:items-at → fn:get
+ PR [[https://qt4cg.org/dashboard/#pr-874][#874]]: 878 Proposed extension to subsequence
+ PR [[https://qt4cg.org/dashboard/#pr-832][#832]]: 77 Add map:deep-update and array:deep-update
+ PR [[https://qt4cg.org/dashboard/#pr-737][#737]]: 295: Boost the capability of recursive record types

*** Proposed for V4.0
:PROPERTIES:
:CUSTOM_ID: proposed-40
:END:

The following issues are labled “proposed for V4.0”.

+ Issue [[https://github.com/qt4cg/qtspecs/issues/910][#910]]: Introduce a Kollection object with functions that operate on all types of items that can be containers of unlimited number of "members"
+ Issue [[https://github.com/qt4cg/qtspecs/issues/908][#908]]: Function identity: documentation still too vague
+ Issue [[https://github.com/qt4cg/qtspecs/issues/850][#850]]: fn:parse-html: Finalization
+ Issue [[https://github.com/qt4cg/qtspecs/issues/829][#829]]: fn:boolean: EBV support for more item types
+ Issue [[https://github.com/qt4cg/qtspecs/issues/716][#716]]: Generators in XPath
+ Issue [[https://github.com/qt4cg/qtspecs/issues/689][#689]]: fn:stack-trace: keep or drop?
+ Issue [[https://github.com/qt4cg/qtspecs/issues/583][#583]]: array:replace(), etc
+ Issue [[https://github.com/qt4cg/qtspecs/issues/557][#557]]: fn:unparsed-binary: accessing and manipulating binary types
+ Issue [[https://github.com/qt4cg/qtspecs/issues/340][#340]]: fn:format-number: Specifying decimal format
+ Issue [[https://github.com/qt4cg/qtspecs/issues/283][#283]]: Enumeration types
+ Issue [[https://github.com/qt4cg/qtspecs/issues/260][#260]]: array:index-of
+ Issue [[https://github.com/qt4cg/qtspecs/issues/236][#236]]: map:group-by or map:build with a sequence of keys
+ Issue [[https://github.com/qt4cg/qtspecs/issues/33][#33]]: json parsing number type option
+ Issue [[https://github.com/qt4cg/qtspecs/issues/31][#31]]: Extend FLWOR expressions to maps

* Technical Agenda
:PROPERTIES:
:CUSTOM_ID: technical-agenda
:END:

** PR #874: 878 Proposed extension to subsequence
:PROPERTIES:
:CUSTOM_ID: pr-874
:END:

See PR [[https://qt4cg.org/dashboard/#pr-874][#874]]

+ MK: This arises from CG’s proposal to rename items-before and items-after.
  + … It goes back to an idea of combining them all into a single
    function with optional parameters.
+ MK: All this PR does is introduce the new function, it would need
  more editorial work if accepted.
+ MK Describes the changes in the ~fn:subsequence~ function.
+ RD: In the binding of ~$temp~ you’ve mentioned greater-than-or-equal but it’s ~le~.
+ MK: This gives the correct, backwards-compatible answer in the ~NaN~ case.
+ DN: It seems very powerful, and I admire powerful things. At the
  same time, I’d like to see something less complicated. It’s very
  easy to get confused. We have two different pairs of
  mutually-exclusive arguments. I think this is the first function
  with mutually-exclusive arguments. 
+ MK: The closest analogy is probably ~fn:slice~, which we haven’t
  looked at all that much.
  + … We had four separate functions, we had difficulty finding names
    for them, but the proliferation is an issue. This swings the
    pendulum the other way.
  + … It gives more functionality than we had before, by using ~$from~
    and ~$length~ for example.
+ DN: I’d like to make a parallel with .NET ~linq~ where they’re kept
  separate. That’s much more understandable.
+ MK: I like that kind of API, though it’s quite hard to optimize
  statically. It’s hard to see how to introduce that into our language
  without mutable iterators and streams.
+ DN: We already have generators and collections on the table. It’s
  just an example of an alternative that’s simpler.
+ CG: First, i was a bit hesitant about having all the functions in
  ~fn:subsequence~, but we implemented it and showed it to users and
  it was intuitive.
+ RD: It’s only ~$start~ and ~$from~ that are mutally exclusive.
+ MK: No, ~$length$~, ~$while~, and ~$until~ are exclusive as well.
+ RD: Oh, then my idea for using a union doesn’t help. We already have
  FLOWR based sytnax for working with loops so maybe it makes sense to
  look if anything is required there.
+ MK: That’s an alternative, to add clauses to FLOWR expressions. We
  could certainly look at that. I like doing things with functions
  rather than syntax, but that would certainly be an option.
+ RD: We could have both. There are equivalent expressions that are
  supported in the language. We introduced ~every()~ and ~any()~
  functions as equivalent to the quantifier expressions.
+ CG: I wonder if there are many use cases. Do folks really want to do
  this?
+ MK: I see lots of questions about this on StackOverflow.
+ DN: Looking a bit more, it seems to me that it can be two functions:
  the existing function and a new function ~subsequence-where~ that
  has ~$from~ and ~$while$. I think that would be more useful and
  understandable.
+ NW: That does address a concern I have about making the
  ~subsequence()~ function more complicated.
+ MK: I can sketch that out.

ACTION QT4CG-060-02: MK to sketch out a proposal with ~subsequence~ and ~subsequence-where~.

** PR #737: 295: Boost the capability of recursive record types
:PROPERTIES:
:CUSTOM_ID: pr-737
:END:

+ PR [[https://qt4cg.org/dashboard/#pr-737][#737]]

+ MK reviews the background for the issue.
+ MK: John Snelson first proposed an idea like this in a blog post and
  pointed me to the relevant literature. These are iso-recursive types.
+ MK: That’s about it really, there are no special operators. There’s
  nothing that enables you to create infinite instances.
+ DN: This is another example of something I really like. I have one
  question. There are some conditions to prevent infinite/circular
  reference. Is there an guarantee that infinite/circular reference
  involving multiple types can happen, or do we need explicitly to
  specify such conditions? I would like to see a separate chapter
  about records in the final spec.
+ MK: There are two questions. Can you create an infinite data
  structure? No. That’s a question of what operators we provide. You
  can only create them with the map constructor and such. We don’t
  have pointers. Do the rules ensure that it is always possible to
  construct an instance? It doesn’t really matter if you allow users
  to construct types that have no instances. That’s already true in a
  few places. They aren’t useful, but they don’t do any harm. The
  rules, like it has to be an optional field, are a bit paternal. It
  means the system will reject some useless types.
+ DN: To refine the question: is it possible to have two record types,
  each of which references the other type?
+ MK: Yes.
+ DN: Then we should have an example or prose telling us if creating
  such a chain of references is infinite.
+ RD: I have three questions. One is, should we remove the
  self-reference in the record declarations we have?
+ MK: Yes, this is supposed to replace that.
+ RD: Two, in the bit where iso-recursive is described, we should
  refer to the expanded QName because if we’re just doing a simple name match.
+ MK: Yes, I may have just overlooked that because I thought it was obvious.
+ MK: One thing that occurred to me is that we’re starting to treat
  named record types as being a bit more than just names for things.
  + … They’re no longer just aliases, they’re introducing a new capability.
  + … One thing I wanted to bounce of people was whether we can get rid
    of named item types in general and only having named record types.
+ RD: I think named item types are useful for things like a binary type locally.
+ MK: Unions and enumerations are another example.
+ RD: Do we list the named item types as a possibility in the atomic
  types and should we?
+ MK: I think we do.

Some discussion of what it would mean for named item types to be only
allowed as record types.

+ JL: I could see a case where you want to use a named item type as
  shortcut for something you didn’t want to have to write over and over.
+ JL: Are these all global?
+ MK: In XSLT, I don’t think we’ve fully developed it. But I think
  they should be subject to the package level visibility. They’re not
  local. In XQuery they might be module level.
+ RD: Should the named item type be with the functions and variables
  that have public/private scope in XQuery then?

MK attempts to check what we’ve actually done.

+ MK: Item type declarations do have annotations so they can be
  declared public or private. I’m not sure if that’s fully developed.
+ DN: Is it possible to declare a record type with no fixed fields? If
  it’s possible then every map is a record that has zero keys. I think
  that would be good.
+ MK: You can define ~record(*)~ which is everything at all.
+ DN: Then we can stop talking about maps and only talk about records
  with no fields.

Proposal: merge this PR?

ACTION QT4CG-060-03: MK to review PR and if there are no concerns, merge it without discussion next week

** PR #909: 893 fn:compare: Support for arbitrary atomic types
:PROPERTIES:
:CUSTOM_ID: pr-909
:END:

+ PR [[https://qt4cg.org/dashboard/#pr-909][#909]]

CG discusses the background of the proposal.

+ CG: This is a simpler proposal. It generalizes the ~compare~ function to take any atomic type.
  + … For all types, the rules are defined using the existing rules for comparisons.
  + … The most significant differences are in strings and URIs.
+ DN: Don’t we already have a ~op:keys-equal~ function (not exposed),
  isn’t that the same? If it isn’t, then we should describe how
  they’re different.
+ CG: Are you thinking of ~atomic-equal~?
+ DN: No, in XPath 3.0 there’s something like ~op:keys-equal~
+ MK: Maps are compared with ~atomic-equal~ which only cares about
  equality. This has a lot of similarities to ~atomic-equal~ but it
  handles context sensitivity and comparisons (for sorting, for
  example).
  + … We have lots of comparison functions, but they all have a
    rationale for existence.
  + … I support bundling the functionality like this into a single function.
+ MK: Does this make ~numeric-compare~ redundant? 
+ RD: I was going to make the same comment.
+ DN: If these are so closely related, will this allow us to eliminate
  the other comparison functions?
+ MK: We could consider getting rid of the ~op:~ versions and putting
  it all here, but it doesn’t effect users. It would be interesting to
  see how that looks.
+ CG: I’d like to drop ~numeric-compare~ and include it in this function.
+ NW: I like that.
+ JK: I support this proposal too.

Proposal: accept this PR

Accepted.

ACTION QT4CG-060-04: CG to make a PR to remove numeric-compare and consider other functions

* Any other business?
:PROPERTIES:
:CUSTOM_ID: any-other-business
:END:

** What about PR #880?
:PROPERTIES:
:CUSTOM_ID: discuss-880
:END:

+ NW: What should we do about scheduling continuing discussion of PR #880?
+ MK: It’s all tied up with what we do about subsequence.
+ NW: Ok, I’ll just let it float along in the agenda for a bit.

** Meeting time?
:PROPERTIES:
:CUSTOM_ID: meeting-time
:END:

+ JL: What’s going on with moving the time?
+ NW: I haven’t had enough replies yet. The replies I have received
  don’t seem likely to move us. I’ll try to nudge folks.

* Adjourned
:PROPERTIES:
:CUSTOM_ID: adjourned
:END:
