<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>QT4 CG Meeting 046 Minutes 2023-09-19</title>
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="/meeting/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="../../../css/style.css"/>
<link rel="shortcut icon" href="/img/QT4-64.png" />
<link rel="apple-touch-icon" sizes="64x64" href="/img/QT4-64.png" type="image/png" />
<link rel="apple-touch-icon" sizes="76x76" href="/img/QT4-76.png" type="image/png" />
<link rel="apple-touch-icon" sizes="120x120" href="/img/QT4-120.png" type="image/png" />
<link rel="apple-touch-icon" sizes="152x152" href="/img/QT4-152.png" type="image/png" />
</head>
<body>
<div id="content" class="content">
<h1 class="title">QT4 CG Meeting 046 Minutes 2023-09-19</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#minutes">Draft Minutes</a></li>
<li><a href="#new-actions">Summary of new and continuing actions <code>[1/10]</code></a></li>
<li><a href="#administrivia">1. Administrivia</a>
<ul>
<li><a href="#roll-call">1.1. Roll call <code>[10/11]</code></a></li>
<li><a href="#agenda">1.2. Accept the agenda</a>
<ul>
<li><a href="#so-far">1.2.1. Status so far…</a></li>
</ul>
</li>
<li><a href="#approve-minutes">1.3. Approve minutes of the previous meeting</a></li>
<li><a href="#next-meeting">1.4. Next meeting</a></li>
<li><a href="#open-actions">1.5. Review of open action items <code>[6/8]</code></a></li>
<li><a href="#open-pull-requests">1.6. Review of open pull requests and issues</a>
<ul>
<li><a href="#merge-without-discussion">1.6.1. Merge without discussion</a></li>
<li><a href="#substantive">1.6.2. Substantive PRs</a></li>
<li><a href="#requires-confirmation">1.6.3. Requires confirmation</a></li>
<li><a href="#proposed-for-40">1.6.4. Proposed for V4.0</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#technical-agenda">2. Technical Agenda</a>
<ul>
<li><a href="#issue-52">2.1. Issue #52: Allow record(*) based RecordTests</a></li>
<li><a href="#issue-372">2.2. Issue 372: Separate default namespace for elements from the default namespace for types</a></li>
<li><a href="#pr-710">2.3. PR 710: 36: fn:function-annotations</a></li>
</ul>
</li>
<li><a href="#any-other-business">3. Any other business?</a></li>
<li><a href="#adjourned">4. Adjourned</a></li>
</ul>
</div>
</div>
<p>
<a href="../">Agenda index</a> / <a href="https://qt4cg.org">QT4CG.org</a> / <a href="https://qt4cg.org/dashboard">Dashboard</a> / <a href="https://github.com/qt4cg/qtspecs/issues">GH Issues</a> / <a href="https://github.com/qt4cg/qtspecs/pulls">GH Pull Requests</a>
</p>

<div id="outline-container-minutes" class="outline-2">
<h2 id="minutes">Draft Minutes</h2>
<div class="outline-text-2" id="text-minutes">
</div>
</div>

<div id="outline-container-new-actions" class="outline-2">
<h2 id="new-actions">Summary of new and continuing actions <code>[1/10]</code></h2>
<div class="outline-text-2" id="text-new-actions">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-029-07: NW to open the next discussion of #397 with a demo from DN
<ul class="org-ul">
<li>See PR <a href="https://qt4cg.org/dashboard/#pr-449">#449</a>. Discussion planned for meeting 048, 3 October 2023.</li>
</ul></li>
<li class="off"><code>[&#xa0;]</code> QT4CG-045-02: RD to address comments on HTML namespaces in another PR</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-046-01: MK to continue the work on #129 for the other specs (we accepted #703)</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-046-02: RD to draft the specification changes to allow record(*)</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-046-03: MK to roll back the changes related to default namespaces for elments and types (issue #372)</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-046-04: CG to flesh out changes related to annotations in other parts of the specs</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-046-05: NW to updated parse-uri to use decode-from-uri (issue #566)</li>
</ul>
</div>
</div>

<div id="outline-container-administrivia" class="outline-2">
<h2 id="administrivia"><span class="section-number-2">1.</span> Administrivia</h2>
<div class="outline-text-2" id="text-administrivia">
</div>

<div id="outline-container-roll-call" class="outline-3">
<h3 id="roll-call"><span class="section-number-3">1.1.</span> Roll call <code>[10/11]</code></h3>
<div class="outline-text-3" id="text-roll-call">
<p>
Regrets: JK.
</p>

<ul class="org-ul">
<li class="on"><code>[X]</code> Reece Dunn (RD)</li>
<li class="on"><code>[X]</code> Sasha Firsov (SF)</li>
<li class="on"><code>[X]</code> Christian Grün (CG)</li>
<li class="off"><code>[&#xa0;]</code> Joel Kalvesmaki (JK) [:05-]</li>
<li class="on"><code>[X]</code> Michael Kay (MK)</li>
<li class="on"><code>[X]</code> John Lumley (JL)</li>
<li class="on"><code>[X]</code> Dimitre Novatchev (DN)</li>
<li class="on"><code>[X]</code> Wendell Piez (WP)</li>
<li class="on"><code>[X]</code> Ed Porter (EP)</li>
<li class="on"><code>[X]</code> C. M. Sperberg-McQueen (MSM)</li>
<li class="on"><code>[X]</code> Norm Tovey-Walsh (NW). <i>Scribe</i>. <i>Chair</i>.</li>
</ul>
</div>
</div>

<div id="outline-container-agenda" class="outline-3">
<h3 id="agenda"><span class="section-number-3">1.2.</span> Accept the agenda</h3>
<div class="outline-text-3" id="text-agenda">
<p>
Proposal: Accept <a href="../../agenda/2023/09-19.html">the agenda</a>.
</p>

<p>
Accepted.
</p>
</div>

<div id="outline-container-so-far" class="outline-4">
<h4 id="so-far"><span class="section-number-4">1.2.1.</span> Status so far…</h4>
<div class="outline-text-4" id="text-so-far">

<div id="orgc12413f" class="figure">
<p><img src="./issues-open-2023-09-19.png" alt="issues-open-2023-09-19.png" />
</p>
<p><span class="figure-number">Figure 1: </span>“Burn down” chart on open issues</p>
</div>


<div id="orgde3a698" class="figure">
<p><img src="./issues-by-spec-2023-09-19.png" alt="issues-by-spec-2023-09-19.png" />
</p>
<p><span class="figure-number">Figure 2: </span>Open issues by specification</p>
</div>


<div id="org37059f0" class="figure">
<p><img src="./issues-by-type-2023-09-19.png" alt="issues-by-type-2023-09-19.png" />
</p>
<p><span class="figure-number">Figure 3: </span>Open issues by type</p>
</div>
</div>
</div>
</div>

<div id="outline-container-approve-minutes" class="outline-3">
<h3 id="approve-minutes"><span class="section-number-3">1.3.</span> Approve minutes of the previous meeting</h3>
<div class="outline-text-3" id="text-approve-minutes">
<p>
Proposal: Accept <a href="../../minutes/2023/09-12.html">the minutes of the previous meeting</a>.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-next-meeting" class="outline-3">
<h3 id="next-meeting"><span class="section-number-3">1.4.</span> Next meeting</h3>
<div class="outline-text-3" id="text-next-meeting">
<p>
The next meeting <a href="../../agenda/2023/09-26.html">is scheduled for Tuesday, 26 September 2023</a>.
</p>

<p>
Regrets: CG, JL may be late.
</p>

<p>
The meeting of 26 September will focus on XSLT issues.
</p>
</div>
</div>

<div id="outline-container-open-actions" class="outline-3">
<h3 id="open-actions"><span class="section-number-3">1.5.</span> Review of open action items <code>[6/8]</code></h3>
<div class="outline-text-3" id="text-open-actions">
<ul class="org-ul">
<li class="on"><code>[X]</code> QT4CG-026-01: MK to write a summary paper that outlines the decisions we need to make on “value sequences”
<ul class="org-ul">
<li>This is related to PR #368: Issue 129 - Context item generalized to context value and
subsequent discussion.</li>
</ul></li>
<li class="off"><code>[&#xa0;]</code> QT4CG-029-07: NW to open the next discussion of #397 with a demo from DN
<ul class="org-ul">
<li>See PR <a href="https://qt4cg.org/dashboard/#pr-449">#449</a>. Discussion planned for meeting 048, 3 October 2023.</li>
</ul></li>
<li class="on"><code>[X]</code> QT4CG-039-01: NW to schedule discussion of issue <a href="https://github.com/qt4cg/qtspecs/issues/52">#52</a>, <i>Allow record(*) based RecordTests</i></li>
<li class="on"><code>[X]</code> QT4CG-042-02: NW to make the query into a simple map with repeated values.</li>
<li class="on"><code>[X]</code> QT4CG-042-03: NW to consider revisions to query parses.</li>
<li class="on"><code>[X]</code> QT4CG-045-01: MK to redraft PR #659 to reflect “search path” semantics.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-045-02: RD to address comments on HTML namespaces in another PR</li>
<li class="on"><code>[X]</code> QT4CG-045-03: MK to write a PR for context values (issue #129)
<ul class="org-ul">
<li>Same as QT4CG-026-01, both now covered by a PR</li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-open-pull-requests" class="outline-3">
<h3 id="open-pull-requests"><span class="section-number-3">1.6.</span> Review of open pull requests and issues</h3>
<div class="outline-text-3" id="text-open-pull-requests">
</div>

<div id="outline-container-merge-without-discussion" class="outline-4">
<h4 id="merge-without-discussion"><span class="section-number-4">1.6.1.</span> Merge without discussion</h4>
<div class="outline-text-4" id="text-merge-without-discussion">
<p>
The following PRs are editorial, small, or otherwise appeared to be
uncontroversial when the agenda was prepared. The chairs propose that
these can be merged without discussion. If you think discussion is
necessary, please say so.
</p>

<ul class="org-ul">
<li>PR <a href="https://qt4cg.org/dashboard/#pr-703">#703</a>: 129 (1): XPath and XQuery changes for introduction of context value</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-702">#702</a>: 701: fn:concat: Support for 0 or more arguments</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-696">#696</a>: 566: Rework query parameters on build-uri/parse-uri</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-694">#694</a>: XQFO minor edits, with new examples and notes, 2 through 4.6</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-690">#690</a>: 687 Clarify constructor functions for user-defined types</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-680">#680</a>: 668 define case insensitive collation normatively</li>
</ul>

<p>
Accepted.
</p>

<p>
ACTION: QT4CG-046-01: MK to continue the work on #129 for the other specs (we accepted #703)
</p>
</div>
</div>

<div id="outline-container-substantive" class="outline-4">
<h4 id="substantive"><span class="section-number-4">1.6.2.</span> Substantive PRs</h4>
<div class="outline-text-4" id="text-substantive">
<p>
The following substantive PRs were open when this agenda was prepared.
</p>

<ul class="org-ul">
<li>PR <a href="https://qt4cg.org/dashboard/#pr-710">#710</a>: 36: fn:function-annotations</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-691">#691</a>: 688 Semantics of local union types, enumeration types, etc</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-659">#659</a>: 647: schema location hints</li>
</ul>
</div>
</div>

<div id="outline-container-requires-confirmation" class="outline-4">
<h4 id="requires-confirmation"><span class="section-number-4">1.6.3.</span> Requires confirmation</h4>
<div class="outline-text-4" id="text-requires-confirmation">
<p>
These issues identify changes that have been made to the specifications but
which have not been established by the community group as the status quo.
</p>

<ul class="org-ul">
<li>Issue <a href="https://github.com/qt4cg/qtspecs/issues/372">#372</a>: Separate default namespace for elements from the default namespace for types</li>
<li>Issue <a href="https://github.com/qt4cg/qtspecs/issues/283">#283</a>: Enumeration types</li>
</ul>
</div>
</div>

<div id="outline-container-proposed-for-40" class="outline-4">
<h4 id="proposed-for-40"><span class="section-number-4">1.6.4.</span> Proposed for V4.0</h4>
<div class="outline-text-4" id="text-proposed-for-40">
<p>
The following issues are labled “proposed for V4.0”.
</p>

<ul class="org-ul">
<li>Issue <a href="https://github.com/qt4cg/qtspecs/issues/479">#479</a>: fn:deep-equal: Input order</li>
<li>Issue <a href="https://github.com/qt4cg/qtspecs/issues/340">#340</a>: fn:format-number: Specifying decimal format</li>
<li>Issue <a href="https://github.com/qt4cg/qtspecs/issues/260">#260</a>: array:index-of</li>
<li>Issue <a href="https://github.com/qt4cg/qtspecs/issues/238">#238</a>: Support Invisible XML</li>
<li>Issue <a href="https://github.com/qt4cg/qtspecs/issues/130">#130</a>: New super/union type xs:binary?</li>
<li>Issue <a href="https://github.com/qt4cg/qtspecs/issues/129">#129</a>: Context item → Context value?</li>
<li>Issue <a href="https://github.com/qt4cg/qtspecs/issues/36">#36</a>: Allow support for user-defined annotations.</li>
</ul>
</div>
</div>
</div>
</div>

<div id="outline-container-technical-agenda" class="outline-2">
<h2 id="technical-agenda"><span class="section-number-2">2.</span> Technical Agenda</h2>
<div class="outline-text-2" id="text-technical-agenda">
</div>

<div id="outline-container-issue-52" class="outline-3">
<h3 id="issue-52"><span class="section-number-3">2.1.</span> Issue #52: Allow record(*) based RecordTests</h3>
<div class="outline-text-3" id="text-issue-52">
<ul class="org-ul">
<li>See issue <a href="https://github.com/qt4cg/qtspecs/issues/52">#52</a></li>

<li>RD: The basic gist is that with the type based item type matching
for arrays and maps, those allow typed values with a “*” based variant.
<ul class="org-ul">
<li>… But records don’t have a corresponding syntax</li>
<li>… MK justifies this by saying the user can use <code>map(*)</code> if they
want an any valued map.</li>
<li>… But my view is that then means the language isn’t symmetric. If
a user looks at <code>array(*)</code> and <code>map(*)</code>, they may wonder where <code>record(*)</code> is.</li>
<li>… And if you’re using records as parameters and you want to allow
<code>*</code>, you’d have to change to using maps. That’s a cognative leap for
the user.</li>
<li>… Also, the extensible flag at the end of the record declaration
is already a <code>*</code>.</li>
<li>… I’d like to get consensus on this.</li>
</ul></li>
<li>MK: This isn’t a “lie down in the road” sort of question. I just
don’t see the need. If someone writes <code>record(*)</code>, they probably
don’t understand what it means because it means <i>any map</i>.</li>
<li>DN: I agree with MK. The whole idea of having records as a special
type of map is that records have well-known, fixed name properties.
I think this would be totally not useful. It defeats the purpose of records.</li>
<li>MSM: I’m not used to disagreeing with DN on topics like this. I don’t think <code>map(*)</code>
is a big hurdle, but if you’re working in a language and you normally use records,
just being able to say <code>record(*)</code> is a convient affordance.
<ul class="org-ul">
<li>… Users don’t always understand the whole language. I lean towards allowing it.</li>
</ul></li>
</ul>

<p>
The chair tries to word a straw poll. Would you prefer to allow <code>record(*)</code>?
</p>

<ul class="org-ul">
<li>In favor: 7</li>
<li>Opposed: 2</li>
<li>Abstain: 1</li>
</ul>

<p>
Formally then, the proposal is to allow <code>record(*)</code>. 
</p>

<p>
Does anyone object?
</p>

<p>
None heard.
</p>

<p>
Accepted.
</p>

<p>
ACTION: QT4CG-046-02: RD to draft the specification changes to allow record(*)
</p>

<ul class="org-ul">
<li>MK: Make sure the subsumption rules handle this case.</li>
</ul>
</div>
</div>

<div id="outline-container-issue-372" class="outline-3">
<h3 id="issue-372"><span class="section-number-3">2.2.</span> Issue 372: Separate default namespace for elements from the default namespace for types</h3>
<div class="outline-text-3" id="text-issue-372">
<ul class="org-ul">
<li>See issue <a href="https://github.com/qt4cg/qtspecs/issues/372">#372</a></li>

<li>MK: This is one of the things that was in the draft spec that we put
up at the beginning of the process.</li>
<li>RD: In plugin, I’ve gone through and implemented this part of the
spec. It’s nice, straightforward and I’m favor of it.</li>
</ul>

<p>
MK reviews the issue.
</p>

<ul class="org-ul">
<li>MK: I would expect most users want to make the XML Schema namespace
the default namespace for types so that you can say <code>as=integer</code>
instead of <code>as=xs:integer</code>.
<ul class="org-ul">
<li>… The complication is how to manage the backwards compatibility.</li>
<li>… Although the facility is in the current draft, the issue observes that it’s incomplete.</li>
</ul></li>
<li>MK: We have other option issues, for example, default namespaces for
input and output, but this doesn’t attempt to solve those issues.</li>
<li>DN: We don’t have types as first class objects, so we’re really talking about type names.
<ul class="org-ul">
<li>… For a long time, I’ve considered this namespacing artificial and
unnecessary in any context except XML elements and attributes.</li>
<li>… We’ve started using XML namespaces for many things that are not
XML items. As such, I think we should revisit the whole namespace
concept for anything that isn’t part of an XML document.</li>
<li>… I’m concerned that allowing <code>integer</code> may be confusing for users
and I don’t see any value in it.</li>
</ul></li>
<li>MSM: I will observe that when I teach XPath to users who don’t
already know it. For the first half or two-thirds of the course, I
use the full syntax not the abbreviated syntax. Because it’s easier
to understand and learn. The shorter syntax is of know value to a learner.
<ul class="org-ul">
<li>… When you find yourself thinking “do I have to type all these
characters” in six months, then look at the shorter syntax.</li>
<li>… I almost never change the default namespace and when I do I
regret it. For me, this doesn’t seem to have any value. And I’m
concerned about the backwards incompatibilities. I find it clearer
if things in namespaces are labeled and I don’t have to remember
what declaration is in scope.</li>
<li>… But because I don’t use this, I don’t have an good sense of who
would find this useful.</li>
<li>… With respect to the broader question, namespaces are good for
distributed extensibility and I would want to keep them.</li>
<li>… Having types and elements in the same namespaces, might be
because they are to types that you’ve defined in your schema. Your
elements and types are likely to be in the same namespace so it’s
convenient to default them the same way. The fact that MK can say
with a same straight face that the vast majority of types names
are references to the “xs:” namespace, leads me to think that
that’s not the world we live in.</li>
</ul></li>
<li>RD: On the point of revisiting namespaces for functions in general,
I’d be strongly opposed to that. In the company I work for, we
extensively use multiple modules and have different namespaces for
the functions in those modules. Not having namespaces would make it
a lot harder to manage and maintain large, complicated XQuery
programs, especially considering that other languages like C++, C#,
Java, all support namespaces.
<ul class="org-ul">
<li>… In regard to setting the default element namespace, I’ve set it
occasionally to the XHTML namespace because it makes writing XHTML
templates and things a little easier.</li>
<li>… I wonder if we should look at whether it’s worth splitting the
references in the specification. In effect, the current syntax
would set both the default element and type namespace. (Something
about spec changes vs. language changes that the scribe isn’t
clear he successfully captured.)</li>
</ul></li>
<li>DN: I fully agree with everything MSM said. I didn’t propose to
abolish namespacing functions, but I think that we have good
examples from other programming languages for much more meaningful
namespaces for functions. I’m not saying we should abolish
namespaces, I only want to raise the idea to consider and review a
better namespacing mechanism such as we have in other programming
languages.</li>
<li>SF: In our conversation, we have a little bit of history. HTML
dropped namespaces. JSON didn’t add namespaces. Users expect to work
in a limited namespace and defaults allow users to do that. If we
aren’t careful, we’ll make the situation worse. We could learn from
C# about how to manage namespace scopes better.</li>
<li>MK: I agree with everything everyone has said, the question is what
should we do about it. The primary problem we’re trying to solve
isn’t solved by this separation. Every new user falls into the trap
of using an unqualified name and finds that their expression selects
nothing. We can’t fix it because of compatibility reasons.
<ul class="org-ul">
<li>… We keep adding layers of sticky plaster to the namespaces issue
in an effort to solve that fundamental problem. But each time, it
just adds complexity and makes things wors.</li>
<li>… We also need to take account of the HTML5 willful violation of
the specification which says that an unqualified name in an XPath
expression in that context selects an HTML element.</li>
<li>… One thing I’ve done in informal interfaces is introduce the idea
that there’s a mode of operation where unprefixed names match only
on the local name. I’m convinced that makes life an awful lot
easier for many users. It’s what you want most of the time. The
only problem is how to introduce it with an acceptable level of
backwards compatibility.</li>
<li>… My feeling now is that because of the compatibility issues, it’s
adding little bits of complexity that most users won’t understand.
The benefit of being able to write <code>as=xs:integer</code> without the
<code>xs:</code> probably doesn’t justify adding extra paragraphs to the
spec. I dislike everything about namespaces, but it’s an insoluble problem.</li>
<li>… I think we should roll this back.</li>
</ul></li>
<li>JL: Most of my experience is in the XSLT world. Is this problem
coming from the increasing use of typed function declarations in
XPath in XSLT?</li>
<li>MK: Perhaps. I guess when we first introduced the default namespace
for elements and types, we didn’t really know how it was going to be
used. It ended up being used mostly for atomic types.</li>
<li>JL: You only start to get types if you’re building your own functions.</li>
<li>MK: Yes, I think they’re mostly in function declarations.</li>
<li>SF: I don’t agree that removing the prefixes will make things harder
to use. With an API similar to Java reflection that would allow you
to search for types, that would help.</li>
<li>DN: I totally agree with MK that everything about XML namespaces is
bad. Why don’t we create a specification for namespaces for
functions and maps.</li>
</ul>

<p>
Proosal: roll this back, abandon changes currently in the spec.
</p>

<p>
Accepted.
</p>

<p>
ACTION: QT4CG-046-03: MK to roll back the changes related to default namespaces for elments and types (issue #372)
</p>
</div>
</div>

<div id="outline-container-pr-710" class="outline-3">
<h3 id="pr-710"><span class="section-number-3">2.3.</span> PR 710: 36: fn:function-annotations</h3>
<div class="outline-text-3" id="text-pr-710">
<ul class="org-ul">
<li>See PR <a href="https://qt4cg.org/dashboard/#pr-710">#710</a></li>
</ul>

<p>
CG outlines the changes in #710.
</p>

<ul class="org-ul">
<li>CG: The PR is based on a proposal from RD for improving annotations.
<ul class="org-ul">
<li>… MK has already observed that we should add more description of
how annotations are passed along to other functions (for example,
partial application).</li>
</ul></li>

<li>DN: I don’t dispute the necessity of such a function, but there are
no function annotations in XPath. They only exist in XQuery. So
these functions would really only be useful for XQuery. XSLT has
some XSLT-only functions, I think these should be XQuery-only functions.
<ul class="org-ul">
<li>… This would avoid confusion for users who don’t use XQuery.</li>
</ul></li>
<li>CG: Could annotations also be added to XPath?</li>
<li>RD: In the first example of a private function, is that would only
work in the current scope because if you’re including a module that
declares a private function, then you can’t access that.
<ul class="org-ul">
<li>… This is only valid because it’s a local function.</li>
</ul></li>
<li>CG: That’s correct.</li>
<li>JL: Not being an XQuery person, are these annotations arbitrary? Can
you put anything in it?</li>
<li>RD: The values are limited to literal values, numbers and strings.</li>
</ul>

<p>
Some discussion of things like RestXQ that use annotations.
</p>

<ul class="org-ul">
<li>MSM: The <code>%private</code> example in the example, the map I get back a map
in which the QName <code>xquery:private</code> maps to the empty sequence. Would
it be better if it mapped to <code>true()</code>? If I’m going to test if
something is annotated private, then getting an empty sequence is “falsey”?</li>
<li>CG: The reason is that we have annotations with and without values.
So you need to use <code>map:contains</code> to see if the QName exists.</li>
<li>MK: We could say that an empty list of values is a default for a
single argument with the value true.</li>
<li>CG: That would possibly be backwards incompatible.</li>
<li>MK: Yes, with current vendor extensions…</li>
<li>CG: Not necessarily, we’ve only just extended annotations to include
booleans. But it would effect future applications.</li>
<li>RD: I think that kind of makes sense. What you’re essentially saying
with annotations like <code>%private</code> is “is this function private”.
Having that be a shorthand for <code>%private(true())</code> makes sense to me.
The specification doesn’t currently allow boolean parameters to
annotations, so this wouldn’t be backwards incompatible.</li>
<li>CG: Then it might best not to modify the rules of this function but
of annotations in general.</li>
<li>JL: I don’t think we need to do anything special here, we have
<code>map:contains</code>.</li>
</ul>

<p>
Proposal: Accept this PR.
</p>

<p>
DN objects, asserting that it’s wrong to put an XQuery-only function in the F&amp;O specification.
</p>

<ul class="org-ul">
<li>CG: I can add a note saying that it’s XQuery-only.</li>
<li>RD: I think the note makes sense, there are already notes about
places where XPath and XQuery are divergent</li>
<li>MK: The data model says function items have annotations. It’s purely
accidental that you can’t specify them in XPath or XSLT.</li>

<li>DN: I still object. Why can’t it be put in the XQuery specification?</li>
</ul>

<p>
Further discussion including the observation that there is a fair
amount of build machinery that’s designed to support function
declarations and none of it is currently present in the XQuery build.
</p>

<ul class="org-ul">
<li>MK: I think it belongs in F&amp;O because we already say that you load
XQuery and XSLT function libraries, so it makes sense to have it in
common.</li>
</ul>

<p>
There are a number of questions that arise from this discussion:
</p>

<ol class="org-ol">
<li>Should we add annotations to XPath?</li>
<li>Should we move this function to the XQuery specification?</li>
<li>Should an empty annotation default to a value of <code>true()</code>?</li>
</ol>

<p>
The proposal is accepted over DN’s objection.
</p>

<p>
ACTION: QT4CG-046-04: CG to flesh out changes related to annotations in other parts of the specs
</p>
</div>
</div>
</div>

<div id="outline-container-any-other-business" class="outline-2">
<h2 id="any-other-business"><span class="section-number-2">3.</span> Any other business?</h2>
<div class="outline-text-2" id="text-any-other-business">
<p>
None heard.
</p>
</div>
</div>

<div id="outline-container-adjourned" class="outline-2">
<h2 id="adjourned"><span class="section-number-2">4.</span> Adjourned</h2>
<div class="outline-text-2" id="text-adjourned">
</div>
</div>
</div>
</body>
</html>