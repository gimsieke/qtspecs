<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>QT4 CG Meeting 040 Minutes 2023-06-27</title>
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="/meeting/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="../../../css/style.css"/>
<link rel="shortcut icon" href="/img/QT4-64.png" />
<link rel="apple-touch-icon" sizes="64x64" href="/img/QT4-64.png" type="image/png" />
<link rel="apple-touch-icon" sizes="76x76" href="/img/QT4-76.png" type="image/png" />
<link rel="apple-touch-icon" sizes="120x120" href="/img/QT4-120.png" type="image/png" />
<link rel="apple-touch-icon" sizes="152x152" href="/img/QT4-152.png" type="image/png" />
</head>
<body>
<div id="content" class="content">
<h1 class="title">QT4 CG Meeting 040 Minutes 2023-06-27</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#minutes">Draft Minutes</a></li>
<li><a href="#new-actions">Summary of new and continuing actions <code>[0/6]</code></a></li>
<li><a href="#administrivia">1. Administrivia</a>
<ul>
<li><a href="#roll-call">1.1. Roll call <code>[9/10]</code></a></li>
<li><a href="#agenda">1.2. Accept the agenda</a>
<ul>
<li><a href="#so-far">1.2.1. Status so far…</a></li>
</ul>
</li>
<li><a href="#approve-minutes">1.3. Approve minutes of the previous meeting</a></li>
<li><a href="#next-meeting">1.4. Next meeting</a></li>
<li><a href="#open-actions">1.5. Review of open action items <code>[0/6]</code></a></li>
<li><a href="#open-pull-requests">1.6. Review of open pull requests and issues</a></li>
</ul>
</li>
<li><a href="#technical-agenda">2. Technical Agenda</a>
<ul>
<li><a href="#pr-529">2.1. PR #529: 528: revision of json(), and renaming to xdm-to-json()</a></li>
</ul>
</li>
<li><a href="#any-other-business">3. Any other business?</a></li>
<li><a href="#adjourned">4. Adjourned</a></li>
</ul>
</div>
</div>
<p>
<a href="../">Agenda index</a> / <a href="https://qt4cg.org">QT4CG.org</a> / <a href="https://qt4cg.org/dashboard">Dashboard</a> / <a href="https://github.com/qt4cg/qtspecs/issues">GH Issues</a> / <a href="https://github.com/qt4cg/qtspecs/pulls">GH Pull Requests</a>
</p>

<div id="outline-container-minutes" class="outline-2">
<h2 id="minutes">Draft Minutes</h2>
<div class="outline-text-2" id="text-minutes">
</div>
</div>

<div id="outline-container-new-actions" class="outline-2">
<h2 id="new-actions">Summary of new and continuing actions <code>[0/6]</code></h2>
<div class="outline-text-2" id="text-new-actions">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-002-10: BTW to coordinate some ideas about improving diversity in the group</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-016-08: RD to clarify how namespace comparisons are performed.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-026-01: MK to write a summary paper that outlines the decisions we need to make on “value sequences”
<ul class="org-ul">
<li>This is related to PR #368: Issue 129 - Context item generalized to context value and
subsequent discussion.</li>
</ul></li>
<li class="off"><code>[&#xa0;]</code> QT4CG-029-01: RD+DN to draft spec prose for the “divide and conquer” approach outlined in issue #399</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-029-07: NW to open the next discussion of #397 with a demo from DN
See PR <a href="https://qt4cg.org/dashboard/#pr-449">#449</a></li>
<li class="off"><code>[&#xa0;]</code> QT4CG-039-01: NW to schedule discussion of issue <a href="https://github.com/qt4cg/qtspecs/issues/52">#52</a>, <i>Allow record(*) based RecordTests</i></li>
</ul>
</div>
</div>

<div id="outline-container-administrivia" class="outline-2">
<h2 id="administrivia"><span class="section-number-2">1.</span> Administrivia</h2>
<div class="outline-text-2" id="text-administrivia">
</div>

<div id="outline-container-roll-call" class="outline-3">
<h3 id="roll-call"><span class="section-number-3">1.1.</span> Roll call <code>[9/10]</code></h3>
<div class="outline-text-3" id="text-roll-call">
<p>
Regrets MSM.
</p>

<ul class="org-ul">
<li class="on"><code>[X]</code> Reece Dunn (RD)</li>
<li class="on"><code>[X]</code> Sasha Firsov (SF)</li>
<li class="on"><code>[X]</code> Christian Grün (CG)</li>
<li class="on"><code>[X]</code> Joel Kalvesmaki (JK) [0:06-]</li>
<li class="on"><code>[X]</code> Michael Kay (MK)</li>
<li class="on"><code>[X]</code> John Lumley (JL)</li>
<li class="on"><code>[X]</code> Dimitre Novatchev (DN)</li>
<li class="on"><code>[X]</code> Ed Porter (EP)</li>
<li class="off"><code>[&#xa0;]</code> C. M. Sperberg-McQueen (MSM)</li>
<li class="on"><code>[X]</code> Norm Tovey-Walsh (NW). <i>Scribe</i>. <i>Chair</i>.</li>
</ul>
</div>
</div>

<div id="outline-container-agenda" class="outline-3">
<h3 id="agenda"><span class="section-number-3">1.2.</span> Accept the agenda</h3>
<div class="outline-text-3" id="text-agenda">
<p>
Proposal: Accept <a href="../../agenda/2023/06-27.html">the agenda</a>.
</p>

<p>
Accepted.
</p>
</div>

<div id="outline-container-so-far" class="outline-4">
<h4 id="so-far"><span class="section-number-4">1.2.1.</span> Status so far…</h4>
<div class="outline-text-4" id="text-so-far">

<div id="org45da61e" class="figure">
<p><img src="./issues-open-2023-06-27.png" alt="issues-open-2023-06-27.png" />
</p>
<p><span class="figure-number">Figure 1: </span>“Burn down” chart on open issues</p>
</div>


<div id="orga828f4b" class="figure">
<p><img src="./issues-by-spec-2023-06-27.png" alt="issues-by-spec-2023-06-27.png" />
</p>
<p><span class="figure-number">Figure 2: </span>Open issues by specification</p>
</div>


<div id="org8894666" class="figure">
<p><img src="./issues-by-type-2023-06-27.png" alt="issues-by-type-2023-06-27.png" />
</p>
<p><span class="figure-number">Figure 3: </span>Open issues by type</p>
</div>
</div>
</div>
</div>

<div id="outline-container-approve-minutes" class="outline-3">
<h3 id="approve-minutes"><span class="section-number-3">1.3.</span> Approve minutes of the previous meeting</h3>
<div class="outline-text-3" id="text-approve-minutes">
<p>
Proposal: Accept <a href="../../minutes/2023/06-20.html">the minutes of the previous meeting</a>.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-next-meeting" class="outline-3">
<h3 id="next-meeting"><span class="section-number-3">1.4.</span> Next meeting</h3>
<div class="outline-text-3" id="text-next-meeting">
<p>
The next meeting is scheduled for Tuesday, 4 July 2023.
</p>

<p>
Regrets from SF, ED, DN. Anticipated regrets from MSM and JK.
</p>

<p>
Proposal: cancel the meeting on 4 July.
</p>

<p>
Accepted.
</p>

<p>
The next meeting <a href="../../agenda/2023/07-11.html">is scheduled for Tuesday, 11 July 2023</a>.
</p>

<p>
No regrets heard for 11 July.
</p>

<p>
Accepted.
</p>

<p>
Reminder: the CG will take a vacation for four weeks in August. We
will not meet on 1, 8, 15, or 22 August.
</p>
</div>
</div>

<div id="outline-container-open-actions" class="outline-3">
<h3 id="open-actions"><span class="section-number-3">1.5.</span> Review of open action items <code>[0/6]</code></h3>
<div class="outline-text-3" id="text-open-actions">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-002-10: BTW to coordinate some ideas about improving diversity in the group</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-016-08: RD to clarify how namespace comparisons are performed.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-026-01: MK to write a summary paper that outlines the decisions we need to make on “value sequences”
<ul class="org-ul">
<li>This is related to PR #368: Issue 129 - Context item generalized to context value and
subsequent discussion.</li>
</ul></li>
<li class="off"><code>[&#xa0;]</code> QT4CG-029-01: RD+DN to draft spec prose for the “divide and conquer” approach outlined in issue #399</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-029-07: NW to open the next discussion of #397 with a demo from DN
See PR <a href="https://qt4cg.org/dashboard/#pr-449">#449</a></li>
<li class="off"><code>[&#xa0;]</code> QT4CG-039-01: NW to schedule discussion of issue <a href="https://github.com/qt4cg/qtspecs/issues/52">#52</a>, <i>Allow record(*) based RecordTests</i></li>
</ul>
</div>
</div>

<div id="outline-container-open-pull-requests" class="outline-3">
<h3 id="open-pull-requests"><span class="section-number-3">1.6.</span> Review of open pull requests and issues</h3>
<div class="outline-text-3" id="text-open-pull-requests">
<p>
The following editorial or otherwise minor PRs were open when this
agenda was prepared. The chair proposes that these can be merged
without discussion.
</p>

<ul class="org-ul">
<li>PR <a href="https://qt4cg.org/dashboard/#pr-569">#569</a> Minor editorial corrections, XDM chh. 1, 2</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-568">#568</a> Issue #567 - schema for xslt40</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-562">#562</a> 361: Named arguments: $input vs. $value</li>
</ul>

<p>
Proposal: Accept these PRs.
</p>

<p>
MK made a proposal to fix the argument name in <code>parse-uri</code>, CG agrees
and will update the PR.
</p>

<p>
Accepted with that amendment.
</p>

<p>
It has been proposed that the following issues be <a href="https://github.com/qt4cg/qtspecs/labels/Propose%20Closing%20with%20No%20Action">closed without action</a>.
</p>

<ul class="org-ul">
<li>Issue <a href="https://github.com/qt4cg/qtspecs/issues/457">#457</a> Support parsing numeric, alphabetic, and additive number systems. Feature</li>
<li>Issue <a href="https://github.com/qt4cg/qtspecs/issues/175">#175</a> In XQuery, allow a semicolon at the end of the module Enhancement</li>
<li>Issue <a href="https://github.com/qt4cg/qtspecs/issues/106">#106</a> Decorators' support Discussion</li>
</ul>

<p>
Proposal: Close these issues.
</p>

<p>
Accepted.
</p>
</div>
</div>
</div>

<div id="outline-container-technical-agenda" class="outline-2">
<h2 id="technical-agenda"><span class="section-number-2">2.</span> Technical Agenda</h2>
<div class="outline-text-2" id="text-technical-agenda">
</div>

<div id="outline-container-pr-529" class="outline-3">
<h3 id="pr-529"><span class="section-number-3">2.1.</span> PR #529: 528: revision of json(), and renaming to xdm-to-json()</h3>
<div class="outline-text-3" id="text-pr-529">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-529">#529</a>
</p>

<p>
MK reviews the PR.
</p>

<ul class="org-ul">
<li>MK: I’m going to start with 15.5.
<ul class="org-ul">
<li>… Although we hav a function called <code>xml-to-json</code> it doesn’t do
what users expect. It only converts a very limited vocabulary.</li>
<li>… Let’s argue about the name later!</li>
<li>… Goal: be possible represent any XDM content in JSON.</li>
<li>… Produce JSON that’s “intuitive and easy to use” not necessarily
reflecting every nuance of the XML.</li>
<li>… Produce consistent and stable JSON, small changes in the input
shouldn’t make large changes in the output. (Adding an attribute
shouldn’t, for example, have a large change on the output.)</li>
<li>… The conversion is not lossless, there’s compromise and
sacrifice.</li>
</ul></li>
<li>RD: Would it make sense to allow some customization?</li>
<li>MK: Yes, there’s a lot of customization. Wait just a bit longer!</li>
<li>MK discussses 15.5.1, JSON element layouts.</li>
<li>MK: Layouts for any given element can be chosen in various ways.
<ul class="org-ul">
<li>… explicit, from the schema, defaulted, uniform across the data</li>
</ul></li>
<li>MK: Using schema information gives you a little more information,
more than just what’s in the instance.</li>
</ul>

<p>
Section 15.5.1.1 lists a number of possible layouts.
</p>

<ul class="org-ul">
<li>RD: With the various functions that take a map or an XML object, it
would be useful if those accepted the JSON output from this
conversion. There’s a discrepancy here between what <code>fn:serialize</code>
would do with the map and what’s proposed here wrt property names
when namespaces are used.</li>
<li>MK: Yes, let’s look at the detail of that and see if we can make it work.</li>
<li>RD: It would be interesting and possibly useful to support JSON-LD
as an output type. That would let you pass in RDF-XML and get
JSON-LD out.</li>
<li>MK: Is that JSON-lines?</li>
<li>RD: No, it’s JSON linked data.</li>
<li>NW: That sounds like a different function to me…</li>
</ul>

<p>
MK returns to the rules for property names.
</p>

<ul class="org-ul">
<li>RD: How does that work for attributes?</li>
<li>MK: Attributes are different. You always use EQName syntax for
attributes in a namespace.</li>
</ul>

<p>
NW asks about adding “[1]” to the key name rather than making the
result an array.
</p>

<ul class="org-ul">
<li>MK: It’s only used for record layout. It avoids changing the output
for the case where only one or two values are duplicated.</li>
<li>CG: Can’t we use an array?</li>
<li>MK: Yes, but they might not be next to each other and you want them
to be ordered.</li>
</ul>

<p>
MK returns to the examples.
</p>

<ul class="org-ul">
<li>MK: I tried it on a fragment of grammar, and it worked pretty well
if the schema is used.</li>
</ul>

<p>
MK moves to 15.2.5, the function itself.
</p>

<ul class="org-ul">
<li>MK: It returns a string. That’s debatable, since you might
immediately parse it.</li>
</ul>

<p>
MK reviews the options.
</p>

<ul class="org-ul">
<li>MK: The rules that follow describe how to map atomic values and
other edge cases. Then the error cases.</li>

<li>DN: I admire this is a huge effort and there’s a lot here.
<ul class="org-ul">
<li>… I’m not sure I’d use this. It seems too complicated. I would
probably use XML serialization or other methods that I have in my
programming language, for example C#. That saves me from knowing
all the details about the layouts.</li>
<li>… The objective that small changes in the input shouldn’t cause
large changes in the output is misleading. Some large changes
would produce no changes at all, for example.</li>
<li>… For namespace names, it seems to me that if an XML document uses
elements in many namespaces, the results would not be very
readble. I would think to something like prefixes; you could have
a special section in the output that describes the prefix mapping.</li>
<li>… The idea of using different layouts is really great. The user
will be happy if they find the layout that suits them.</li>
</ul></li>
<li>MK: There are a lot of questions there. One of the key points is
that this is designed to hide complexity. In common cases, it should
produce “the right thing” by default. Most users won’t need to
understand the complexities in order to get the output they need.
<ul class="org-ul">
<li>… That includes handling of namespaces. It’s trying to handle
common cases intuitively. The common cases are no namespaces, one
namespace, or an envelope namespace with a different content
namespace.</li>
<li>… You can always transform first to get XML that will produce the
output you want.</li>
<li>… It’s trying to do an 80/20 rule. But as you say, that’s
subjective. I’ve tried it on quite a few examples from other tools
and it evolved to handle those examples well.</li>
</ul></li>
<li>DN: I’m still not sure I’d use this.</li>
<li>MK: That’s fair. Whether you want very specific JSON or just “any”
JSON depends a lot.</li>
<li>DN: For me, serializing into C# is going to be easiest.</li>

<li>JL: The spec lists all the layouts from the simplest to most
complicated. Will the last one handle everything?</li>
<li>MK: Yes.</li>
<li>JL: It might be better if they were listed in the other order,
showing simplifications rather than building up from the simple
cases.</li>
<li>MK: Maybe. I think from a pedagogic point of view, there’s benefit
in showing simple cases first.</li>
<li>JL: If some of these layouts are matched by the implementation
against certain cases, then am I going to end up with an output
where the JSON format will be very dependent on the input?</li>
<li>MK: Part of my thinkink here is that people who are going to use
this function are probably doing it because they have data that
works reasonably well in JSON.</li>
</ul>

<p>
MK reviews the rules used to select a layout pattern from an input.
</p>

<p>
It seems likely that the rules could be drawn out more clearly.
</p>

<ul class="org-ul">
<li>CG: I like the function. I have concerns that we introduce new
features instead of first aligning existing features. Most users
today use the serialize function with the JSON method. When we have
basic input like sequences or arrays the output already differs.
<ul class="org-ul">
<li>… I was wondering if it’s possible to get the same output with
serialize. If not, we have to explain it carefully.</li>
<li>… Could we pass these options to the JSON output method. We might
be able to use the existing serialize function instead of creating
a new function.</li>
</ul></li>
<li>MK: That’s a good point. Obviously serialize currently does some
very different things with nodes. It doesn’t convert XML trees to
JSON trees. But having said that, there’s certainly an overlap. We
can certainly look for better commonality and/or have a section that
explains how they differ.</li>
</ul>

<p>
Some discussion of how <code>serialize</code> and this function differ.
</p>

<ul class="org-ul">
<li>CG: It would be nice if you could use options on serialize.</li>
<li>RD: Could we have a layout name that is “does what <code>serialize</code>
currently does?”</li>
<li>MK: Yes, we might be able to do that.</li>
<li>JK: An excellent proposal. The previous version seemed to talk more
about whitespace normalization; that’s something that probably needs
to be covered.</li>
<li>DN: I think the name of the function should be <code>json-projection</code>.</li>
</ul>

<p>
MK will make another pass based on the feedback from today.    
</p>

<ul class="org-ul">
<li>MK: Do I read the group correctly that this approach is a good way
to go overall?</li>
</ul>

<p>
Thumbs up and general nods of agreement.
</p>
</div>
</div>
</div>

<div id="outline-container-any-other-business" class="outline-2">
<h2 id="any-other-business"><span class="section-number-2">3.</span> Any other business?</h2>
<div class="outline-text-2" id="text-any-other-business">
<p>
None heard.
</p>
</div>
</div>

<div id="outline-container-adjourned" class="outline-2">
<h2 id="adjourned"><span class="section-number-2">4.</span> Adjourned</h2>
<div class="outline-text-2" id="text-adjourned">
</div>
</div>
</div>
</body>
</html>