<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>QT4 CG Meeting 042 Minutes 2023-07-18</title>
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="/meeting/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="../../../css/style.css"/>
<link rel="shortcut icon" href="/img/QT4-64.png" />
<link rel="apple-touch-icon" sizes="64x64" href="/img/QT4-64.png" type="image/png" />
<link rel="apple-touch-icon" sizes="76x76" href="/img/QT4-76.png" type="image/png" />
<link rel="apple-touch-icon" sizes="120x120" href="/img/QT4-120.png" type="image/png" />
<link rel="apple-touch-icon" sizes="152x152" href="/img/QT4-152.png" type="image/png" />
</head>
<body>
<div id="content" class="content">
<h1 class="title">QT4 CG Meeting 042 Minutes 2023-07-18</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#minutes">Draft Minutes</a></li>
<li><a href="#new-actions">Summary of new and continuing actions <code>[0/5]</code></a></li>
<li><a href="#administrivia">1. Administrivia</a>
<ul>
<li><a href="#roll-call">1.1. Roll call <code>[9/11]</code></a></li>
<li><a href="#agenda">1.2. Accept the agenda</a>
<ul>
<li><a href="#so-far">1.2.1. Status so far…</a></li>
</ul>
</li>
<li><a href="#approve-minutes">1.3. Approve minutes of the previous meeting</a></li>
<li><a href="#next-meeting">1.4. Next meeting</a></li>
<li><a href="#open-actions">1.5. Review of open action items <code>[1/6]</code></a></li>
<li><a href="#open-pull-requests">1.6. Review of open pull requests and issues</a></li>
</ul>
</li>
<li><a href="#technical-agenda">2. Technical Agenda</a>
<ul>
<li><a href="#pr-529">2.1. Issue #566: fn:parse-uri, fn:build-uri: Feedback</a></li>
<li><a href="#h-7BB08AB2-0628-4A61-962D-917371E1DA1A">2.2. Namespace comparisons in HTML</a></li>
<li><a href="#h-88ED3AB8-8CF1-4B29-B9AC-B959B5599928">2.3. PR 614 duplicate values</a></li>
</ul>
</li>
<li><a href="#any-other-business">3. Any other business?</a></li>
<li><a href="#adjourned">4. Adjourned</a></li>
</ul>
</div>
</div>
<p>
<a href="../">Agenda index</a> / <a href="https://qt4cg.org">QT4CG.org</a> / <a href="https://qt4cg.org/dashboard">Dashboard</a> / <a href="https://github.com/qt4cg/qtspecs/issues">GH Issues</a> / <a href="https://github.com/qt4cg/qtspecs/pulls">GH Pull Requests</a>
</p>

<div id="outline-container-minutes" class="outline-2">
<h2 id="minutes">Draft Minutes</h2>
<div class="outline-text-2" id="text-minutes">
</div>
</div>

<div id="outline-container-new-actions" class="outline-2">
<h2 id="new-actions">Summary of new and continuing actions <code>[0/5]</code></h2>
<div class="outline-text-2" id="text-new-actions">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-002-10: BTW to coordinate some ideas about improving diversity in the group</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-016-08: RD to clarify how namespace comparisons are performed.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-026-01: MK to write a summary paper that outlines the decisions we need to make on “value sequences”
<ul class="org-ul">
<li>This is related to PR #368: Issue 129 - Context item generalized to context value and
subsequent discussion.</li>
</ul></li>
<li class="off"><code>[&#xa0;]</code> QT4CG-029-07: NW to open the next discussion of #397 with a demo from DN
See PR <a href="https://qt4cg.org/dashboard/#pr-449">#449</a></li>
<li class="off"><code>[&#xa0;]</code> QT4CG-039-01: NW to schedule discussion of issue <a href="https://github.com/qt4cg/qtspecs/issues/52">#52</a>, <i>Allow record(*) based RecordTests</i></li>
<li class="off"><code>[&#xa0;]</code> QT4CG-042-01: NW to use sequences instead of arrays in <code>parse-uri</code> output.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-042-02: NW to make the query into a simple map with repeated values.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-042-03: NW to consider revisions to query parses.</li>
</ul>
</div>
</div>

<div id="outline-container-administrivia" class="outline-2">
<h2 id="administrivia"><span class="section-number-2">1.</span> Administrivia</h2>
<div class="outline-text-2" id="text-administrivia">
</div>

<div id="outline-container-roll-call" class="outline-3">
<h3 id="roll-call"><span class="section-number-3">1.1.</span> Roll call <code>[9/11]</code></h3>
<div class="outline-text-3" id="text-roll-call">
<ul class="org-ul">
<li class="on"><code>[X]</code> Reece Dunn (RD)</li>
<li class="on"><code>[X]</code> Sasha Firsov (SF)</li>
<li class="on"><code>[X]</code> Christian Grün (CG)</li>
<li class="on"><code>[X]</code> Joel Kalvesmaki (JK) [0:05-]</li>
<li class="on"><code>[X]</code> Michael Kay (MK)</li>
<li class="on"><code>[X]</code> John Lumley (JL)</li>
<li class="on"><code>[X]</code> Dimitre Novatchev (DN)</li>
<li class="off"><code>[&#xa0;]</code> Ed Porter (EP)</li>
<li class="on"><code>[X]</code> C. M. Sperberg-McQueen (MSM)</li>
<li class="on"><code>[X]</code> Norm Tovey-Walsh (NW). <i>Scribe</i>. <i>Chair</i>.</li>
<li class="off"><code>[&#xa0;]</code> Matt Patterson (MP)</li>
</ul>
</div>
</div>

<div id="outline-container-agenda" class="outline-3">
<h3 id="agenda"><span class="section-number-3">1.2.</span> Accept the agenda</h3>
<div class="outline-text-3" id="text-agenda">
<p>
Proposal: Accept <a href="../../agenda/2023/07-18.html">the agenda</a>.
</p>

<p>
Accepted.
</p>
</div>

<div id="outline-container-so-far" class="outline-4">
<h4 id="so-far"><span class="section-number-4">1.2.1.</span> Status so far…</h4>
<div class="outline-text-4" id="text-so-far">

<div id="org5cb8609" class="figure">
<p><img src="./issues-open-2023-07-18.png" alt="issues-open-2023-07-18.png" />
</p>
<p><span class="figure-number">Figure 1: </span>“Burn down” chart on open issues</p>
</div>


<div id="org79b7288" class="figure">
<p><img src="./issues-by-spec-2023-07-18.png" alt="issues-by-spec-2023-07-18.png" />
</p>
<p><span class="figure-number">Figure 2: </span>Open issues by specification</p>
</div>


<div id="orga876eb3" class="figure">
<p><img src="./issues-by-type-2023-07-18.png" alt="issues-by-type-2023-07-18.png" />
</p>
<p><span class="figure-number">Figure 3: </span>Open issues by type</p>
</div>
</div>
</div>
</div>

<div id="outline-container-approve-minutes" class="outline-3">
<h3 id="approve-minutes"><span class="section-number-3">1.3.</span> Approve minutes of the previous meeting</h3>
<div class="outline-text-3" id="text-approve-minutes">
<p>
Proposal: Accept <a href="../../minutes/2023/07-11.html">the minutes of the previous meeting</a>.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-next-meeting" class="outline-3">
<h3 id="next-meeting"><span class="section-number-3">1.4.</span> Next meeting</h3>
<div class="outline-text-3" id="text-next-meeting">
<p>
The next meeting <a href="../../agenda/2023/07-25.html">is scheduled for Tuesday, 25 July 2023</a>.
</p>

<p>
No regrets heard.
</p>

<p>
Reminder: the CG will take a vacation for four weeks in August. We
will not meet on 1, 8, 15, or 22 August.
</p>
</div>
</div>

<div id="outline-container-open-actions" class="outline-3">
<h3 id="open-actions"><span class="section-number-3">1.5.</span> Review of open action items <code>[1/6]</code></h3>
<div class="outline-text-3" id="text-open-actions">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-002-10: BTW to coordinate some ideas about improving diversity in the group</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-016-08: RD to clarify how namespace comparisons are performed.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-026-01: MK to write a summary paper that outlines the decisions we need to make on “value sequences”
<ul class="org-ul">
<li>This is related to PR #368: Issue 129 - Context item generalized to context value and
subsequent discussion.</li>
</ul></li>
<li class="off"><code>[&#xa0;]</code> QT4CG-029-07: NW to open the next discussion of #397 with a demo from DN
See PR <a href="https://qt4cg.org/dashboard/#pr-449">#449</a></li>
<li class="off"><code>[&#xa0;]</code> QT4CG-039-01: NW to schedule discussion of issue <a href="https://github.com/qt4cg/qtspecs/issues/52">#52</a>, <i>Allow record(*) based RecordTests</i></li>
</ul>
</div>
</div>

<div id="outline-container-open-pull-requests" class="outline-3">
<h3 id="open-pull-requests"><span class="section-number-3">1.6.</span> Review of open pull requests and issues</h3>
<div class="outline-text-3" id="text-open-pull-requests">
<p>
The following PRs are open but have merge conflicts or comments which
suggest they aren’t ready for action.
</p>

<ul class="org-ul">
<li>PR <a href="https://qt4cg.org/dashboard/#pr-538">#538</a>: Attempt to allow xs:string to be 'promoted to' xs:anyURI</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-368">#368</a>: 129: Context item generalized to context value</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-546">#546</a>: 414: Attempt to implement expanding the allowed character repertoire</li>
</ul>

<p>
The following substantive PRs were open when this agenda was prepared.
</p>

<ul class="org-ul">
<li>PR <a href="https://qt4cg.org/dashboard/#pr-614">#614</a>: 123: fn:duplicate-values</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-609">#609</a>: 508: New Map &amp; Array Functions: Inconsistencies</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-603">#603</a>: 602 Implausible Expressions</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-589">#589</a>: 561: abbreviation fn=function, drop lambda syntax</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-575">#575</a>: 359: fn:void: Absorb result of evaluated argument</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-533">#533</a>: 413: Spec for CSV parsing with fn:parse-csv()</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-529">#529</a>: 528: revision of json(), and renaming to xdm-to-json()</li>
</ul>

<p>
The following editorial or otherwise minor PRs were open when this
agenda was prepared. The chair proposes that these can be merged
without discussion.
</p>

<ul class="org-ul">
<li>PR <a href="https://qt4cg.org/dashboard/#pr-612">#612</a>: 128: fn:replace: Tweaks</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-611">#611</a>: 329: Keyword parameters: Error codes</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-610">#610</a>: 506: fn:error: parameter names</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-607">#607</a>: XQFO Examples: Fixes, Formatting</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-606">#606</a>: Allow element(A|B) and attribute(A|B)</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-605">#605</a>: 21: Revise appendix for reserved function names</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-604">#604</a>: [Editorial] Drop the unused symbol URILiteral from the XPath grammar appendix</li>
</ul>

<p>
During the meeting, the committee added:
</p>

<ul class="org-ul">
<li>PR <a href="https://qt4cg.org/dashboard/#pr-615">#615</a>: Xdm minor edits, chh. 3-5</li>
</ul>

<p>
Proposal: Accept these PRs.
</p>

<p>
Accepted.
</p>

<p>
It has been proposed that the following issues be <a href="https://github.com/qt4cg/qtspecs/labels/Propose%20Closing%20with%20No%20Action">closed without action</a>.
If you think discussion is necessary, please say so.
</p>

<ul class="org-ul">
<li>None at this time</li>
</ul>

<p>
The following PRs appear to be candidates for a future XSLT-focussed
meeting.
</p>

<ul class="org-ul">
<li>PR <a href="https://qt4cg.org/dashboard/#pr-599">#599</a>: 90: Simplified stylesheets with no xsl:version</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-470">#470</a>: 369 add fixed-prefixes attribute in XSLT</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-412">#412</a>: 409, QT4CG-027-01: xsl:next-match</li>
</ul>

<p>
NW proposes another XSLT-focused meeting in mid-September
</p>
</div>
</div>
</div>

<div id="outline-container-technical-agenda" class="outline-2">
<h2 id="technical-agenda"><span class="section-number-2">2.</span> Technical Agenda</h2>
<div class="outline-text-2" id="text-technical-agenda">
</div>

<div id="outline-container-pr-529" class="outline-3">
<h3 id="pr-529"><span class="section-number-3">2.1.</span> Issue #566: fn:parse-uri, fn:build-uri: Feedback</h3>
<div class="outline-text-3" id="text-pr-529">
<p>
See Issue <a href="https://github.com/qt4cg/qtspecs/issues/566">#566</a>, in particular comment <a href="https://github.com/qt4cg/qtspecs/issues/566#issuecomment-1607816202">comment #3</a>.
</p>

<p>
Norm introduces the open questions from the comment.
</p>

<ul class="org-ul">
<li>RD: Would it make sense to have some of them as additional helper functions?</li>
<li>NW: Could do.</li>
<li>MK: Could put the function in the map, but it’s not clear that’s better.</li>
<li>JL: When you’re talking about symmetry with <code>build-uri()</code>, is it the
case that we need to say what the mininum pieces must be to be
unique.</li>
<li>NW: Not exactly, <code>build-uri()</code> takes advantage of different pieces if they’re available.</li>
<li>CG: It could be a good idea to raise errors if it’s inconsistent.</li>
<li>MK: I think it’s probably better to ignore things we don’t need rather than validate.</li>
<li>NW: That’s my position too.</li>
<li>RD: In some cases when calling <code>build-uri()</code>, you may have only some of
the values. I agree that they should be allowed and precedence applied.</li>
</ul>

<p>
Some review/discussion of the <code>build-uri()</code> function.
</p>

<ul class="org-ul">
<li>NW: Remove the URI value?</li>
<li>MK: I think it’s probably useful.</li>
<li>CG: My thought here was that we don’t have any other function that
returns the value. If you use <code>build-uri()</code>, then it could be confusing.</li>
<li>NW: I can see that.</li>
<li>JK: What about non-ASCII characters?</li>
<li>NW: They’re decoded in the values where it’s not ambiguous.</li>
</ul>

<p>
Should <code>path-segments</code> be an array or a sequence?
</p>

<ul class="org-ul">
<li>NW: I confess, I made it an array simply so that it’s easier to serialize as JSON.</li>
<li>JL: I’d be inclined to make them sequences if it’s possible. We tend
to use arrays where the sequence isn’t adequate.</li>
<li>MK: I think we should address the serialization problem by fixing
the serialization functions.</li>
</ul>

<p>
ACTION QT4CG-042-01: NW to use sequences instead of arrays in <code>parse-uri</code> output.
</p>

<p>
Should <code>query-segments</code> be an array of maps or a simple map?
</p>

<ul class="org-ul">
<li>NW: I can see the appeal of a simple map, though it loses the
ability to distinguish the order of repeated query keys.</li>
<li>RD: I think the more common case with repeated values is having them
as a grouped value set.</li>
<li>MK: I’d vote for supporting the common case well.</li>
</ul>

<p>
ACTION QT4CG-042-02: NW to make the query into a simple map with repeated values.
</p>

<p>
Some discussion of the cases where you do want to distinguish them.
</p>

<ul class="org-ul">
<li>JL: In the case where there are multiple keys with the same name,
you need to know the order sometimes. For example, if the parameters
are drilling down into a query.</li>
<li>MSM: I’m obsessing about that corner case too, because I know I’ve
done it in the past. I’ve done CGI scripts that relied on the
sequence of segments in the query.</li>
<li>RD: Would it make sense to make this an option?</li>
<li>NW: We could, but I’d rather not. That’s just choosing not to decide!</li>
<li>RD: Would it make sense to have a parse query function?</li>
<li>SF: Calling the property <code>query-parameters</code> will be more familiar to many users.</li>
<li>SF: We’re introducing <code>parse-uri()</code> with different parameters. Query
segments could be in addition to query parameters.</li>
<li>NW: Yes, could do.</li>
<li>MSM: I feel better writing it myself if it’s a simple function. SF’s
suggestion appeals to me. If we don’t do that, I still think the
name query parameters is better is better for the single map.</li>
</ul>

<p>
ACTION QT4CG-042-03: NW to consider revisions to query parses.
</p>

<ul class="org-ul">
<li>CG: Maybe we could add an example of parsing the query stringto
preserve order?</li>
</ul>
</div>
</div>

<div id="outline-container-h-7BB08AB2-0628-4A61-962D-917371E1DA1A" class="outline-3">
<h3 id="h-7BB08AB2-0628-4A61-962D-917371E1DA1A"><span class="section-number-3">2.2.</span> Namespace comparisons in HTML</h3>
<div class="outline-text-3" id="text-h-7BB08AB2-0628-4A61-962D-917371E1DA1A">
<p>
RD requested discussion per his action QT4CG-016-08.
</p>

<ul class="org-ul">
<li>RD: How should HTML attributes that are namespaces be interpreted?
In the XML serialization of HTML, that’s straightforward. But when
using the HTML parser, the namespace attributes are treated as
ordinary attributes. So from the HTML5 perspective, there are no
namespaces. What it does instead is treats namespaces implicitly.
<ul class="org-ul">
<li>… It always puts HTML in the HTML namespace and does that
implicitly for a selection of attributes.</li>
<li>… The issue really is around the namespaces that don’t fall under
those umbrellas. What should we do?</li>
<li>… HTML5 says they should be treated as ordinary attributes which
means that they’re not visible to the XML processor. If we do try
interpret them as namespaces, which is what the current spec does,
you could potentially have an invalid document because it’s
missing a namespace declaration or something.</li>
<li>… We could align the namespace processing with the HTML spec. Or
we could default to that and have an option to let users tell us
to parse namespaces.</li>
</ul></li>
<li>SF: Have two options, one to inherit and a second is allowed to
enforce default namespaces. Enumerate a list that would be a match
with HTML.</li>
<li>MSM: If I’m understanding correctly, RD is suggesting an option that
allows us to ingest a document and treat the namespace declarations
as general attributes. I don’t know how to make a XDM instance without
resolving namespaces correctly.</li>
</ul>

<p>
Example from the Zoom chat:
</p>

<div class="org-src-container">
<pre class="src src-nil">&lt;foo:bar xmlns:foo="ns-foo"/&gt;
&lt;baz xmlns="ns-something"/&gt;
</pre>
</div>

<ul class="org-ul">
<li>RD: It depends on whether the document is using the XML parser or
the HTML parser. If using the XML parser then it’ll be treated like
a namespace as normal. Under the HTML5 parsing rules, the foo:bar
would be the local name. In the HTML spec, they suggest using an
escape sequence for the colon, something like <code>\x</code>. The XML
namespace attributes are within the attribute list.
<ul class="org-ul">
<li>… That’s still going to be problematic.</li>
</ul></li>
<li>NW: If you put namespace declarations in the attributes, I think
that way lies madness. Just throw them away and apply the HTML
namespace rules.</li>
<li>MSM: What do you do about “foo:bar” as a tag name?</li>
<li>NW: I don’t know, just replace the colons with something else.</li>
<li>MSM: I would like to avoid allowing “foo:bar” as an NCName is the
worst outcome.</li>
</ul>

<p>
Some discussion about whether or not the form of escaping provided by
HTML5 will work for us or not. It’s implementation dependent.
</p>

<ul class="org-ul">
<li>SF: There are several APIs that allow you to define the namespace
resolver. That’s important if you do the transformation and you want
to get the right namespaces for all elements. We could provide a
default function for this but also allow users to define their own.
<ul class="org-ul">
<li>… But that would require namespace resolver to be part of the
transformation and query API; I‘m not sure if that would work.</li>
<li>… It would need to be defined both declaratively and imperatively.</li>
</ul></li>
<li>NW: Could do that for the parse function I guess.</li>
</ul>

<p>
Some discussion about whether or not this applies to just the
parse-html function or also applies during transformations because the
source DOM came from the browser.
</p>

<ul class="org-ul">
<li>MK: I’d prefer for something less complicated than a resolver.</li>
<li>RD: We can always have a proposal for that later.
<ul class="org-ul">
<li>… So in terms of the local names; keep the escaping that makes
them valid NCNames.</li>
<li>… And namespace attributes are dropped.</li>
</ul></li>
</ul>

<p>
General agreement.
</p>
</div>
</div>

<div id="outline-container-h-88ED3AB8-8CF1-4B29-B9AC-B959B5599928" class="outline-3">
<h3 id="h-88ED3AB8-8CF1-4B29-B9AC-B959B5599928"><span class="section-number-3">2.3.</span> PR 614 duplicate values</h3>
<div class="outline-text-3" id="text-h-88ED3AB8-8CF1-4B29-B9AC-B959B5599928">
<p>
CG introduces the issues, #123
</p>

<ul class="org-ul">
<li>CG: I’ve had two uses in the last year or so where this would have been useful.
<ul class="org-ul">
<li>… Duplicate values returns all values that occur more than once in the sequence.</li>
<li>… There are some examples in the notes.</li>
<li>… Like distinct-values, 1, 1.0, and 1.0e0 are all the same.</li>
<li>… One use case is to look for duplicate @id values.</li>
</ul></li>
<li>JK: An excellent function, I’ll use it a lot. I’m glad that it’s
simple; when we were talking about histograms, I think we were
getting off the path. But would it be nice to have some way of
getting the most duplicate values.</li>
<li>CG: I think that could be easy.</li>
<li>MK: I vote for keeping it simple.</li>
<li>JL: I can see an argument for returning all the values that are
duplicated, then you can find the arity of the sets easily.</li>
<li>DN: I agree with MK that it is good if the function is simple. I
think the proposal JK makes could be implemented in a histogram
function that returns all of the frequencies of all the items in the
sequence.
<ul class="org-ul">
<li>… Histogram functions have a slightly different purpose.</li>
</ul></li>
</ul>

<p>
Accept this PR?
</p>

<p>
Accepted.
</p>
</div>
</div>
</div>

<div id="outline-container-any-other-business" class="outline-2">
<h2 id="any-other-business"><span class="section-number-2">3.</span> Any other business?</h2>
<div class="outline-text-2" id="text-any-other-business">
<p>
None heard.
</p>
</div>
</div>


<div id="outline-container-adjourned" class="outline-2">
<h2 id="adjourned"><span class="section-number-2">4.</span> Adjourned</h2>
<div class="outline-text-2" id="text-adjourned">
</div>
</div>
</div>
</body>
</html>