<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>QT4 CG Meeting 041 Minutes 2023-07-11</title>
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="/meeting/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="../../../css/style.css"/>
<link rel="shortcut icon" href="/img/QT4-64.png" />
<link rel="apple-touch-icon" sizes="64x64" href="/img/QT4-64.png" type="image/png" />
<link rel="apple-touch-icon" sizes="76x76" href="/img/QT4-76.png" type="image/png" />
<link rel="apple-touch-icon" sizes="120x120" href="/img/QT4-120.png" type="image/png" />
<link rel="apple-touch-icon" sizes="152x152" href="/img/QT4-152.png" type="image/png" />
</head>
<body>
<div id="content" class="content">
<h1 class="title">QT4 CG Meeting 041 Minutes 2023-07-11</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#minutes">Draft Minutes</a></li>
<li><a href="#new-actions">Summary of new and continuing actions <code>[0/5]</code></a></li>
<li><a href="#administrivia">1. Administrivia</a>
<ul>
<li><a href="#roll-call">1.1. Roll call <code>[11/11]</code></a></li>
<li><a href="#agenda">1.2. Accept the agenda</a>
<ul>
<li><a href="#so-far">1.2.1. Status so far…</a></li>
</ul>
</li>
<li><a href="#approve-minutes">1.3. Approve minutes of the previous meeting</a></li>
<li><a href="#next-meeting">1.4. Next meeting</a></li>
<li><a href="#open-actions">1.5. Review of open action items <code>[1/6]</code></a></li>
<li><a href="#open-pull-requests">1.6. Review of open pull requests and issues</a></li>
</ul>
</li>
<li><a href="#technical-agenda">2. Technical Agenda</a>
<ul>
<li><a href="#pr-533">2.1. PR #533: 413: Spec for CSV parsing with fn:parse-csv()</a></li>
</ul>
</li>
<li><a href="#any-other-business">3. Any other business?</a></li>
<li><a href="#adjourned">4. Adjourned</a></li>
</ul>
</div>
</div>
<p>
<a href="../">Agenda index</a> / <a href="https://qt4cg.org">QT4CG.org</a> / <a href="https://qt4cg.org/dashboard">Dashboard</a> / <a href="https://github.com/qt4cg/qtspecs/issues">GH Issues</a> / <a href="https://github.com/qt4cg/qtspecs/pulls">GH Pull Requests</a>
</p>

<div id="outline-container-minutes" class="outline-2">
<h2 id="minutes">Draft Minutes</h2>
<div class="outline-text-2" id="text-minutes">
</div>
</div>

<div id="outline-container-new-actions" class="outline-2">
<h2 id="new-actions">Summary of new and continuing actions <code>[0/5]</code></h2>
<div class="outline-text-2" id="text-new-actions">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-002-10: BTW to coordinate some ideas about improving diversity in the group</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-016-08: RD to clarify how namespace comparisons are performed.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-026-01: MK to write a summary paper that outlines the decisions we need to make on “value sequences”
<ul class="org-ul">
<li>This is related to PR #368: Issue 129 - Context item generalized to context value and
subsequent discussion.</li>
</ul></li>
<li class="off"><code>[&#xa0;]</code> QT4CG-029-07: NW to open the next discussion of #397 with a demo from DN
See PR <a href="https://qt4cg.org/dashboard/#pr-449">#449</a></li>
<li class="off"><code>[&#xa0;]</code> QT4CG-039-01: NW to schedule discussion of issue <a href="https://github.com/qt4cg/qtspecs/issues/52">#52</a>, <i>Allow record(*) based RecordTests</i></li>
</ul>
</div>
</div>

<div id="outline-container-administrivia" class="outline-2">
<h2 id="administrivia"><span class="section-number-2">1.</span> Administrivia</h2>
<div class="outline-text-2" id="text-administrivia">
</div>

<div id="outline-container-roll-call" class="outline-3">
<h3 id="roll-call"><span class="section-number-3">1.1.</span> Roll call <code>[11/11]</code></h3>
<div class="outline-text-3" id="text-roll-call">
<ul class="org-ul">
<li class="on"><code>[X]</code> Reece Dunn (RD)</li>
<li class="on"><code>[X]</code> Sasha Firsov (SF)</li>
<li class="on"><code>[X]</code> Christian Grün (CG)</li>
<li class="on"><code>[X]</code> Joel Kalvesmaki (JK) [0:05-]</li>
<li class="on"><code>[X]</code> Michael Kay (MK)</li>
<li class="on"><code>[X]</code> John Lumley (JL)</li>
<li class="on"><code>[X]</code> Dimitre Novatchev (DN)</li>
<li class="on"><code>[X]</code> Ed Porter (EP)</li>
<li class="on"><code>[X]</code> C. M. Sperberg-McQueen (MSM)</li>
<li class="on"><code>[X]</code> Norm Tovey-Walsh (NW). <i>Scribe</i>. <i>Chair</i>.</li>
<li class="on"><code>[X]</code> Matt Patterson (MP)</li>
</ul>
</div>
</div>

<div id="outline-container-agenda" class="outline-3">
<h3 id="agenda"><span class="section-number-3">1.2.</span> Accept the agenda</h3>
<div class="outline-text-3" id="text-agenda">
<p>
Proposal: Accept <a href="../../agenda/2023/07-11.html">the agenda</a>.
</p>

<p>
Accepted.
</p>
</div>

<div id="outline-container-so-far" class="outline-4">
<h4 id="so-far"><span class="section-number-4">1.2.1.</span> Status so far…</h4>
<div class="outline-text-4" id="text-so-far">

<div id="orgdc50d64" class="figure">
<p><img src="./issues-open-2023-07-11.png" alt="issues-open-2023-07-11.png" />
</p>
<p><span class="figure-number">Figure 1: </span>“Burn down” chart on open issues</p>
</div>


<div id="org36ffc00" class="figure">
<p><img src="./issues-by-spec-2023-07-11.png" alt="issues-by-spec-2023-07-11.png" />
</p>
<p><span class="figure-number">Figure 2: </span>Open issues by specification</p>
</div>


<div id="orgdd79db4" class="figure">
<p><img src="./issues-by-type-2023-07-11.png" alt="issues-by-type-2023-07-11.png" />
</p>
<p><span class="figure-number">Figure 3: </span>Open issues by type</p>
</div>
</div>
</div>
</div>

<div id="outline-container-approve-minutes" class="outline-3">
<h3 id="approve-minutes"><span class="section-number-3">1.3.</span> Approve minutes of the previous meeting</h3>
<div class="outline-text-3" id="text-approve-minutes">
<p>
Proposal: Accept <a href="../../minutes/2023/07-11.html">the minutes of the previous meeting</a>.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-next-meeting" class="outline-3">
<h3 id="next-meeting"><span class="section-number-3">1.4.</span> Next meeting</h3>
<div class="outline-text-3" id="text-next-meeting">
<p>
The next meeting <a href="../../agenda/2023/07-18.html">is scheduled for Tuesday, 18 July 2023</a>.
</p>

<p>
No regrets heard.
</p>

<p>
Reminder: the CG will take a vacation for four weeks in August. We
will not meet on 1, 8, 15, or 22 August.
</p>
</div>
</div>

<div id="outline-container-open-actions" class="outline-3">
<h3 id="open-actions"><span class="section-number-3">1.5.</span> Review of open action items <code>[1/6]</code></h3>
<div class="outline-text-3" id="text-open-actions">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-002-10: BTW to coordinate some ideas about improving diversity in the group</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-016-08: RD to clarify how namespace comparisons are performed.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-026-01: MK to write a summary paper that outlines the decisions we need to make on “value sequences”
<ul class="org-ul">
<li>This is related to PR #368: Issue 129 - Context item generalized to context value and
subsequent discussion.</li>
</ul></li>
<li class="on"><code>[X]</code> QT4CG-029-01: RD+DN to draft spec prose for the “divide and conquer” approach outlined in issue #399
<ul class="org-ul">
<li>Overtaken by events.</li>
</ul></li>
<li class="off"><code>[&#xa0;]</code> QT4CG-029-07: NW to open the next discussion of #397 with a demo from DN
See PR <a href="https://qt4cg.org/dashboard/#pr-449">#449</a></li>
<li class="off"><code>[&#xa0;]</code> QT4CG-039-01: NW to schedule discussion of issue <a href="https://github.com/qt4cg/qtspecs/issues/52">#52</a>, <i>Allow record(*) based RecordTests</i></li>
</ul>
</div>
</div>

<div id="outline-container-open-pull-requests" class="outline-3">
<h3 id="open-pull-requests"><span class="section-number-3">1.6.</span> Review of open pull requests and issues</h3>
<div class="outline-text-3" id="text-open-pull-requests">
<p>
The following editorial or otherwise minor PRs were open when this
agenda was prepared. The chair proposes that these can be merged
without discussion.
</p>

<ul class="org-ul">
<li>PR <a href="https://qt4cg.org/dashboard/#pr-597">#597</a> : Editorial fixes from #566 (fn:parse-uri)
<ul class="org-ul">
<li>Check for technical comments from CG</li>
</ul></li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-595">#595</a> : 588: (Editorial, XSLT) minor clarifications regarding xsl:sort</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-594">#594</a> : 592: (XSLT, Editorial) Add missing description of exponent-separator</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-593">#593</a> : 591: [XSLT, editorial] Add defaults to XSLT element syntax summaries</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-590">#590</a> : 343: make $collation uniformly optional</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-587">#587</a> : 365: Allow braces in switch and typeswitch expressions</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-586">#586</a> : 585: [Editorial] Rearrange text (and grammar) for dynamic function calls</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-584">#584</a> : Editorial: Correction to map:filter examples</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-578">#578</a> : fn:format-integer: $lang → $language</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-577">#577</a> : Editorial: improve generator for keyword tests</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-555">#555</a> : 464: Revised narrative of normalization steps for serialization</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-547">#547</a> : Action QT4CG-036-02: Further elaboration of the rules for function identity</li>
</ul>

<p>
After discussion, #598 removed.
</p>

<p>
Proposal: Accept these PRs.
</p>

<p>
Accepted.
</p>

<p>
It has been proposed that the following issues be <a href="https://github.com/qt4cg/qtspecs/labels/Propose%20Closing%20with%20No%20Action">closed without action</a>.
</p>

<ul class="org-ul">
<li>Issue <a href="https://github.com/qt4cg/qtspecs/issues/539">#539</a> FLOWR where clause with a "do when false" option</li>
</ul>

<p>
Proposal: Close these issues.
</p>

<p>
Accepted.
</p>
</div>
</div>
</div>

<div id="outline-container-technical-agenda" class="outline-2">
<h2 id="technical-agenda"><span class="section-number-2">2.</span> Technical Agenda</h2>
<div class="outline-text-2" id="text-technical-agenda">
</div>

<div id="outline-container-pr-533" class="outline-3">
<h3 id="pr-533"><span class="section-number-3">2.1.</span> PR #533: 413: Spec for CSV parsing with fn:parse-csv()</h3>
<div class="outline-text-3" id="text-pr-533">
<ul class="org-ul">
<li>See PR <a href="https://qt4cg.org/dashboard/#pr-533">#533</a></li>

<li>MP introduces the changes proposed with a slide deck
<ul class="org-ul">
<li>… (Walks through slide deck)</li>
</ul></li>
<li>RD: Why is there only a record for the top level?
<ul class="org-ul">
<li>MP: So it fits on a single slide; also I have questions about how
to define nested records. Also, I have some questions about where
record types are shared.</li>
</ul></li>
<li>MP continues…</li>
<li>MSM: Trim trims only leading and trailing whitespace, I assume?</li>
<li>MP: Yes.</li>
<li>MP continues…
<ul class="org-ul">
<li>… Extract column names from the first row: boolean or a map from
integer to string to specify headers for the columns.</li>
<li>… There’s an option to filter columns.</li>
<li>… You can specify that the number of columns can be fixed. They’re
padded or truncated.</li>
</ul></li>
<li>MSM: If I say nothing?</li>
<li>MP: Then you get what you get?</li>
<li>JL: Is there an argument for filter rows?</li>
<li>MP: There isn’t, and I haven’t thought of a use for it beyond
removing say the first “n” rows. You probably want to evaluate each
row programmatically. Columns are relatively fixed, unlike rows.</li>
<li>JL: I might just want to test on the first 25 or 40 rows. Some
mechanism that allowed me to truncate parsing might be handy.</li>
<li>MP: Yes, I think one of the reasons for using a sequence of rows is
that it’s easier to generate lazily. And we have a large number of
good tools for extracting “n” rows from a sequence.</li>
<li>DN: Whenever I see arguments for options, my question is always, is
this a mandatory argument? If it’s not, what are the defaults?</li>
<li>MP: The default is to extract column names from the first row, to
not filter columns, and not to restrict the number of columns.</li>
<li>MSM: I’d like a way to specify the default behaviors explicitly.</li>
<li>MP: I’m not sure I have the notation correct, but that’s what you’re
supposed to be able to do here.</li>
</ul>

<p>
Some discussion of the possible details around specifying defaults,
with enumerated values for example. Whether a keyword is necessary or
if an empty sequence suffices is something of an open question.
</p>

<ul class="org-ul">
<li>DN: I would like to see exactly these cases in examples in the spec.</li>
<li>MP: Yes, exactly.</li>
<li>MP continues…
<ul class="org-ul">
<li>You can supply column names reliably even if the data doesn’t
include them.</li>
</ul></li>
<li>JL: I think it’s important that if the boolean in <code>false</code>, the first
row becomes a header row. That needs to be explicit.</li>
<li>MP: Yes.</li>
<li>MP continues…
<ul class="org-ul">
<li><code>filter-columns</code> and <code>number-of-columns</code> …</li>
<li>MP discusses the example on the slide titled “Using <code>csv-to-xdm()’s</code> response”.</li>
<li>… I have questions about how best to deal with namespaces and cross references.</li>
</ul></li>
<li>JL: The rows are all siblings of each other, but their position
isn’t the same as the row position. Having a rows wrapper would make
it more straightforward.</li>
<li>MP: That makes sense.</li>
<li>EP: You can supply a boolean or a map. Can you override the headers?
So you want to specify “true” but also specify your own set.</li>
<li>MP: Yes. I’m not sure. I think there’s an argument that you can
handle that the same way you’d handle the not uncommon case where
there are several rows of header-like data. But maybe there needs to
be another option…</li>
<li>MSM: I like the idea of saying just apply tail to the sequence of
rows in that case.</li>
<li>EP: Yes, that would work. I was just pointing out that the way the
option is specified, you can’t do both.</li>
<li>MP continues with <code>csv-to-xml()</code>
<ul class="org-ul">
<li>In a namespace?</li>
<li>RD: I wonder if it should use the <code>fn:</code> namespace to be similar to
how analyze-string works.</li>
</ul></li>
</ul>

<p>
Some discussion of how this compares to JSON. Consensus: there’s a
clear precedent, use the `fn:` namespace.
</p>

<ul class="org-ul">
<li>MP: The last question is about how to map between fields and column
headers. Either you have id/ref pairs, or you can use the column.</li>
<li>JK: Why can’t we just rely on position?</li>
<li>MP: You could rely on positionality, but if you have a CSV with 50
or 60 columns and you want the ones with the “name” and the “amount”
then names are better than “columns 2 and 35”.</li>
<li>NW: My preference is the id/ref version.</li>
<li>MSM: I don’t understand why. My gut reaction is “what I’m used to
and what I’m happy with is to have the column names used as element
names.” That makes processing the result feel a lot more convenient.</li>
</ul>

<p>
Some discussion of whether or not column names are likely to contain
strings that don’t match cleanly to attribute or element names.
</p>

<ul class="org-ul">
<li>MP: The other argument is that if you have large, long column names
then you’re adding a lot more data into each row.</li>
<li>MSM: I think relying on position would make sense if people are
worried about data size. The added indirection of having to keep a
table and have a lookup the name from the ID doesn’t appeal to me.</li>
<li>MK: (in the chat window) I think the id/idref approach is an
unnecessary extra level of indirection.</li>
<li>MP: My goto would be to work with the XDM directly, so maybe my
opinion isn’t as relevant.</li>
<li>MK: I also think if you’re worried about space, the number of
attributes is probably more significant than the length of them.</li>
<li>MP continues with “~fn:parse-csv()~ output”
<ul class="org-ul">
<li>It handles quoting and delimiters. You can build anything you want
from that without having to reimplement the parsing constraints.</li>
</ul></li>
<li>JL: Isn’t there an argument that this one says gives you the header rows?</li>
<li>MP: Yes.</li>
<li>JL: Then the example could be clearer.</li>
<li>MP: Yes.</li>
<li>RD: Given that <code>fn:parse-csv</code> is now simple, would it make sense to
have the inverse, “serialize-csv”?</li>
<li>MP: Yes, I’m hoping to add that. My rough thinking is that you want
a function the generates the field values with quoting and the rows.
<ul class="org-ul">
<li>… The record on the “Input options” slide is what you’d had to these functions.</li>
<li>All the information you’d need to generate them is in there.</li>
</ul></li>
<li>MP continues with “ <code>fn:parse-csv</code> data input”
<ul class="org-ul">
<li>The problem with <code>unparsed-text-lines</code> is that it strips the line
endings. We can’t be sure there’s a 1:1 correspondence between a
row and a line in a file.</li>
</ul></li>
<li>CG: We have parse-json and json-doc, maybe it would be reasonable to
have parse-csv and csv-doc for that purpose?</li>
<li>MP: Yep.</li>
<li>MK: (in the chat window) Can't we just let the optimizer cope with
streaming the combination of <code>unparsed-text() =&gt; parse-csv()</code> ?</li>
<li>MK: Maybe. I don’t know.</li>
<li>MSM: I think I understand what MP is driving at, but I’m a little confused by some details.
<ul class="org-ul">
<li>If I’m understanding correctly, in the simple case, the lines of
the CSV file and the records in the records are 1:1, but that’s not always the case.</li>
</ul></li>
<li>MP: Yes.</li>
<li>MSM: And the case in which that’s not true is the case where there
may be multiple lines. It’s 1:n not m:1. Right?</li>
<li>MP: Yes.</li>
<li>MSM: So if we want <code>unparsed-text-lines()</code> to be usable this way, we
have to be able to specify that you can begin a multi-line quote in
one string and finish it later.</li>
</ul>

<p>
Some discussion of the problems associated with multi-line fields. If
the line ending is stripped away by the <code>uparsed-text-lines()</code>
function, then you’ll loose information. It might be important that
the embedded line ending was CR/LF and not just LF.
</p>

<ul class="org-ul">
<li>MSM: I’m willing to say that is a corner case that may arise and
when it does, you’ll want to parse it yourself.</li>
<li>MP: There’s a larger question of dealing with error handling.</li>
<li>JL: We know that <code>parse-csv()</code> is doing something internally that is like <code>unparsed-text-lines()</code>.
So you don’t gain anything by using <code>unparsed-text-lines()</code>.</li>
<li>MSM: I’m guessing about what the JSON parsing functions do.</li>
<li>RD: It would be useful to add these corner cases as tests in the test suite.</li>
</ul>
</div>
</div>
</div>



<div id="outline-container-any-other-business" class="outline-2">
<h2 id="any-other-business"><span class="section-number-2">3.</span> Any other business?</h2>
<div class="outline-text-2" id="text-any-other-business">
<p>
None heard.
</p>
</div>
</div>


<div id="outline-container-adjourned" class="outline-2">
<h2 id="adjourned"><span class="section-number-2">4.</span> Adjourned</h2>
<div class="outline-text-2" id="text-adjourned">
</div>
</div>
</div>
</body>
</html>