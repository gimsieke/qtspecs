<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>QT4 CG Meeting 057 Minutes 2023-12-05</title>
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="/meeting/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="../../../css/style.css"/>
<link rel="shortcut icon" href="/img/QT4-64.png" />
<link rel="apple-touch-icon" sizes="64x64" href="/img/QT4-64.png" type="image/png" />
<link rel="apple-touch-icon" sizes="76x76" href="/img/QT4-76.png" type="image/png" />
<link rel="apple-touch-icon" sizes="120x120" href="/img/QT4-120.png" type="image/png" />
<link rel="apple-touch-icon" sizes="152x152" href="/img/QT4-152.png" type="image/png" />
</head>
<body>
<div id="content" class="content">
<h1 class="title">QT4 CG Meeting 057 Minutes 2023-12-05</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#minutes">Draft Minutes</a></li>
<li><a href="#new-actions">Summary of new and continuing actions <code>[0/8]</code></a></li>
<li><a href="#administrivia">1. Administrivia</a>
<ul>
<li><a href="#roll-call">1.1. Roll call <code>[11/11]</code></a></li>
<li><a href="#agenda">1.2. Accept the agenda</a>
<ul>
<li><a href="#so-far">1.2.1. Status so far…</a></li>
</ul>
</li>
<li><a href="#approve-minutes">1.3. Approve minutes of the previous meeting</a></li>
<li><a href="#next-meeting">1.4. Next meeting</a></li>
<li><a href="#open-actions">1.5. Review of open action items <code>[4/9]</code></a></li>
<li><a href="#open-pull-requests">1.6. Review of open pull requests and issues</a>
<ul>
<li><a href="#merge-without-discussion">1.6.1. Merge without discussion</a></li>
<li><a href="#substantive">1.6.2. Substantive PRs</a></li>
<li><a href="#proposed-40">1.6.3. Proposed for V4.0</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#technical-agenda">2. Technical Agenda</a>
<ul>
<li><a href="#h-E01573AE-CAC0-43ED-94F6-05094B3AB8A1">2.1. PR #855: 844 New sequence functions: names</a></li>
<li><a href="#h-FF4B88D7-D575-41AE-A6EE-8AB73B7FB618">2.2. PR #849: 847 Allow uri-structure-record keys to have empty sequence values</a></li>
<li><a href="#h-1A7F9ACF-9EC6-4C8E-A13F-FDFD6545C2B5">2.3. PR #832: 77 Add map:deep-update and array:deep-update</a></li>
<li><a href="#h-5CBFFA21-18EA-4136-BBF6-06E60CF0ADF5">2.4. PR #798: 479: fn:deep-equal: Input order</a></li>
<li><a href="#h-81B61E64-8200-4AC1-AACB-7FC685775CAF">2.5. Issue #829: fn:boolean: EBV support for more item types</a></li>
</ul>
</li>
<li><a href="#any-other-business">3. Any other business?</a></li>
<li><a href="#adjourned">4. Adjourned</a></li>
</ul>
</div>
</div>
<p>
<a href="../">Agenda index</a> / <a href="https://qt4cg.org">QT4CG.org</a> / <a href="https://qt4cg.org/dashboard">Dashboard</a> / <a href="https://github.com/qt4cg/qtspecs/issues">GH Issues</a> / <a href="https://github.com/qt4cg/qtspecs/pulls">GH Pull Requests</a>
</p>

<div id="outline-container-minutes" class="outline-2">
<h2 id="minutes">Draft Minutes</h2>
<div class="outline-text-2" id="text-minutes">
</div>
</div>

<div id="outline-container-new-actions" class="outline-2">
<h2 id="new-actions">Summary of new and continuing actions <code>[0/8]</code></h2>
<div class="outline-text-2" id="text-new-actions">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-052-02: NW to consider how to schedule an “editor’s meeting”</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-052-05: MK to rename the <code>hexBinary-equal</code> function to <code>binary-equal</code>?</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-052-06: MK to consider the editorial question of “promotion” for the symmetric relations.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-055-01: MK to clarify that the return type of the deep lookup operator is a flat sequence.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-056-04: MK to write a proposal for adding a select attribute to xsl:text</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-057-01: CG to make a PR for changing items to subsequence in some functions.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-057-02: CG to make the list of options in deep-equal alphabetical again</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-057-03: CG to attempt to clarify that the unordered option in deep-equal only applies to the top-level sequence</li>
</ul>
</div>
</div>

<div id="outline-container-administrivia" class="outline-2">
<h2 id="administrivia"><span class="section-number-2">1.</span> Administrivia</h2>
<div class="outline-text-2" id="text-administrivia">
</div>

<div id="outline-container-roll-call" class="outline-3">
<h3 id="roll-call"><span class="section-number-3">1.1.</span> Roll call <code>[11/11]</code></h3>
<div class="outline-text-3" id="text-roll-call">
<ul class="org-ul">
<li class="on"><code>[X]</code> Reece Dunn (RD)</li>
<li class="on"><code>[X]</code> Sasha Firsov (SF)</li>
<li class="on"><code>[X]</code> Christian Grün (CG)</li>
<li class="on"><code>[X]</code> Joel Kalvesmaki (JK) [:10-]</li>
<li class="on"><code>[X]</code> Michael Kay (MK)</li>
<li class="on"><code>[X]</code> John Lumley (JL)</li>
<li class="on"><code>[X]</code> Dimitre Novatchev (DN)</li>
<li class="on"><code>[X]</code> Wendell Piez (WP)</li>
<li class="on"><code>[X]</code> Ed Porter (EP)</li>
<li class="on"><code>[X]</code> C. M. Sperberg-McQueen (MSM)</li>
<li class="on"><code>[X]</code> Norm Tovey-Walsh (NW). <i>Scribe</i>. <i>Chair</i>.</li>
</ul>
</div>
</div>

<div id="outline-container-agenda" class="outline-3">
<h3 id="agenda"><span class="section-number-3">1.2.</span> Accept the agenda</h3>
<div class="outline-text-3" id="text-agenda">
<p>
Proposal: Accept <a href="../../agenda/2023/12-05.html">the agenda</a>.
</p>

<p>
Accepted.
</p>
</div>

<div id="outline-container-so-far" class="outline-4">
<h4 id="so-far"><span class="section-number-4">1.2.1.</span> Status so far…</h4>
<div class="outline-text-4" id="text-so-far">

<div id="orgffd6e32" class="figure">
<p><img src="./issues-open-2023-12-05.png" alt="issues-open-2023-12-05.png" />
</p>
<p><span class="figure-number">Figure 1: </span>“Burn down” chart on open issues</p>
</div>


<div id="orgc0b2bd3" class="figure">
<p><img src="./issues-by-spec-2023-12-05.png" alt="issues-by-spec-2023-12-05.png" />
</p>
<p><span class="figure-number">Figure 2: </span>Open issues by specification</p>
</div>


<div id="orgc5d149a" class="figure">
<p><img src="./issues-by-type-2023-12-05.png" alt="issues-by-type-2023-12-05.png" />
</p>
<p><span class="figure-number">Figure 3: </span>Open issues by type</p>
</div>
</div>
</div>
</div>

<div id="outline-container-approve-minutes" class="outline-3">
<h3 id="approve-minutes"><span class="section-number-3">1.3.</span> Approve minutes of the previous meeting</h3>
<div class="outline-text-3" id="text-approve-minutes">
<p>
Proposal: Accept <a href="../../minutes/2023/11-28.html">the minutes of the previous meeting</a>.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-next-meeting" class="outline-3">
<h3 id="next-meeting"><span class="section-number-3">1.4.</span> Next meeting</h3>
<div class="outline-text-3" id="text-next-meeting">
<p>
The next meeting <a href="../../agenda/2023/12-12.html">is scheduled for Tuesday, 12 December 2023</a>.
</p>

<p>
Any regrets for the next meeting?
</p>

<p>
None heard.
</p>
</div>
</div>

<div id="outline-container-open-actions" class="outline-3">
<h3 id="open-actions"><span class="section-number-3">1.5.</span> Review of open action items <code>[4/9]</code></h3>
<div class="outline-text-3" id="text-open-actions">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-052-02: NW to consider how to schedule an “editor’s meeting”</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-052-05: MK to rename the <code>hexBinary-equal</code> function to <code>binary-equal</code>?</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-052-06: MK to consider the editorial question of “promotion” for the symmetric relations.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-055-01: MK to clarify that the return type of the deep lookup operator is a flat sequence.</li>
<li class="on"><code>[X]</code> QT4CG-055-02: DN to open an issue requesting examples of implausible expressions to clarify the spec</li>
<li class="on"><code>[X]</code> QT4CG-056-01: MK to update PR #479 so that it merges cleanly.</li>
<li class="on"><code>[X]</code> QT4CG-056-02: MK to update PR #412 so that it merges cleanly.</li>
<li class="on"><code>[X]</code> QT4CG-056-03: MK to draft a PR to remove the function-namespaces feature.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-056-04: MK to write a proposal for adding a select attribute to xsl:text</li>
</ul>
</div>
</div>

<div id="outline-container-open-pull-requests" class="outline-3">
<h3 id="open-pull-requests"><span class="section-number-3">1.6.</span> Review of open pull requests and issues</h3>
<div class="outline-text-3" id="text-open-pull-requests">
</div>

<div id="outline-container-merge-without-discussion" class="outline-4">
<h4 id="merge-without-discussion"><span class="section-number-4">1.6.1.</span> Merge without discussion</h4>
<div class="outline-text-4" id="text-merge-without-discussion">
<p>
The following PRs are editorial, small, or otherwise appeared to be
uncontroversial when the agenda was prepared. The chairs propose that
these can be merged without discussion. If you think discussion is
necessary, please say so.
</p>

<ul class="org-ul">
<li>PR <a href="https://qt4cg.org/dashboard/#pr-863">#863</a>: 742 Drop xsl:function-library declaration</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-851">#851</a>: 822: XQuery, XQFO: Edits (pool)</li>
</ul>

<p>
Proposal: accept without discussion?
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-substantive" class="outline-4">
<h4 id="substantive"><span class="section-number-4">1.6.2.</span> Substantive PRs</h4>
<div class="outline-text-4" id="text-substantive">
<p>
The following substantive PRs were open when this agenda was prepared.
</p>

<ul class="org-ul">
<li>PR <a href="https://qt4cg.org/dashboard/#pr-855">#855</a>: 844 New sequence functions: names</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-849">#849</a>: 847 Allow uri-structure-record keys to have empty sequence values</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-832">#832</a>: 77 Add map:deep-update and array:deep-update</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-798">#798</a>: 479: fn:deep-equal: Input order</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-795">#795</a>: 655: fn:sort-with</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-737">#737</a>: 295: Boost the capability of recursive record types</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-529">#529</a>: 528: revision of json(), and renaming to elements-to-maps()</li>
</ul>
</div>
</div>

<div id="outline-container-proposed-40" class="outline-4">
<h4 id="proposed-40"><span class="section-number-4">1.6.3.</span> Proposed for V4.0</h4>
<div class="outline-text-4" id="text-proposed-40">
<p>
The following issues are labled “proposed for V4.0”.
</p>

<ul class="org-ul">
<li>Issue <a href="https://github.com/qt4cg/qtspecs/issues/850">#850</a>: fn:parse-html: Finalization</li>
<li>Issue <a href="https://github.com/qt4cg/qtspecs/issues/829">#829</a>: fn:boolean: EBV support for more item types</li>
<li>Issue <a href="https://github.com/qt4cg/qtspecs/issues/716">#716</a>: Generators in XPath</li>
<li>Issue <a href="https://github.com/qt4cg/qtspecs/issues/689">#689</a>: fn:stack-trace: keep or drop?</li>
<li>Issue <a href="https://github.com/qt4cg/qtspecs/issues/583">#583</a>: array:replace(), etc</li>
<li>Issue <a href="https://github.com/qt4cg/qtspecs/issues/557">#557</a>: fn:unparsed-binary: accessing and manipulating binary types</li>
<li>Issue <a href="https://github.com/qt4cg/qtspecs/issues/340">#340</a>: fn:format-number: Specifying decimal format</li>
<li>Issue <a href="https://github.com/qt4cg/qtspecs/issues/260">#260</a>: array:index-of</li>
<li>Issue <a href="https://github.com/qt4cg/qtspecs/issues/33">#33</a>: json parsing number type option</li>
<li>Issue <a href="https://github.com/qt4cg/qtspecs/issues/31">#31</a>: Extend FLWOR expressions to maps</li>
</ul>
</div>
</div>
</div>
</div>

<div id="outline-container-technical-agenda" class="outline-2">
<h2 id="technical-agenda"><span class="section-number-2">2.</span> Technical Agenda</h2>
<div class="outline-text-2" id="text-technical-agenda">
</div>

<div id="outline-container-h-E01573AE-CAC0-43ED-94F6-05094B3AB8A1" class="outline-3">
<h3 id="h-E01573AE-CAC0-43ED-94F6-05094B3AB8A1"><span class="section-number-3">2.1.</span> PR #855: 844 New sequence functions: names</h3>
<div class="outline-text-3" id="text-h-E01573AE-CAC0-43ED-94F6-05094B3AB8A1">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-855">#855</a>.
</p>

<p>
CG walks us through the issue and the PR.
</p>

<ul class="org-ul">
<li>CG: <code>…with-sequence</code> becomes <code>…-with-subsequence</code></li>
<li>CG: Discussion of <code>items-after</code>, <code>items-before</code>, <code>items-starting-where</code>, and <code>items-ending-where</code>
<ul class="org-ul">
<li>… Using “subsequence” here would make the names even longer</li>
<li>… One suggestion was a single function that has more arguments</li>
<li>… Other languages have imperative sounding functions “take-while” and “drop-while”…</li>
<li>… “Items” functions might be more expected for folks from the functional background</li>
<li>… Some functions use verbs in the names.</li>
<li>… Trying to avoid very long names.</li>
</ul></li>
<li>DN: I think this is a useful issue, but it just scratches the surface.
<ul class="org-ul">
<li>… It’s telling us about the symptom, not the cause of the problem.</li>
<li>… When we have to talk about items, members, pairs, etc. And
sometimes we need to have functions in the fn, array, and map namespaces.</li>
<li>… I think MK made a useful suggestion about having more general
types of objects.</li>
<li>… I think if we have one general, abstract type of collection then
we could have all of these functions in different namespaces
replaced by a single function.</li>
</ul></li>
<li>CG: I think that’s a good observation; in #843, I’ve listed all of
the function duplication we already have. And we have new functions
that we have to discuss if we need multiple equivalent versions of them.</li>
<li>JL: What’s the argument for leaving off the inclusion version; is it
just the name, or is it that there’s no use case.</li>
<li>CG: Those are two points: one solution is that we could take the two
functions that allow you to drop the first or last value.
<ul class="org-ul">
<li>… Or in many cases you can do it with just a couple of existing functions.</li>
<li>… Some of the functions will be more common than others; you can
always find arguments for all four, but are people really going to
be aware of them all?</li>
<li>… Many of these use cases can be written with other existing functions.</li>
</ul></li>
<li>JL: Then in the notes, I think it would be good to show some of
these use cases in the examples.</li>
<li>RD: There are really two challenges in creating common sequence,
array, and map functions. One is that an array or map is a single
item sequence. So doing a count on that object will return 1,
whereas array:size and map:size will return the number of elements.
<ul class="org-ul">
<li>… We can’t change that behavior.</li>
<li>… The other challenge is that the different functions have
slightly different semantics. If you try to get a an item in an
index of an array that doesn’t exist, it’ll throw an exception.
But sequences just return an empty sequence. So you’ve got those
semantic differences.</li>
</ul></li>
<li>CG: Yes, it would definitely be easier if we could start over!</li>
<li>MK: I agree with everything RD said. Procedurally, do we focus on
the big issues per DN, or do we take a small step as CG is
proposing.
<ul class="org-ul">
<li>… In terms of the detail of the PR, I sympathise with goals. But
if we’re going to cut down from four to two, we’ve picked the
wrong two!</li>
<li>… We also have index-where that you can use to construct what you
want.</li>
<li>… One could argue that the family of four functions is excessive. But I’d keep
<code>subsequence-before</code> and <code>subsequence-starting-where</code>.</li>
</ul></li>
<li>CG: What about <code>subsequence-where</code>?</li>
<li>MK: I think it makes simple cases more difficult.</li>
<li>JK: Subsequence-where doesn’t imply that they’re contiguous.</li>
<li>CG: Yes, that’s true.</li>
<li>MK: One could do it all by adding keywoard arguments to the existing
subsequence function.</li>
<li>CG: We could have <code>subsequence-from</code> and <code>subsequence-before</code></li>
<li>DN: I want to second what MK said. I think we’re making things more
complex. That’s not good for users. In order to cure the symptoms,
we’re making things more complicated.</li>
<li>CG: The root cause is a really complex problem.</li>
<li>DN: We should work on the root cause. I don’t think we’ve made the necessary effort yet.</li>
<li>NW: Can we do it the other way around? Make complete parity across the namespaces?</li>
<li>MK: It doesn’t work. There are semantic differences between arrays,
maps, and sequences.</li>
<li>NW: :-(</li>
<li>SF: I hear the arguments that we can’t do it because of major incompatibilities.
<ul class="org-ul">
<li>… But we could solve this problem by having functions in a new namespace.</li>
<li>… If you want a particular semantics, you could point to at a
specific namespace. That would eliminate the constraints on
changing logic and versions.</li>
</ul></li>
<li>NW: More namespaces is better! It’s an interesting approach.</li>
<li>RD: With this proposal, we’ve changed items to subsequence. That’s
uncontroversial and we should do it. The other change, combining the
functions is more controversial. We could separate the two.
<ul class="org-ul">
<li>… Maybe we could investigate further and continue the analysis that CG has done.</li>
</ul></li>
<li>CG: I think we can drop <code>subsequence-where</code>.
<ul class="org-ul">
<li>Rename items to subsequence</li>
<li>How to rename the existing four functions and maybe deal with take-while and drop-while</li>
</ul></li>
<li>MSM: For the record, I hate replacing a two syllable word with a
three syllable one but I don’t see a better alternative.</li>
</ul>

<p>
ACTION: CG to make a PR for changing items to subsequence in some functions.
</p>
</div>
</div>

<div id="outline-container-h-FF4B88D7-D575-41AE-A6EE-8AB73B7FB618" class="outline-3">
<h3 id="h-FF4B88D7-D575-41AE-A6EE-8AB73B7FB618"><span class="section-number-3">2.2.</span> PR #849: 847 Allow uri-structure-record keys to have empty sequence values</h3>
<div class="outline-text-3" id="text-h-FF4B88D7-D575-41AE-A6EE-8AB73B7FB618">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-849">#849</a>.
</p>

<p>
NW introduces the question: what’s the goup’s opinion, should we allow
empty sequences in the <code>uri-structure-record</code>?
</p>

<ul class="org-ul">
<li>MK: I’m in favor of making the fields optional.</li>
<li>RD: +1</li>
<li>NW: Okay, I’ll get this one tidied up for next week.</li>
</ul>
</div>
</div>

<div id="outline-container-h-1A7F9ACF-9EC6-4C8E-A13F-FDFD6545C2B5" class="outline-3">
<h3 id="h-1A7F9ACF-9EC6-4C8E-A13F-FDFD6545C2B5"><span class="section-number-3">2.3.</span> PR #832: 77 Add map:deep-update and array:deep-update</h3>
<div class="outline-text-3" id="text-h-1A7F9ACF-9EC6-4C8E-A13F-FDFD6545C2B5">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-832">#832</a>.
</p>

<p>
Not ready for discussion.
</p>
</div>
</div>

<div id="outline-container-h-5CBFFA21-18EA-4136-BBF6-06E60CF0ADF5" class="outline-3">
<h3 id="h-5CBFFA21-18EA-4136-BBF6-06E60CF0ADF5"><span class="section-number-3">2.4.</span> PR #798: 479: fn:deep-equal: Input order</h3>
<div class="outline-text-3" id="text-h-5CBFFA21-18EA-4136-BBF6-06E60CF0ADF5">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-798">#798</a>.
</p>

<p>
CG walks us through the PR.
</p>

<ul class="org-ul">
<li>CG: The idea is simple, in XQuery 3.1 there were no options on
<code>fn:deep-equal</code>. In 4.0, we have a lot of options.
<ul class="org-ul">
<li>… I propose a more general option <code>ordered</code> or <code>unordered</code> that
simply allows you to enforce order or to allow permutations.</li>
<li>… If you include this option, then you can use all the other
options as well.</li>
</ul></li>
<li>MK: Did you say it was easy to implement?</li>
<li>CG: Yes!</li>
<li>MK: Congratulations!</li>
</ul>

<p>
Some discussion of how performance is impacted by an implementation.
</p>

<ul class="org-ul">
<li>MK: An implementation with quadratic performance isn’t difficult!</li>
<li>MK: I have a slight concern that we’re bundling too much into one
function, but in principle it makes sense.</li>
<li>DN: Maybe I don’t understand. If <code>unordered=true</code> means that any
sequence can be unordered (even element children), I think it’s very
confusing. If a schema says the children can be any order, but
another element says they have a particular order, would be gross
violation of the schema.</li>
<li>CG shows an example with lists of atomic values.</li>
<li>DN: I think it makes sense for atomic values.</li>
<li>MK: My reading is that it only applies at the top level.</li>
<li>DN: Then that needs to be made very clear! It needs to be emphasized.</li>
</ul>

<p>
Some discussion of how to improve the prose.
</p>

<ul class="org-ul">
<li>MK: Perhaps it could be clarified in the description in the table.</li>
<li>JL: I understand the mechanism for elements and their children. Is
there any requirement for unordered comparisons further down?</li>
<li>NW: Sometimes you just have to write your own function!</li>
<li>RD: I was wondering if it could be useful in the element case for a
test assertion of some sort, but if this is only at the top level…
If you had unordered elements specified but unordered set to false,
then that would work equivalently if the unordered elements were the
same at the top level.</li>
<li>MK: No, this is always the children.</li>
</ul>

<p>
Some further discussion of this use case. 
</p>

<ul class="org-ul">
<li>JL: Is there any argument for a wildcard on unordered elements?</li>
<li>CG: Not sure. It has been discussed.</li>
</ul>

<p>
Proposal: Accept this PR?
</p>

<p>
Acccepted.
</p>

<p>
ACTION: CG to make the list of options in deep-equal alphabetical again
</p>

<p>
ACTION: CG to attempt to clarify that the unordered option in deep-equal only applies to the top-level sequence
</p>
</div>
</div>

<div id="outline-container-h-81B61E64-8200-4AC1-AACB-7FC685775CAF" class="outline-3">
<h3 id="h-81B61E64-8200-4AC1-AACB-7FC685775CAF"><span class="section-number-3">2.5.</span> Issue #829: fn:boolean: EBV support for more item types</h3>
<div class="outline-text-3" id="text-h-81B61E64-8200-4AC1-AACB-7FC685775CAF">
<p>
Issue <a href="https://github.com/qt4cg/qtspecs/issues/829">#829</a>.
</p>

<ul class="org-ul">
<li>CG: We have EBV for a number of conditionals. It comes form XPath
1.0 and has the semantics from there.
<ul class="org-ul">
<li>… I think it would be useful to apply this to more types. Today
you get an error for maps and arrays. We could also consider the
binary types.</li>
<li>… We could just return <code>true</code> if an item exists, or we could look
into it. So an empty array could be either <code>true</code> or <code>false</code>.</li>
<li>… Then you wouldn’t have to write <code>array:size() != 0</code></li>
</ul></li>
<li>MK: I think the big problem is that doing it the obvious way (empty
maps and arrays are true) is different from Javascript.</li>
<li>JK: But it’s the same as Python</li>
<li>CG: Are there languages where it’s an error?</li>
</ul>

<p>
Java, for example, and other strongly typed languages.
</p>

<ul class="org-ul">
<li>DN: We have more than one way to do this already? Don’t we have
<code>exists</code> and <code>empty</code> in the array and map namespaces?
<ul class="org-ul">
<li>… I don’t see the needs for this. We already have ways to do this.</li>
</ul></li>
<li>CG: My experience is based on some user feedback. Users unfamiliar
with XPath 1.0 just don’t understand why it’s sometimes an error.</li>
<li>JK: Am I right in thinking that EBV is mostly frequently supported
in predicate filters in XPath expresions?</li>
<li>MK: Yes, that’s probably right.</li>
<li>JK: So what does <code>array(*)</code> mean in that case?</li>
</ul>

<p>
Some discussion of the use case. Something like <code>[$a]</code> where <code>$a</code> is
an array.
</p>

<ul class="org-ul">
<li>RD: Here’s an example:</li>
</ul>

<div class="org-src-container">
<pre class="src src-XPath">let $a := array {}
return if ($a) then 1 else 2
</pre>
</div>

<ul class="org-ul">
<li>CG: It would be nice if it didn’t give an exception.</li>
<li>MK: Most advice is to be explicit.</li>
<li>CG: But it’s very convenient that so much of XPath is concise!</li>
<li>DN: I am not saying I support this, but looking at the table for
computing booleans, it’s very complicated.
<ul class="org-ul">
<li>… It should be made easier. Getting the size of a big array just
to see if it exists is very inefficient.</li>
</ul></li>
<li>MK: But that’s an easy optimization.</li>
<li>CG: If you have EBV for sequences, you need the same check.</li>
</ul>

<p>
Who is in favor of extending EBV to cover more types.
</p>

<p>
In favor 4, opposed 3.5.
</p>

<ul class="org-ul">
<li>NW: There’s no consensus yet. We’ll just leave that issue for now.</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-any-other-business" class="outline-2">
<h2 id="any-other-business"><span class="section-number-2">3.</span> Any other business?</h2>
<div class="outline-text-2" id="text-any-other-business">
<ul class="org-ul">
<li>DN: I did my action item.</li>
<li>NW: Thank you, DN.</li>
</ul>
</div>
</div>

<div id="outline-container-adjourned" class="outline-2">
<h2 id="adjourned"><span class="section-number-2">4.</span> Adjourned</h2>
<div class="outline-text-2" id="text-adjourned">
</div>
</div>
</div>
</body>
</html>