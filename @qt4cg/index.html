<!DOCTYPE HTML><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta charset="UTF-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1"><link rel="stylesheet" href="/css/status.css"><title>@qt4cg statuses</title></head><body><main><article><h1>@qt4cg statuses</h1><p>This page displays recent status
            updates
            about the QT4CG project.</p><p>The are also captured in <a href="status.rss">an RSS feed</a>.</p><p>By year: <a href="2024/">2024</a>, <a href="2023/">2023</a>, <a href="2022/">2022</a>, <a href="2021/">2021</a>, <a href="2020/">2020</a></p><div class="toots">
<div class="toot" id="created-1178"><h2>Pull request #1178 created<span class="toot-id"> #created-1178</span></h2><div class="pubdate">28 Apr at 22:51:26 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1178">https://github.com/qt4cg/qtspecs/pull/1178</a></div><details><summary>1146 Add inline change markup in the XPath/XQuery spec</summary><div class="markup"><p>There is more work to be done to ensure the change log entries are complete, but this is a good start.</p>
</div></details></div>
<div class="toot" id="closed-1159"><h2>Issue #1159 closed<span class="toot-id"> #closed-1159</span></h2><div class="pubdate">27 Apr at 20:40:02 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1159">https://github.com/qt4cg/qtspecs/issues/1159</a></div><p>Filter operator for arrays</p></div>
<div class="toot" id="created-1177"><h2>Pull request #1177 created<span class="toot-id"> #created-1177</span></h2><div class="pubdate">27 Apr at 20:36:07 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1177">https://github.com/qt4cg/qtspecs/pull/1177</a></div><details><summary>1162 Positional variables are xs:integer not xs:positiveInteger</summary><div class="markup"><p>Reverts a change that made the type xs:positiveInteger as the impact of the change was not fully explored, and the same change was not made elsewhere e.g. to the argument type of array:get() or the return type of fn:position().</p>
<p>Note: the use of xs:positiveInteger has been retained for row and column numbers in the CSV functions, and for codepoints in the fn:char() function.</p>
</div></details></div>
<div class="toot" id="created-1176"><h2>Issue #1176 created<span class="toot-id"> #created-1176</span></h2><div class="pubdate">26 Apr at 03:15:45 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1176">https://github.com/qt4cg/qtspecs/issues/1176</a></div><details><summary>Use fn:parse-uri to check whether a filepath is relative or absolute</summary><div class="markup"><p>I have a question about the new function <code>fn:parse-uri()</code>. A common use case is to check whether a file path is absolute or relative. For example, I want to check whether the file path <code>images/img1.png</code> is relative and can therefore be converted to an absolute file path using <code>resolve-uri()</code>. Or I want to check whether <code>$base</code> is absolute and can therefore be used as the second argument in <code>resolve-uri()</code>.</p>
<p>How would I use a <code>uri-structure-record</code> map determined as a result of<code> fn:parse-uri ()</code> to decide whether it is a relative or absolute file path?<br>
Greetings, Frank</p>
</div></details></div>
<div class="toot" id="created-1175"><h2>Issue #1175 created<span class="toot-id"> #created-1175</span></h2><div class="pubdate">25 Apr at 18:18:44 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1175">https://github.com/qt4cg/qtspecs/issues/1175</a></div><details><summary>XPath: Optional parameters in the definition of an inline function</summary><div class="markup"><p>This is a proposal to extend the definition of an inline-function item with the ability to specify a set of optional/keyword-value parameters, following the sequence of positional parameters of the function.</p>
<p>This is very similar to what we already have for static function definitions: https://qt4cg.org/specifications/xquery-40/xpath-40.html#dt-function-definition and https://qt4cg.org/specifications/xquery-40/xpath-40.html#id-static-functions</p>
<p>While a <strong>static function definition</strong> has the following parts:</p>
<ul>
<li>
<p>The function name, which is an <a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#dt-expanded-qname">expanded QName</a>.</p>
</li>
<li>
<p>A (possibly empty) list of required parameters, each having:</p>
</li>
<li>
<p>a parameter name (an <a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#dt-expanded-qname">expanded QName</a>)</p>
</li>
<li>
<p>a required type (a <a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#dt-sequence-type">sequence type</a>)</p>
</li>
<li>
<p>A (possibly empty) list of optional parameters, each having:</p>
</li>
<li>
<p>a parameter name (an <a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#dt-expanded-qname">expanded QName</a>)</p>
</li>
<li>
<p>a required type (a <a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#dt-sequence-type">sequence type</a>)</p>
</li>
<li>
<p>a default value expression (an expression: see <a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#id-expressions">4 Expressions</a>)</p>
</li>
<li>
<p>A return type (a <a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#dt-sequence-type">sequence type</a>)</p>
</li>
<li>
<p>A (possibly empty) set of function annotations</p>
</li>
<li>
<p>A body. The function body contains the logic that enables the function result to be computed from the supplied arguments and information in the static and dynamic context.</p>
</li>
</ul>
<p>For an <strong>inline function definition</strong> we will have:</p>
<ul>
<li>
<p>A name of a variable to contain the function item being defined.</p>
</li>
<li>
<p>A (possibly empty) list of required parameters, each having:</p>
</li>
<li>
<p>a parameter name (an <a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#dt-expanded-qname">expanded QName</a>)</p>
</li>
<li>
<p>an optional type (a <a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#dt-sequence-type">sequence type</a>)</p>
</li>
<li>
<p>A (possibly empty) list of optional parameters, each having:</p>
</li>
<li>
<p>a parameter name (an <a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#dt-expanded-qname">expanded QName</a>)</p>
</li>
<li>
<p>an optional type (a <a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#dt-sequence-type">sequence type</a>)</p>
</li>
<li>
<p>a default value expression (an expression: see <a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#id-expressions">4 Expressions</a>)</p>
</li>
<li>
<p>An optional return type (a <a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#dt-sequence-type">sequence type</a>)</p>
</li>
<li>
<p>A body. The function body contains the logic that enables the function result to be computed from the supplied arguments and information in the static and dynamic context.</p>
</li>
</ul>
<p><strong>What is accomplished by introducing optional parameters</strong>?</p>
<p>The answer is the same as for the effect of having optional parameters in a static function definition: increased <strong><em>brevity</em></strong>, <strong><em>conciseness</em></strong> and <strong><em>clarity</em></strong> .</p>
<pre><code class="language-xq">let $myFun := fn($pos1, $pos2, $posK, $kw1 := expr1, $kw2 := expr2, ...,  $kwN := exprN) { (: Some expression :)} 
</code></pre>
<p>replaces what would otherwise be a set of <code>N! + 1</code> separate inline function definitions, each of which must be assigned to a separate variable.</p>
<p>Similarly to the static function calls, with this new feature a call to such an inline function must provide values for all positional arguments, followed by an optional set (meaning in any order) of assignments of values to specific keyword-valued (optional) arguments. The rules for an inline function call are similar to those for a call to a static function - the provided values for the positional arguments must precede all other provided values and the values for the optional arguments may be provided in any order.</p>
<p>Here is a short example of an inline function definition and calling it:</p>
<pre><code class="language-xq">let $incr := fn($arg1, $increment := 1) {$arg1 + $increment }
 return
  (
   $incr(5),
   $incr(5, increment := 2),
   $incr(5, increment := 3)
 )
</code></pre>
<p>produces:</p>
<p><code>6, 7, 8</code></p>
</div></details></div>
<div class="toot" id="created-1174"><h2>Pull request #1174 created<span class="toot-id"> #created-1174</span></h2><div class="pubdate">24 Apr at 12:45:48 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1174">https://github.com/qt4cg/qtspecs/pull/1174</a></div><details><summary>1173 array:build, map:build: Positional access</summary><div class="markup"><p>Issue: #1173</p>
</div></details></div>
<div class="toot" id="closed-1110"><h2>Issue #1110 closed<span class="toot-id"> #closed-1110</span></h2><div class="pubdate">24 Apr at 12:40:10 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1110">https://github.com/qt4cg/qtspecs/issues/1110</a></div><p>New error codes</p></div>
<div class="toot" id="created-1173"><h2>Issue #1173 created<span class="toot-id"> #created-1173</span></h2><div class="pubdate">24 Apr at 10:13:38 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1173">https://github.com/qt4cg/qtspecs/issues/1173</a></div><details><summary>array:build, map:build: Positional access</summary><div class="markup"><p><code>array:build</code> seems to be the only function (for iterating over ordered input) for which the HOF parameters lacks a positional parameter:</p>
<pre><code class="language-xquery">array:build(
  $input   as item()*,	
  $action  as function(item()) as item()*  := fn:identity#1
) as array(*)

(: should be :)
array:build(
  $input   as item()*,	
  $action  as function(item(), xs:integer) as item()*  := fn:identity#1
) as array(*)
</code></pre>
</div></details></div>
<div class="toot" id="created-1172"><h2>Issue #1172 created<span class="toot-id"> #created-1172</span></h2><div class="pubdate">24 Apr at 10:08:33 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1172">https://github.com/qt4cg/qtspecs/issues/1172</a></div><details><summary>Iterating maps: Positional access</summary><div class="markup"><p>With the new filter expression for maps, the context position is available. To be consistent, if we want to provide positional access for unordered data, we should…</p>
<ul>
<li>either provide this for map functions  as well (<code>map:filter</code>, <code>map:for-each</code>), or</li>
<li>don’t provide it for map predicates at all.</li>
</ul>
</div></details></div>
<div class="toot" id="created-1171"><h2>Issue #1171 created<span class="toot-id"> #created-1171</span></h2><div class="pubdate">24 Apr at 10:02:05 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1171">https://github.com/qt4cg/qtspecs/issues/1171</a></div><details><summary>Predicates returning xs:boolean vs. xs:boolean?</summary><div class="markup"><p>In <a href="https://qt4cg.org/specifications/xquery-40/xquery-40.html#id-filter-maps-and-arrays">4.13.4  Filter Expressions for Maps and Arrays</a>, the type of the predicate expression <code>FILTER</code> is <code>xs:boolean?</code>.</p>
<p>To be consistent, we should either relax the types of the predicate/filter functions (for <code>fn:filter</code>, etc.) or stick with <code>xs:boolean</code>.</p>
</div></details></div>
<div class="toot" id="created-1170"><h2>Issue #1170 created<span class="toot-id"> #created-1170</span></h2><div class="pubdate">24 Apr at 07:31:05 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1170">https://github.com/qt4cg/qtspecs/issues/1170</a></div><details><summary>Editorial: fn:index-where; parentheses; …</summary><div class="markup"><h4>1. fn:index-where, array:index-where</h4>
<blockquote>
<p>Returns the position in an input ...</p>
</blockquote>
<p>→ positions</p>
<h4>2. Redundant parens in function signatures</h4>
<pre><code>as (function(xs:anyAtomicType, item()*) as xs:boolean)
...
</code></pre>
</div></details></div>
<div class="toot" id="created-1169"><h2>Issue #1169 created<span class="toot-id"> #created-1169</span></h2><div class="pubdate">24 Apr at 06:35:25 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1169">https://github.com/qt4cg/qtspecs/issues/1169</a></div><details><summary>Maps &amp; Arrays: Consistency &amp; Terminology</summary><div class="markup"><p>After the introduction of #1094 and #1159, and before adding more map/array operations, I think it’s time to get more serious about consistency and terminology. The current drafts employ a variety of terms that are not clearly defined, or separated from each other. We now have at least…</p>
<blockquote>
<p>items, members, pairs, keys, values, entries</p>
</blockquote>
<p>…which are sometimes used for maps, for arrays, or for both data structures. A first attempt to clean up, with reducing the overall effort:</p>
<ol>
<li>
<p>A minor one: The modifier for lookups should be in singular form, analagous to node axes: <code>item</code>, <code>key</code>, <code>value</code>, <code>pair</code>.</p>
</li>
<li>
<p>While I first advocated the orthogonality principle for axes in lookup expressions, I now think we should stick to the existing terminology. Otherwise, we would need to revise many other existing parts of the spec. My suggestion would be to:</p>
</li>
</ol>
<ul>
<li>introduce <code>member</code> for arrays</li>
<li>only allow <code>key</code>, <code>value</code> and <code>pair</code> for maps</li>
<li>allow <code>items</code> for both maps and arrays</li>
</ul>
<p>This would make it symmetric with a) the current terminology for maps and arrays, and b) enhanced <code>for</code> clauses, i.e. <code>for member $m</code> and <code>for key $k value $v</code>.</p>
<p>The reverse approach would be to drop <code>for member $m</code> and to also allow <code>for key $k value $v</code> for arrays (with <code>for value</code> replacing <code>for member</code>). In addition, we could have <code>for pair</code>.</p>
<ol start="3">
<li>
<p>With the introduction of the <code>item</code> axis, <code>map:values</code> and <code>arrays:values</code> should be renamed to <code>map:items</code> and <code>array:items</code>.</p>
</li>
<li>
<p>I would suggest dropping <code>array:members</code> and <code>array:of-members</code>. The names don’t imply we’ll deal with records, and it’s not in line with <code>for member $m</code> either. If we want to keep these functions, we could rename them to <code>array:pairs</code> and <code>array:of-pairs</code> and add the integer positions as keys, and we should introduce and consistently use the term <code>pair</code> for maps and arrays.</p>
</li>
</ol>
<p>Closely related: #826</p>
</div></details></div>
<div class="toot" id="closed-1125"><h2>Issue #1125 closed<span class="toot-id"> #closed-1125</span></h2><div class="pubdate">23 Apr at 22:48:05 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1125">https://github.com/qt4cg/qtspecs/pull/1125</a></div><p>1094 Enhanced lookup expressions</p></div>
<div class="toot" id="closed-1094"><h2>Issue #1094 closed<span class="toot-id"> #closed-1094</span></h2><div class="pubdate">23 Apr at 22:48:05 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1094">https://github.com/qt4cg/qtspecs/issues/1094</a></div><p>Axis steps in lookup expressions</p></div>
<div class="toot" id="minutes-04-23"><h2>QT4 CG meeting 074 draft minutes<span class="toot-id"> #minutes-04-23</span></h2><div class="pubdate">23 Apr at 17:10:00 GMT</div><div class="link">Link: <a href="https://qt4cg.org/meeting/minutes/2024/04-23">https://qt4cg.org/meeting/minutes/2024/04-23</a></div><p>Draft minutes published.</p></div>
<div class="toot" id="closed-1135"><h2>Issue #1135 closed<span class="toot-id"> #closed-1135</span></h2><div class="pubdate">23 Apr at 16:04:39 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1135">https://github.com/qt4cg/qtspecs/issues/1135</a></div><p>Definition of focus functions</p></div>
<div class="toot" id="closed-1157"><h2>Issue #1157 closed<span class="toot-id"> #closed-1157</span></h2><div class="pubdate">23 Apr at 16:04:38 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1157">https://github.com/qt4cg/qtspecs/pull/1157</a></div><p>1135 Correction to definition of focus functions</p></div>
<div class="toot" id="closed-1163"><h2>Issue #1163 closed<span class="toot-id"> #closed-1163</span></h2><div class="pubdate">23 Apr at 16:01:24 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1163">https://github.com/qt4cg/qtspecs/pull/1163</a></div><p>1159 Add filter expressions for maps and arrays</p></div>
<div class="toot" id="closed-235"><h2>Issue #235 closed<span class="toot-id"> #closed-235</span></h2><div class="pubdate">23 Apr at 15:59:37 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/235">https://github.com/qt4cg/qtspecs/issues/235</a></div><p>Add multiple=true() option to fn:parse-json and fn:json-doc</p></div>
<div class="toot" id="closed-1155"><h2>Issue #1155 closed<span class="toot-id"> #closed-1155</span></h2><div class="pubdate">23 Apr at 15:59:11 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1155">https://github.com/qt4cg/qtspecs/issues/1155</a></div><p>Glossary formatting</p></div>
<div class="toot" id="closed-1164"><h2>Issue #1164 closed<span class="toot-id"> #closed-1164</span></h2><div class="pubdate">23 Apr at 15:59:09 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1164">https://github.com/qt4cg/qtspecs/pull/1164</a></div><p>1155 Consistency of glossaries</p></div>
<div class="toot" id="created-1168"><h2>Pull request #1168 created<span class="toot-id"> #created-1168</span></h2><div class="pubdate">22 Apr at 23:15:14 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1168">https://github.com/qt4cg/qtspecs/pull/1168</a></div><details><summary>1166 Clarify rule on invalid option keys</summary><div class="markup"><p>An error is raised for an option key unless (a) it is listed in the specification, or (b) it is recognized by the implementation, or (c) it is a QName with a non-absent namespace.</p>
<p>Also clarified the rule about accepting an array in place of a sequence (I'm not sure whether this is something that we actually do, and certainly it doesn't happen unless the parameter explicitly allows an array.)</p>
<p>Fix #1166</p>
</div></details></div>
<div class="toot" id="created-1167"><h2>Issue #1167 created<span class="toot-id"> #created-1167</span></h2><div class="pubdate">22 Apr at 17:08:18 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1167">https://github.com/qt4cg/qtspecs/issues/1167</a></div><details><summary>Merge $collation into $options parameter of fn:deep-equal()</summary><div class="markup"><p>To avoid the ugly third parameter to deep-equal which will almost always be set to (), merge $collation into the $options parameter, whose type becomes <code>(map(*) | xs:string)?</code> for backwards compatibility.</p>
<p>The same idea is being applied to unparsed-text and can probably be done elsewhere.</p>
</div></details></div>
<div class="toot" id="created-1166"><h2>Issue #1166 created<span class="toot-id"> #created-1166</span></h2><div class="pubdate">22 Apr at 14:42:50 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1166">https://github.com/qt4cg/qtspecs/issues/1166</a></div><details><summary>Invalid option keys: the rule is unclear</summary><div class="markup"><p>PR #1059 introduced the rule:</p>
<blockquote>
<p>If an option is not described in the specification, if it is not supported by the implementation and if its name is in no namespace, a type error [err:FORG0013] must be raised.</p>
</blockquote>
<p>and this has proved its worth in finding quite a few errors in the test suite!</p>
<p>However, it's not entirely clear what it means.</p>
<p>Entries in the options map can have keys of any type. I suspect this rule is intended to apply to (a) keys of type xs:string, and (b) strings of type xs:QName where the namespace URI is absent.</p>
<p>Alternatively, perhaps it should apply to ALL option keys other than a QName in a non-null namespace?</p>
</div></details></div>
<div class="toot" id="agenda-04-23"><h2>QT4 CG meeting 074 draft agenda<span class="toot-id"> #agenda-04-23</span></h2><div class="pubdate">22 Apr at 13:45:00 GMT</div><div class="link">Link: <a href="https://qt4cg.org/meeting/agenda/2024/04-23">https://qt4cg.org/meeting/agenda/2024/04-23</a></div><p>Draft agenda published.</p></div>
<div class="toot" id="created-1165"><h2>Issue #1165 created<span class="toot-id"> #created-1165</span></h2><div class="pubdate">22 Apr at 11:06:27 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1165">https://github.com/qt4cg/qtspecs/issues/1165</a></div><details><summary>[Editorial] References to numeric codepoints in prose: consistency</summary><div class="markup"><p>A quick glance in F+O finds:</p>
<pre><code> \n (newline, x0A)
π (x3C0)
the glyph ≂̸ which is expressed using the two codepoints #x2242 #x0338
A format token of &amp;#x661; (Arabic-Indic digit one)
the format token &amp;#x2460; (circled digit one, ①)
the actual Unicode character COMBINING DIARESIS (Unicode codepoint U+0308) or &amp;#x0308;
The Latin small letter dotless i (ı, U+0131, used in Turkish)
the Unicode replacement character (U+FFFD)
CRLF (U+000D, U+000A), LF (U+000A), or CR (U+000D)
comma "," (U+002C)
the Unicode quotation mark " (U+0022)
a single newline (U+000A) character
</code></pre>
<p>I feel we could do better...</p>
</div></details></div>
<div class="toot" id="closed-700"><h2>Issue #700 closed<span class="toot-id"> #closed-700</span></h2><div class="pubdate">21 Apr at 22:47:51 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/700">https://github.com/qt4cg/qtspecs/issues/700</a></div><p>Operators for array mapping and filtering</p></div>
<div class="toot" id="created-1164"><h2>Pull request #1164 created<span class="toot-id"> #created-1164</span></h2><div class="pubdate">21 Apr at 22:16:54 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1164">https://github.com/qt4cg/qtspecs/pull/1164</a></div><details><summary>1155 Consistency of glossaries</summary><div class="markup"><p>Use a common style for all glossaries.</p>
<p>Add a glossary to F+O.</p>
<p>Fix #1155</p>
</div></details></div>
<div class="toot" id="created-1163"><h2>Pull request #1163 created<span class="toot-id"> #created-1163</span></h2><div class="pubdate">19 Apr at 20:39:09 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1163">https://github.com/qt4cg/qtspecs/pull/1163</a></div><p>1159 Add filter expressions for maps and arrays</p></div>
<div class="toot" id="created-1162"><h2>Issue #1162 created<span class="toot-id"> #created-1162</span></h2><div class="pubdate">18 Apr at 10:19:44 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1162">https://github.com/qt4cg/qtspecs/issues/1162</a></div><details><summary>Revert strict type for positional variables (xs:integer → xs:positiveInteger)</summary><div class="markup"><p>I feel that the decision to change <code>xs:integer</code> to <code>xs:positiveInteger</code> was a bit hasty (https://github.com/qt4cg/qtspecs/pull/1131#issuecomment-2051379262):</p>
<p>To be consistent, numerous other expressions and functions would need to be rewritten as well to use stricter types (arbitrary examples: the <code>count</code> clause; <code>$err:line-number</code> in the catch clause; the result type of <code>fn:string-to-codepoints</code>; positions in <code>array:get</code>, <code>fn:parse-integer</code>, etc.; the position parameter in HOF functions, and so on and on). We haven’t done so yet, and I seriously wonder what exactly we would win from the stricter types. In many cases, it would be reasonable to also define a strict upper limit, which is not possible with our types anyway.</p>
<p>Implementations may build heavily on the fact that <code>xs:integer</code> has been the default type for integer values in previous versions of the languages. For example, we use cached instances for the most small integer values, or we rewrite constructs with <code>xs:integer</code> to other constructs accepting the same type.</p>
<p>For all these challenges, as always, technical solutions exist, but the question is if there aren’t more interesting things to focus on than on such corner cases. Queries like <code>count(1 to 1000000000000)</code> are not supported by all implementations either although they may appear trivial to the ordinary user (by coincidence, it’s supported by BaseX, but I doubt it has been used a lot).</p>
<p>In short, I would like us to revert the change in https://github.com/qt4cg/qtspecs/pull/1131/commits/bba6e4f1067e0ef0779688622a58320a5298d440 and stick with <code>xs:integer</code>. If people feel bad about it, I would suggest discussing strict types in a much broader and general way.</p>
</div></details></div></div><p>See 2297
            more statuses in yearly archives.</p></article></main></body></html>