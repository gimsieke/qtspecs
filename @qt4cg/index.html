<!DOCTYPE HTML><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta charset="UTF-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1"><link rel="stylesheet" href="/css/status.css"><title>@qt4cg statuses</title></head><body><main><article><h1>@qt4cg statuses</h1><p>This page displays recent status
            updates
            about the QT4CG project.</p><p>The are also captured in <a href="status.rss">an RSS feed</a>.</p><p>By year: <a href="2023/">2023</a>, <a href="2022/">2022</a>, <a href="2021/">2021</a>, <a href="2020/">2020</a></p><div class="toots">
<div class="toot" id="closed-129"><h2>Issue #129 closed<span class="toot-id"> #closed-129</span></h2><div class="pubdate">19 Sep at 16:26:13 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/129">https://github.com/qt4cg/qtspecs/issues/129</a></div><p>Context item → Context value?</p></div>
<div class="toot" id="closed-703"><h2>Issue #703 closed<span class="toot-id"> #closed-703</span></h2><div class="pubdate">19 Sep at 16:26:11 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/703">https://github.com/qt4cg/qtspecs/pull/703</a></div><p>129 (1): XPath and XQuery changes for introduction of context value</p></div>
<div class="toot" id="closed-701"><h2>Issue #701 closed<span class="toot-id"> #closed-701</span></h2><div class="pubdate">19 Sep at 16:26:00 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/701">https://github.com/qt4cg/qtspecs/issues/701</a></div><p>fn:concat: Support for 0 or more arguments</p></div>
<div class="toot" id="closed-702"><h2>Issue #702 closed<span class="toot-id"> #closed-702</span></h2><div class="pubdate">19 Sep at 16:25:59 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/702">https://github.com/qt4cg/qtspecs/pull/702</a></div><p>701: fn:concat: Support for 0 or more arguments</p></div>
<div class="toot" id="closed-696"><h2>Issue #696 closed<span class="toot-id"> #closed-696</span></h2><div class="pubdate">19 Sep at 16:25:42 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/696">https://github.com/qt4cg/qtspecs/pull/696</a></div><p>566: Rework query parameters on build-uri/parse-uri</p></div>
<div class="toot" id="closed-694"><h2>Issue #694 closed<span class="toot-id"> #closed-694</span></h2><div class="pubdate">19 Sep at 16:23:58 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/694">https://github.com/qt4cg/qtspecs/pull/694</a></div><p>XQFO minor edits, with new examples and notes, 2 through 4.6</p></div>
<div class="toot" id="closed-687"><h2>Issue #687 closed<span class="toot-id"> #closed-687</span></h2><div class="pubdate">19 Sep at 16:23:42 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/687">https://github.com/qt4cg/qtspecs/issues/687</a></div><p>Constructor functions for user-defined types</p></div>
<div class="toot" id="closed-690"><h2>Issue #690 closed<span class="toot-id"> #closed-690</span></h2><div class="pubdate">19 Sep at 16:23:41 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/690">https://github.com/qt4cg/qtspecs/pull/690</a></div><p>687 Clarify constructor functions for user-defined types</p></div>
<div class="toot" id="closed-668"><h2>Issue #668 closed<span class="toot-id"> #closed-668</span></h2><div class="pubdate">19 Sep at 16:23:30 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/668">https://github.com/qt4cg/qtspecs/issues/668</a></div><p>Definition of HTML case-insensitive collation</p></div>
<div class="toot" id="closed-680"><h2>Issue #680 closed<span class="toot-id"> #closed-680</span></h2><div class="pubdate">19 Sep at 16:23:29 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/680">https://github.com/qt4cg/qtspecs/pull/680</a></div><p>668 define case insensitive collation normatively</p></div>
<div class="toot" id="created-713"><h2>Issue #713 created<span class="toot-id"> #created-713</span></h2><div class="pubdate">19 Sep at 16:22:04 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/713">https://github.com/qt4cg/qtspecs/issues/713</a></div><details><summary>Annotations: Editorial notes</summary><div class="markup"><p>Copied from https://github.com/qt4cg/qtspecs/pull/710#pullrequestreview-1630129066:</p>
<blockquote>
<p>For avoidance of doubt, we should say in XQuery 4.6.2.4 (Named Function References) that the function created by a named function reference has its annotations taken from the function definition. There are other places where we are not explicit about the annotations of a function item, for example with partial function application. We should add a note that in XPath and XSLT, it is not possible to define function annotations, so this function will always return an empty result. (However, we should consider giving user-defined functions in XSLT annotations based on their attributes, e.g. visibility and streamability).</p>
</blockquote>
<p>…and my complementary note in the PR thread:</p>
<blockquote>
<p>I decided to merge the PR without changes, and not add the reference to XPath and XSLT, because the function may also return results for XQuery functions imported via fn:load-xquery-module.</p>
</blockquote>
<p>Additional notes from today’s meeting:</p>
<ul>
<li>For annotations without values, we could assign <code>true()</code> as a default value.</li>
<li>Examples could be added to <code>fn:function-annotations</code> to demonstrate how to check for annotations without values (or with values whose EBV is <code>false()</code>: <code>0</code>, <code>""</code>, etc.).</li>
<li>Dimitre suggested restructuring the spec for features that are not available in XPath.</li>
<li>Maybe annotations would also be helpful in XPath.</li>
</ul>
<p>Feel free everyone to add more comments.</p>
</div></details></div>
<div class="toot" id="closed-36"><h2>Issue #36 closed<span class="toot-id"> #closed-36</span></h2><div class="pubdate">19 Sep at 16:12:54 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/36">https://github.com/qt4cg/qtspecs/issues/36</a></div><p>fn:function-annotations (Allow support for user-defined annotations)</p></div>
<div class="toot" id="closed-710"><h2>Issue #710 closed<span class="toot-id"> #closed-710</span></h2><div class="pubdate">19 Sep at 16:12:51 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/710">https://github.com/qt4cg/qtspecs/pull/710</a></div><p>36: fn:function-annotations</p></div>
<div class="toot" id="created-712"><h2>Issue #712 created<span class="toot-id"> #created-712</span></h2><div class="pubdate">19 Sep at 13:50:37 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/712">https://github.com/qt4cg/qtspecs/issues/712</a></div><details><summary>array:sort: to be aligned with fn:sort</summary><div class="markup"><p>Related: #623. And an editorial note:</p>
<p>https://qt4cg.org/specifications/xpath-functions-40/Overview.html#func-sort</p>
<p>I think the type for the 3rd argument of <code>fn:sort</code>…</p>
<pre><code>$key  as&nbsp;(function(item()) as xs:anyAtomicType*)+  :=&nbsp;fn:data#1
</code></pre>
<p>…should be changed to zero-or-more:</p>
<pre><code>$key  as&nbsp;(function(item()) as xs:anyAtomicType*)*  :=&nbsp;fn:data#1
</code></pre>
<p>While it will be rare to encounter queries with <code>key := ()</code>, there seems to be no urgent reason to enforce at least one sort key. The change would also be in alignment with the corresponding rule (with the current signature, <code>$key</code> cannot be empty), which says:</p>
<blockquote>
<p>The number of sort key definitions is determined by the number of function items supplied in the <code>$key</code> argument. If the argument is absent or empty, the default is a single sort key definition using the function <code>data#1</code>.</p>
</blockquote>
</div></details></div>
<div class="toot" id="created-711"><h2>Issue #711 created<span class="toot-id"> #created-711</span></h2><div class="pubdate">19 Sep at 09:22:59 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/711">https://github.com/qt4cg/qtspecs/issues/711</a></div><details><summary>Using annotations for navigation of JSON trees</summary><div class="markup"><p>This issue develops ideas presented in issue #596, which itself is a continuation of ideas raised in issue #341, issue #350, and elsewhere. It's related to the requirements presented in issue #262 and issue #297.</p>
<p>Firstly, I propose a change to the data model so that annotations can be attached to any item [or perhaps any value?], not only to a function. The annotations are a map of type <code>map{xs:QName, item()*}</code>. Some general principles:</p>
<ul>
<li>Annotations on an item do not affect the result of any operation on that item unless otherwise specified.</li>
<li>Operations that are described as returning a result that contains items that are present in one of the operation's operands retain the annotations of those items, unless otherwise specified. (So for example $a[C] returns a sequence of items from $a in which the annotations are preserved).</li>
<li>Operations that construct "new" items (for example $a + $b) return an item with no annotations, unless otherwise specified.</li>
<li>The function <code>annotations($x)</code> (replacing <code>function-annotations($x)</code>) returns the annotations of an item.</li>
<li>The function annotate($x, key, value) returns a "clone" of $x with an additional annotation. (A clone of an item differs from the original only in having different annotations. All operations other than annotation-sensitive operations produce exactly the same result on the clone and the original - including tests for node identity.)</li>
<li>To avoid confusion, the term "type annotation" is replaced by "type label".</li>
</ul>
<p>Secondly, we use annotations to aid navigation of JTrees (a term I use to describe trees of arrays and maps such as might be produced by parsing JSON).</p>
<p>We introduce a component of the static context <code>tracked=true|false</code>, defaulting to false. The construct <code>tracked{expression}</code> evaluates an expression and its subexpressions in tracked mode. In tracked mode any operator or function that performs selection within an array or map (for example the lookup operator, the <code>map:get</code> and <code>array:get</code> function, using the map/array as a function item, or the <code>array:head()</code> and <code>array:foot()</code> and <code>map:find()</code> functions) annotates the items in its result with two properties: "container" whose value is the map or array from which the item was selected, and "key" which is the key or array index of the selected value within that container. The effect is that if an item was found in a JTree using a tracked expression, the annotations on the resulting item can be used in effect to navigate upwards within the tree that was searched.</p>
<p>Note that this is not a new idea: in effect, the result of a tracked selection is a <strong>zipper</strong> data structure, as described in https://en.wikipedia.org/wiki/Zipper_(data_structure).</p>
<p>A further exploitation of the idea allows us to introduce deep update of JTree structures. For example, <code>modify(root:=$a, selection:=fn{?x?y?z,} change:=fn{.+1})</code> can evaluate the <code>selection</code> argument in tracked mode, apply the <code>change</code> function to the resulting items, and then navigate back using the <code>container</code> annotation to create modified versions of all traversed containing JTrees, eventually returning a modified version of the <code>root</code> tree.</p>
</div></details></div>
<div class="toot" id="agenda-09-19"><h2>QT4 CG meeting 046 draft agenda<span class="toot-id"> #agenda-09-19</span></h2><div class="pubdate">18 Sep at 14:00:00 GMT</div><div class="link">Link: <a href="https://qt4cg.org/meeting/agenda/2023/09-19">https://qt4cg.org/meeting/agenda/2023/09-19</a></div><p>Draft agenda published.</p></div>
<div class="toot" id="closed-673"><h2>Issue #673 closed<span class="toot-id"> #closed-673</span></h2><div class="pubdate">18 Sep at 13:49:45 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/673">https://github.com/qt4cg/qtspecs/pull/673</a></div><p>HTML namespace changes</p></div>
<div class="toot" id="created-710"><h2>Pull request #710 created<span class="toot-id"> #created-710</span></h2><div class="pubdate">17 Sep at 21:08:48 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/710">https://github.com/qt4cg/qtspecs/pull/710</a></div><details><summary>36: fn:function-annotations</summary><div class="markup"><p>@michaelhkay Again, some hints might need to be added for XPath (?).</p>
</div></details></div>
<div class="toot" id="created-709"><h2>Issue #709 created<span class="toot-id"> #created-709</span></h2><div class="pubdate">17 Sep at 18:24:36 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/709">https://github.com/qt4cg/qtspecs/issues/709</a></div><details><summary>(Un)Checked Evaluation</summary><div class="markup"><p>Based on https://github.com/qt4cg/qtspecs/issues/707#issuecomment-1721596055 and the comments following in that thread:</p>
<blockquote>
<p>I've been thinking recently about adding <code>checked{}</code> and <code>unchecked{}</code> modes. For example</p>
<p>&lt;xsl:apply-templates select="checked{.//item}"/&gt;</p>
<p>would throw an error if there are no items. The mode of execution would propagate downwards, so <code>checked{a/b/c/d}</code> would be able to tell you that a <code>b</code> was found, but it had no <code>c</code> children.</p>
<p><code>checked{item[22]}</code> would have the effect of making sequences behave more like arrays, with bound checking; conversely <code>unchecked{item?22}</code> would return an empty sequence instead of throwing an error.</p>
</blockquote>
</div></details></div>
<div class="toot" id="created-708"><h2>Issue #708 created<span class="toot-id"> #created-708</span></h2><div class="pubdate">17 Sep at 08:56:39 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/708">https://github.com/qt4cg/qtspecs/issues/708</a></div><details><summary>Toward a design for generators</summary><div class="markup"><h2>Motivation</h2>
<p>The motivations for this are to explore the creation of sequences where the next item in the sequence is determined by evaluating a function on the current state of a system. These sequence generators have an initial starting value and state. They can also stop when some condition is met.</p>
<p>The motivating example here is the <a href="https://qt4cg.org/specifications/xpath-functions-40/Overview.html#func-random-number-generator">fn:random-number-generator</a> function, where:</p>
<ol>
<li><code>let $rnd := fn:random-number-generator()</code> initializes a new random number sequence with the default seed as its state;</li>
<li><code>let $value := $rnd?number</code> returns the current value of the sequence;</li>
<li><code>let $rnd := $rnd?next()</code> returns the state and value of the next item in the sequence.</li>
</ol>
<p>This has all the properties needed for a forward (left-to-right) generating sequence. To make it a generalized generator sequence, the <code>number</code> field should be renamed <code>value</code>.</p>
<p>NOTE: The <code>fn:random-number-generator</code> function defines an infinite sequence as it has no termination/end of sequence condition.</p>
<h2>Sequence Generators as Record Types</h2>
<p>Therefore, a forward generator sequence could look like this:</p>
<pre><code>declare item-type sequence-generator as record(
    value as item(),
    next as function() as record(value, next, *)?,
    *
);

declare function generated-sequence() as sequence-generator?;
</code></pre>
<p>If calling <code>?next()</code> on a sequence above returns the empty sequence then there are no more values in that sequence.</p>
<p>If the <code>generated-sequence()</code> returns the empty sequence then there are no items in the sequence.</p>
<p>NOTE: This does not currently define reversible sequence support. A <code>reversed</code> property could be provided that returns a <code>sequence-generator</code> that operates on the sequence from right to left. I haven't figured out exactly how this should look, but reversed generator sequences may be better investigated as a separate issue.</p>
<p>NOTE: An implementation can process this sequence iteratively if needed.</p>
<h3>Analysis</h3>
<p>While this allows generator sequence types to be created, they are -- like <code>fn:random-number-generator()</code> cumbersome to use. This does have the advantage of being backward compatible with <code>fn:random-number-generator()</code>, though.</p>
<p>The problem comes when trying to make these work like sequences. The subtype and function coercion rules should be doable. The other sequence operations like filtering are more complicated to define properly.</p>
<p>However, this has the same issues that allowing <code>array()</code> in <code>fn:*</code> functions has -- how do you differentiate the use cases where the user is working on a sequence of generators, or the generated sequences?</p>
<blockquote>
<p>NOTE: You can't extend the functions to take a <code>(sequence-type | item()*)</code> parameter as a <code>sequence-type</code> is a subtype of <code>item()</code> which matches <code>item()*</code>. If the functions were to be extended to handle these, then <code>fn:head(fn:random-number-generator())</code> would return a number instead of a map.</p>
</blockquote>
<h2>Sequence Generator Function</h2>
<p>The Kotlin language has a <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.sequences/generate-sequence.html">generateSequence</a> function that takes a next function, an optional seed value or construction function, and returns a lazy sequence over that. -- Internally, it is building a Java iterator that produces values from calling the next function. The sequence will terminate when the next value is null.</p>
<p>I propose that -- in addition to the <code>sequence-generator</code> type above -- XPath defines the following function:</p>
<pre><code>declare function fn:sequence($generator as sequence-generator) as item()*;
</code></pre>
<p>This solves the issues in the <em>Analysis</em> section above, and is analogous to <code>array:values</code>. It is implementation defined how the sequence is constructed. -- This allows an implementer to appropriately map the generator to their internal sequence implementation in order to provide lazy evaluation and other operations.</p>
<p>There should also be the following helper function for random numbers:</p>
<pre><code>declare function fn:random-numbers(
    $seed as xs:anyAtomicType? := ()
) as xs:double* {
    fn:random-number-generator() =&gt; fn:sequence()
};
</code></pre>
<p>The user-defined sequences then become e.g.:</p>
<pre><code>let $generator as sequence-generator := map {
    value : 1,
    next : function () { () }
}
return fn:sequence($generator)
</code></pre>
</div></details></div>
<div class="toot" id="closed-299"><h2>Issue #299 closed<span class="toot-id"> #closed-299</span></h2><div class="pubdate">17 Sep at 00:02:16 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/299">https://github.com/qt4cg/qtspecs/issues/299</a></div><p>Short-circuiting functions, function-arity guards and lazy hints</p></div>
<div class="toot" id="created-707"><h2>Issue #707 created<span class="toot-id"> #created-707</span></h2><div class="pubdate">15 Sep at 16:59:47 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/707">https://github.com/qt4cg/qtspecs/issues/707</a></div><details><summary>Dynamic Function Calls: Processing Empty Sequences</summary><div class="markup"><p>A fundamental – and brilliant – property of XPath is that many operations tolerate empty sequences: Instead of throwing an error, the empty result is passed on unchanged to the next operation. While this is unrewardingly confusing for binary operations (<code>() + 1</code>, <code>() eq 5</code>), it’s wonderful for pipelines:</p>
<pre><code class="language-xquery">(: paths :)
$nodes / a / b / c
(: lookups :)
$data ? 1 ? 2 ? 3
(: simple map operators :)
$data ! do(.) ! something(.)
(: arrow operator works differently, but the syntax is similar:  :)
$data =&gt; do() =&gt; something()
</code></pre>
<p>As far as I can judge, it would be a very simple and user-friendly addition if we extended dynamic function calls to return an empty sequence (instead of raising an error) if the base expression is an empty sequence. This way, the following expressions would all run through:</p>
<pre><code class="language-xquery">let $map := map { 'giovanni': map { 'city': 'roma' } }
return $map('andrea')('city'),
let $data := ()
return $data(1)(2)(3),
()(123),
()()
</code></pre>
<p>Many people use parentheses instead of the lookup operator for accessing maps &amp; arrays, and the proposed change would make the syntax more interchangeable. I believe it would also be useful for function items in general.</p>
</div></details></div>
<div class="toot" id="created-706"><h2>Issue #706 created<span class="toot-id"> #created-706</span></h2><div class="pubdate">15 Sep at 14:45:33 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/706">https://github.com/qt4cg/qtspecs/issues/706</a></div><details><summary>FLWOR: for member $m1 in $a1, member $m2 in $a2</summary><div class="markup"><p>Currently, the <code>member</code> keyword must always be placed directly after the <code>for</code> clause:</p>
<pre><code class="language-xquery">(: valid :)
for $a in 1 to 10
for $m member $m in $array

(: invalid :)
for $a in 1 to 10, member $m in $array
</code></pre>
<p>In addition, the keyword applies to all other bindings in the same <code>for</code> clause:</p>
<pre><code class="language-xquery">for member $m1 in $array1, $m2 in $array2
</code></pre>
<p>My feeling is that this syntax is a bit odd, as other keywords (<code>allowing empty</code>, <code>at</code>) only refer to the currently bound variable. Next, the <code>member</code> syntax would differ from the semantics of XQuery Full Text: The <code>score</code> keyword is placed before the variable name, and can be used more than once (or omitted):</p>
<pre><code class="language-xquery">let score $s1 := $data1, score $s2 := $data2
</code></pre>
<p>I think we should change this. It would also simplify the grammar:</p>
<pre><code>InitialClause     ::=  ForClause | LetClause | WindowClause
ForClause         ::=  "for" ForBinding ("," ForBinding)*
ForBinding        ::=  (SimpleForBinding | ForMemberBinding) PositionalVar? "in" ExprSingle
SimpleForBinding  ::=  VarBinding AllowingEmpty?
ForMemberBinding  ::=  "member" VarBinding
AllowingEmpty     ::=  "allowing" "empty"
PositionalVar     ::=  "at" "$" VarName
VarBinding        ::=  "$" VarName TypeDeclaration?
</code></pre>
<p>And one more motivation for changing is that map bindings will be easier to define (see <a href="https://github.com/qt4cg/qtspecs/issues/31#issuecomment-1721400625">#31</a>).</p>
</div></details></div>
<div class="toot" id="created-705"><h2>Issue #705 created<span class="toot-id"> #created-705</span></h2><div class="pubdate">15 Sep at 07:08:45 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/705">https://github.com/qt4cg/qtspecs/issues/705</a></div><details><summary>Function Coercion: Function Arities</summary><div class="markup"><p>In <a href="https://qt4cg.org/specifications/xquery-40/xquery-40.html#id-function-coercion">4.6.4 Function Coercion</a>, a rule was added to support functions with an arity lower than the expected one:</p>
<blockquote>
<p>If F has lower arity than the expected type, then F is wrapped in a new function that declares and ignores the additional argument; the following steps are then applied to this new function.</p>
</blockquote>
<p>If I got it right, this is the resulting 4.0 behavior:</p>
<p><strong>Spoiler:</strong> I probably got it wrong, see the next comment.</p>
<pre><code class="language-xquery">declare function local:function($a) { };
declare variable $function := function($a) { };

(: now legal :)
filter    (1984, true#0)
$function (1984, 'ignored')
fn { }    (1984, 'ignored')
map { }   (1984, 'ignored')
true#0    ('ignored')
sum(?, ())(1984, 'ignored')

(: still illegal :)
local:function(1984, 'ignored')

(: still legal: RHS items will be supplied one by one :)
map { }(1984, 'processed')     
</code></pre>
<p>Maybe some more examples should be added in the corresponding sections that refer to function coercion.</p>
<p>The new rule is powerful and allows for greater flexibility (see #516 and other issues), but the behavior may also be unexpected. We should probably document that:</p>
<ul>
<li>It may go unnoticed that a passed on argument will be ignored. In other words, we reduce type safety by allowing users to supply more arguments than will be processed.</li>
<li>It makes a difference whether the invoked function is static or dynamic (dynamic functions will now provide less type safety than static functions).</li>
</ul>
</div></details></div>
<div class="toot" id="created-704"><h2>Issue #704 created<span class="toot-id"> #created-704</span></h2><div class="pubdate">14 Sep at 12:26:24 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/704">https://github.com/qt4cg/qtspecs/issues/704</a></div><details><summary>Context Value Expression → Context Value Reference</summary><div class="markup"><p>The specification defines Variable References for accessing values bound to a variable, and we should rename the equivalent operation for accessing the context from “Context Value Expression” to “Context Value Reference” (even more so if we should decide to introduce a Context Value Declaration later on, as discussed in #131).</p>
<p>Related: https://github.com/qt4cg/qtspecs/pull/703#issuecomment-1719345430</p>
</div></details></div>
<div class="toot" id="created-703"><h2>Pull request #703 created<span class="toot-id"> #created-703</span></h2><div class="pubdate">14 Sep at 11:43:25 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/703">https://github.com/qt4cg/qtspecs/pull/703</a></div><details><summary>129 (1): XPath and XQuery changes for introduction of context value</summary><div class="markup"><p>Fix #129 This replaces the previous attempt from several months ago, which had too many conflicts to be salvageable.</p>
<p>This is a wide-ranging and pervasive change, and I would like the changes to be applied promptly and incrementally to reduce the risk of conflicts, even if further work is needed later. This first PR addresses the XQuery and XPath language specifications. Further changes (in subsequent PRs) are needed for F+O and for XSLT. There are also a couple of minor changes affecting Serialization (but none affecting the data model).</p>
</div></details></div>
<div class="toot" id="closed-368"><h2>Issue #368 closed<span class="toot-id"> #closed-368</span></h2><div class="pubdate">14 Sep at 11:38:46 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/368">https://github.com/qt4cg/qtspecs/pull/368</a></div><p>129: Context item generalized to context value</p></div>
<div class="toot" id="created-702"><h2>Pull request #702 created<span class="toot-id"> #created-702</span></h2><div class="pubdate">14 Sep at 09:29:55 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/702">https://github.com/qt4cg/qtspecs/pull/702</a></div><details><summary>701: fn:concat: Support for 0 or more arguments</summary><div class="markup"><p>Closes #701</p>
</div></details></div>
<div class="toot" id="created-701"><h2>Issue #701 created<span class="toot-id"> #created-701</span></h2><div class="pubdate">14 Sep at 09:08:30 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/701">https://github.com/qt4cg/qtspecs/issues/701</a></div><details><summary>fn:concat: Support for 0 or more arguments</summary><div class="markup"><p>With #161, we plan to introduce support for variadic functions.</p>
<p>The scope of this issue is much smaller and can be seen as a preparatory one; it’s about allowing the first two arguments of the function optional. I’ll create a little PR for it.</p>
</div></details></div>
<div class="toot" id="created-700"><h2>Issue #700 created<span class="toot-id"> #created-700</span></h2><div class="pubdate">14 Sep at 09:06:25 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/700">https://github.com/qt4cg/qtspecs/issues/700</a></div><details><summary>Operators for array mapping and filtering</summary><div class="markup"><p>With issue #129 generalising the context item to a context value, we have the opportunity to define context-based mapping and filtering operators for arrays that work in the same way as the <code>A!B</code> and <code>A[B]</code> operators for sequences.</p>
<p>I propose <code>A!!B</code> as a mapping operator for arrays. Unlike <code>!</code>, this does not flatten the result. The result is an array whose members correspond one-to-one with the members of <code>A</code>, each member of the result array being formed by evaluating <code>B</code> with the corresponding member of <code>A</code> as the context value.</p>
<p>For an array whose members are singletons, the expression <code>A!!B</code> has a similar effect to <code>A?*!B</code>, but (a) it is clearer, (b) it returns an array rather than a sequence, and (c) it performs no flattening. For the more general case, it can be used in place of the higher-order function call <code>A =&gt; array:for-each(fn{B})</code>.</p>
<p>I propose <code>A?[B]</code> as a filter operator for arrays. Unlike <code>A[B]</code>, this is not overloaded to perform index-based selection. The result is an array containing those members of <code>A</code> for which <code>B</code> has an effective boolean value of true, when evaluated with the corresponding member of <code>A</code> as the context value. The expression <code>$A?[B]</code> is equivalent to <code>$A =&gt; array:filter(fn{B})</code>.</p>
<p>For example, <code>$A?[exists(.)]</code> filters the array <code>$A</code> to retain only those members that are non-empty.</p>
</div></details></div></div><p>See 1304
            more statuses in yearly archives.</p></article></main></body></html>