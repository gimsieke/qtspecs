<!DOCTYPE HTML><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta charset="UTF-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1"><link rel="stylesheet" href="/css/status.css"><title>@qt4cg statuses</title></head><body><main><article><h1>@qt4cg statuses</h1><p>This page displays recent status
            updates
            about the QT4CG project.</p><p>The are also captured in <a href="status.rss">an RSS feed</a>.</p><p>By year: <a href="2024/">2024</a>, <a href="2023/">2023</a>, <a href="2022/">2022</a>, <a href="2021/">2021</a>, <a href="2020/">2020</a></p><div class="toots">
<div class="toot" id="created-955"><h2>Issue #955 created<span class="toot-id"> #created-955</span></h2><div class="pubdate">17 Jan at 12:00:36 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/955">https://github.com/qt4cg/qtspecs/issues/955</a></div><details><summary>Options parameters as record types</summary><div class="markup"><p>In the new parse-html() function, the content of the options parameter is described using a record type. This differs from other functions, that describe the type as map(*), and have a statement that "the option parameter conventions apply".</p>
<p>Ideally we should use record types for all options parameters. However we need to check carefully that this does not affect edge-case compatibility, for example implicit conversions or the acceptability of extensions. If we can't do that then we should bring parse-html() into line with other functions such as parse-json().</p>
</div></details></div>
<div class="toot" id="created-954"><h2>Issue #954 created<span class="toot-id"> #created-954</span></h2><div class="pubdate">17 Jan at 00:45:02 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/954">https://github.com/qt4cg/qtspecs/issues/954</a></div><details><summary>Establish a default value for the XSLT fixed-namespaces attribute</summary><div class="markup"><p>The newly-defined <a href="https://qt4cg.org/specifications/xslt-40/Overview.html#fixed-namespaces"><strong>fixed-namespaces</strong> attribute</a> on the <em><code>xsl:stylesheet</code></em> element is a huge positive step towards improving programmer's productivity by removing the need to provide up to 9 namespace declarations in every stylesheet module, thus reducing unnecessary cluttering, simplifying and slimming the code and increasing its readability.</p>
<p>It seems like an accidental omission that the current text doesn't specify a default value for this attribute. If there is a well-chosen default value, this would even further decrease the requirements for the programmer to engage in such a non-problem-solving activity as entering memorized strings, and would prevent errors such as either not providing the correct values for the namespace-uris or forgetting to specify this new attribute.</p>
<p>One obvious candidate for a default value of the <strong>fixed-namespaces</strong> attribute is <code>#standard</code>, which means that without having to press even a single additional key, the XSLT programmer gets all standard namespaces automatically bound to the well-known prefixes:</p>
<p><code>xsl</code> <code>xml</code> <code>xs</code> <code>xsi</code> <code>fn</code>  <code>math</code> <code>map</code> <code>array</code> <code>err</code></p>
<h3>Proposal:</h3>
<p>Please, augment the current text by specifying that the default value for the <strong>fixed-namespaces</strong> attribute is <code>#standard</code></p>
</div></details></div>
<div class="toot" id="created-953"><h2>Pull request #953 created<span class="toot-id"> #created-953</span></h2><div class="pubdate">16 Jan at 23:10:17 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/953">https://github.com/qt4cg/qtspecs/pull/953</a></div><details><summary>617 Define record constructors</summary><div class="markup"><p>Fix #617</p>
<p>Note that this is a first step. Noticeably we can't yet use these constructor functions to create records that have methods. It's nevertheless a big step forward.</p>
</div></details></div>
<div class="toot" id="created-952"><h2>Pull request #952 created<span class="toot-id"> #created-952</span></h2><div class="pubdate">16 Jan at 18:52:58 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/952">https://github.com/qt4cg/qtspecs/pull/952</a></div><details><summary>945 module import contradiction</summary><div class="markup"><p>Soem editorial clarifications regarding XQuery module import and schema import.</p>
<p>Fix #945</p>
</div></details></div>
<div class="toot" id="closed-928"><h2>Issue #928 closed<span class="toot-id"> #closed-928</span></h2><div class="pubdate">16 Jan at 17:33:04 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/928">https://github.com/qt4cg/qtspecs/pull/928</a></div><p>Minor edits through ch. 15</p></div>
<div class="toot" id="closed-947"><h2>Issue #947 closed<span class="toot-id"> #closed-947</span></h2><div class="pubdate">16 Jan at 17:30:10 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/947">https://github.com/qt4cg/qtspecs/pull/947</a></div><p>Reorganise F+O chapter 15 [editorial]</p></div>
<div class="toot" id="closed-530"><h2>Issue #530 closed<span class="toot-id"> #closed-530</span></h2><div class="pubdate">16 Jan at 17:26:54 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/530">https://github.com/qt4cg/qtspecs/issues/530</a></div><p>Escaping of forward slash in JSON output method</p></div>
<div class="toot" id="closed-942"><h2>Issue #942 closed<span class="toot-id"> #closed-942</span></h2><div class="pubdate">16 Jan at 17:26:53 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/942">https://github.com/qt4cg/qtspecs/pull/942</a></div><p>530 Fix typo, escape-solidus not escape-uri-attributes</p></div>
<div class="toot" id="closed-880"><h2>Issue #880 closed<span class="toot-id"> #closed-880</span></h2><div class="pubdate">16 Jan at 17:26:52 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/880">https://github.com/qt4cg/qtspecs/pull/880</a></div><p>872 Symmetry: fn:items-at → fn:get</p></div>
<div class="toot" id="minutes-01-16"><h2>QT4 CG meeting 061 draft minutes<span class="toot-id"> #minutes-01-16</span></h2><div class="pubdate">16 Jan at 17:25:00 GMT</div><div class="link">Link: <a href="https://qt4cg.org/meeting/minutes/2024/01-16">https://qt4cg.org/meeting/minutes/2024/01-16</a></div><p>Draft minutes published.</p></div>
<div class="toot" id="closed-930"><h2>Issue #930 closed<span class="toot-id"> #closed-930</span></h2><div class="pubdate">16 Jan at 17:23:48 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/930">https://github.com/qt4cg/qtspecs/issues/930</a></div><p>Obsolete comment under fn:deep-equal()</p></div>
<div class="toot" id="closed-933"><h2>Issue #933 closed<span class="toot-id"> #closed-933</span></h2><div class="pubdate">16 Jan at 17:23:47 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/933">https://github.com/qt4cg/qtspecs/pull/933</a></div><p>930 drop obsolete note about comments and PIs</p></div>
<div class="toot" id="closed-932"><h2>Issue #932 closed<span class="toot-id"> #closed-932</span></h2><div class="pubdate">16 Jan at 17:20:21 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/932">https://github.com/qt4cg/qtspecs/pull/932</a></div><p>931 Add rules for duration precision</p></div>
<div class="toot" id="closed-931"><h2>Issue #931 closed<span class="toot-id"> #closed-931</span></h2><div class="pubdate">16 Jan at 17:20:21 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/931">https://github.com/qt4cg/qtspecs/issues/931</a></div><p>Precision of duration arithmetic</p></div>
<div class="toot" id="closed-737"><h2>Issue #737 closed<span class="toot-id"> #closed-737</span></h2><div class="pubdate">16 Jan at 17:17:31 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/737">https://github.com/qt4cg/qtspecs/pull/737</a></div><p>295: Boost the capability of recursive record types</p></div>
<div class="toot" id="created-951"><h2>Issue #951 created<span class="toot-id"> #created-951</span></h2><div class="pubdate">16 Jan at 13:58:32 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/951">https://github.com/qt4cg/qtspecs/issues/951</a></div><details><summary>Parameters with default values: fn:lang, fn:id, fn:idref, fn:element-with-id</summary><div class="markup"><p>Since #895, absent optional arguments and empty sequences in built-in functions are treated identically. Exceptions are functions that already had different rules for such cases (e.g., <code>fn:node(())</code> always returns an empty sequence, no matter what the context is).</p>
<p>I noticed we should also exclude <code>fn:lang</code>, <code>fn:id</code>, <code>fn:idref</code>, and <code>fn:element-with-id</code>: Otherwise, a compiler won’t be able to statically assess if a function call is dependent on the context.</p>
</div></details></div>
<div class="toot" id="created-950"><h2>Pull request #950 created<span class="toot-id"> #created-950</span></h2><div class="pubdate">16 Jan at 11:53:16 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/950">https://github.com/qt4cg/qtspecs/pull/950</a></div><details><summary>Minor edits (examples, rules)</summary><div class="markup"><ul>
<li>Examples were fixed.</li>
<li>The equivalent expression for <code>map:values</code> was changed to <code>$map?*</code>.</li>
</ul>
</div></details></div>
<div class="toot" id="created-949"><h2>Issue #949 created<span class="toot-id"> #created-949</span></h2><div class="pubdate">16 Jan at 11:21:07 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/949">https://github.com/qt4cg/qtspecs/issues/949</a></div><details><summary>Partial Function Applications: Allow return of function name</summary><div class="markup"><p>Without wanting to revive #889, an important observation I picked up is that named function references and “partially applied functions without applications” can be considered identical. That is, there should be no reason to distinguish between <code>count#1</code> and <code>count(?)</code>.</p>
<p>Currently, however, partially applied functions are currently defined to lose the reference to the original function and its arity (and some Qt4 tests ensure that this is the case: https://github.com/qt4cg/qt4tests/blob/8649941e0e695ff8fb4cb27c52e99590cc88126f/misc/HigherOrderFunctions.xml#L1933).</p>
<p>From a user perspective, I see no reason why the two cases should be treated differently, and I would argue that we should either treat them identically or (at least) allow implementations to treat them identically, i.e., allowing an implementation to return <code>count</code> for <code>function-name(count(?))</code>.</p>
</div></details></div>
<div class="toot" id="created-948"><h2>Issue #948 created<span class="toot-id"> #created-948</span></h2><div class="pubdate">15 Jan at 18:59:21 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/948">https://github.com/qt4cg/qtspecs/issues/948</a></div><details><summary>fn:scan-left and fn:scan-right - produce accumulation of results</summary><div class="markup"><h1>fn:scan-left and fn:scan-right - produce accumulation of results</h1>
<p>In XPath 4.0 so far we still don't have a convenient way to express the functionality of producing a series of accumulated (accrued) results when applying a folding function over a collection (sequence, array, ...) of items. The general use-case for this is the task to produce a sequence of running totals when applying an operation over a sequence of data points: <strong>produce the partial sums of loan payments</strong> over fixed periods, <strong>produce the compounded amounts  of a deposit</strong> with fixed interest rate over years, ..., etc.</p>
<p>Two functions (shamelessly borrowed from Haskell):</p>
<ul>
<li><strong>fn:scan-left</strong></li>
<li><strong>fn:scan-right</strong></li>
</ul>
<hr>
<h2>fn:scan-left</h2>
<p>This function has a similar signature to that of <strong><em><code>fn:fold-left</code></em></strong> and produces the same final result, however it produces the complete (ordered) sequence of all partial results from every new value the accumulator gets during the evaluation of <strong><em><code>fn:fold-left</code></em></strong>.</p>
<h3>Signature</h3>
<pre><code class="language-xq">fn:scan-left($input	as item()*,	
             $zero	as item()*,	
             $action	as function(item()*, item()) as item()*	
) as array(*)*
</code></pre>
<h3>Properties</h3>
<p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/Overview.html#dt-deterministic">·deterministic·</a>, <a href="https://qt4cg.org/specifications/xpath-functions-40/Overview.html#dt-context-independent">·context-independent·</a>, and <a href="https://qt4cg.org/specifications/xpath-functions-40/Overview.html#dt-focus-independent">·focus-independent·</a>.</p>
<h3>Rules</h3>
<p>The function is equivalent to the following implementation in XPath(return clause added for completeness):</p>
<pre><code class="language-xq">let $scan-left-inner := function($seq as item()*, 
                                 $zero as item(), 
                                 $fun as function(item()*, item()) as item()*,
                                 $self as function(*)
                               ) as array(*)*                               
{
  let $result := [$zero]
   return
     if(empty($seq)) then $result
       else
         (
           $result, $self(tail($seq), $fun($zero, head($seq)), $fun, $self)  
         )
},

$scan-left := function($seq as item()*, 
                       $zero as item(), 
                       $fun as function(item()*, item()) as item()*
                     ) as array(*)*  
{
  $scan-left-inner($seq, $zero, $fun, $scan-left-inner)
}  

  return
    $scan-left(1 to 10, 0, op('+'))
</code></pre>
<h3>Examples:</h3>
<pre><code class="language-xq"> $scan-left(1 to 10, 0, op('+'))
</code></pre>
<p>produces:</p>
<pre><code class="language-xq">[0]
[1]
[3]
[6]
[10]
[15]
[21]
[28]
[36]
[45]
[55]
</code></pre>
<p><img src="https://github.com/qt4cg/qtspecs/assets/10605892/603c0584-31bb-431f-b928-875058111128" alt="image"></p>
<h2>fn:scan-right</h2>
<p>This function has a similar signature to that of <strong><em><code>fn:fold-right</code></em></strong> and produces the same final result, however it produces the complete (ordered) sequence of all partial results from every new value the accumulator gets during the evaluation of <strong><em><code>fn:fold-right</code></em></strong>.</p>
<h3>Signature</h3>
<pre><code class="language-xq">fn:scan-right($input	as item()*,	
              $zero	as item()*,	
              $action	as function(item()*, item()) as item()*	
) as array(*)*
</code></pre>
<h3>Properties</h3>
<p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/Overview.html#dt-deterministic">·deterministic·</a>, <a href="https://qt4cg.org/specifications/xpath-functions-40/Overview.html#dt-context-independent">·context-independent·</a>, and <a href="https://qt4cg.org/specifications/xpath-functions-40/Overview.html#dt-focus-independent">·focus-independent·</a>.</p>
<h3>Rules</h3>
<p>The function is equivalent to the following implementation in XPath(return clause added for completeness):</p>
<pre><code class="language-xq">let  $scan-right-inner := function($seq as item()*,
                                   $zero as item()*,
                                   $f as function(item(), item()*) as item()*,                          
                                   $self as function(*)
                                  ) as array(*)*
{
    if(empty($seq)) then [$zero]
      else
        let $rightResult := $self(tail($seq), $zero, $f, $self)
         return
            ([$f(head($seq), head($rightResult))], $rightResult)
},

$scan-right := function($seq as item()*,
                        $zero as item()*,
                        $f as function(item(), item()*) as item()*
                       ) as array(*)*
{
  $scan-right-inner($seq, $zero, $f, $scan-right-inner)
}   

return
  $scan-right(1 to 10, 0, op('+'))  
</code></pre>
<h3>Examples:</h3>
<pre><code class="language-xq"> $scan-right(1 to 10, 0, op('+'))
</code></pre>
<p>produces:</p>
<pre><code class="language-xq">[55]
[54]
[52]
[49]
[45]
[40]
[34]
[27]
[19]
[10]
[0]
</code></pre>
<p><img src="https://github.com/qt4cg/qtspecs/assets/10605892/68f5010d-133d-4bcf-8096-609a3d26697f" alt="image"></p>
</div></details></div>
<div class="toot" id="agenda-01-16"><h2>QT4 CG meeting 061 draft agenda<span class="toot-id"> #agenda-01-16</span></h2><div class="pubdate">15 Jan at 14:40:00 GMT</div><div class="link">Link: <a href="https://qt4cg.org/meeting/agenda/2024/01-16">https://qt4cg.org/meeting/agenda/2024/01-16</a></div><p>Draft agenda published.</p></div>
<div class="toot" id="closed-899"><h2>Issue #899 closed<span class="toot-id"> #closed-899</span></h2><div class="pubdate">15 Jan at 15:21:40 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/899">https://github.com/qt4cg/qtspecs/issues/899</a></div><p>Simplifying the language - types have behaviour.</p></div>
<div class="toot" id="created-947"><h2>Pull request #947 created<span class="toot-id"> #created-947</span></h2><div class="pubdate">15 Jan at 10:39:12 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/947">https://github.com/qt4cg/qtspecs/pull/947</a></div><details><summary>Reorganise F+O chapter 15 [editorial]</summary><div class="markup"><p>This PR reorganizes the subsections of F+O chapter 15 (the XML/HTML/JSON/CSV/IXML chapter). There is no change to content apart from a couple of introductory sentences. I'm planning to do some fine-grained work on the content in due course, but to make that easier to review it seems best to do the top-level reorganisation first. I'm therefore hoping that this PR will go through quickly "on the nod" so I can use it as a baseline for the detail changes.</p>
</div></details></div>
<div class="toot" id="created-946"><h2>Issue #946 created<span class="toot-id"> #created-946</span></h2><div class="pubdate">12 Jan at 16:10:46 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/946">https://github.com/qt4cg/qtspecs/issues/946</a></div><details><summary>fn:iterate-while → fn:while-do, fn:do-while</summary><div class="markup"><p>First feedback shows that <code>fn:iterate-while</code> is helpful, but the name needs to be improved: It implies that the first iteration occurs before the invocation of the test… Which could sometimes be helpful, too.</p>
<p>I suggest renaming the function to <code>fn:while-do</code> (“do” is commonly used when while loops are specified), and adding <code>fn:do-while</code>.</p>
</div></details></div>
<div class="toot" id="created-945"><h2>Issue #945 created<span class="toot-id"> #created-945</span></h2><div class="pubdate">12 Jan at 15:41:25 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/945">https://github.com/qt4cg/qtspecs/issues/945</a></div><details><summary>Module import: apparent contradiction</summary><div class="markup"><p>XQuery 5.12 paragraph 2 says:</p>
<blockquote>
<p>If a module A imports module B, the static context of module A will contain the [in-scope schema definitions]... of module B.</p>
</blockquote>
<p>Paragraph 10 says:</p>
<blockquote>
<p>A [module import] imports only functions, variable declarations, and item type declaratons; it does not import other objects from the imported modules, such as [in-scope schema definitions] or [statically known namespaces].</p>
</blockquote>
<p>They can't both be right, surely?</p>
</div></details></div>
<div class="toot" id="created-944"><h2>Issue #944 created<span class="toot-id"> #created-944</span></h2><div class="pubdate">12 Jan at 11:18:52 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/944">https://github.com/qt4cg/qtspecs/issues/944</a></div><details><summary>Coercion rules: implicit types</summary><div class="markup"><p>Since 2.0, the coercion rules (formerly function conversion rules) have allowed implicit conversion from decimal to double, decimal to float, and float to double on function calls; other conversions such as double to decimal or float to decimal are not allowed. This has never made very much sense because in some implementations, decimal to float is a lossy conversion whereas float to decimal is not.</p>
<p>One option would be to allow conversion from any numeric type to any other.</p>
<p>The main caveat here is that I don't think it makes sense to allow a double such as 1.5e0 to be supplied where the required type is xs:integer. We have introduced new conversions that make it possible to supply a decimal where an integer is expected, but only if the decimal is in the value space of integer.</p>
<p>A possible formulation would be:</p>
<p>If the required type is a numeric type (that is, xs:decimal, xs:double, xs:float, or any type derived from these), and if the supplied value is a numeric value, then the supplied value is cast to the required primitive type, and if the result is in the value space of the actual required type it is then relabelled as an instance of the actual required type (if not, the conversion fails).</p>
<p>This means that supplying 1.0e0 for an argument expecting xs:integer (or xs:positiveInteger, etc) would work (it would cast to xs:decimal and then relabel as xs:integer), but supplying 1.1e0 would fail.</p>
</div></details></div>
<div class="toot" id="created-943"><h2>Pull request #943 created<span class="toot-id"> #created-943</span></h2><div class="pubdate">11 Jan at 10:28:42 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/943">https://github.com/qt4cg/qtspecs/pull/943</a></div><details><summary>187 Add FLWOR expression while clause</summary><div class="markup"><p>Fix #187</p>
</div></details></div>
<div class="toot" id="created-942"><h2>Pull request #942 created<span class="toot-id"> #created-942</span></h2><div class="pubdate">10 Jan at 16:42:17 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/942">https://github.com/qt4cg/qtspecs/pull/942</a></div><details><summary>530 Fix typo, escape-solidus not escape-uri-attributes</summary><div class="markup"><p>Fix #530.</p>
<p>On half a dozen occasions, <code>escape-uri-attributes</code> is used where <code>escape-solidus</code> is clearly intended.</p>
</div></details></div>
<div class="toot" id="closed-886"><h2>Issue #886 closed<span class="toot-id"> #closed-886</span></h2><div class="pubdate">10 Jan at 14:28:06 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/886">https://github.com/qt4cg/qtspecs/issues/886</a></div><p>Binary map keys</p></div>
<div class="toot" id="created-941"><h2>Pull request #941 created<span class="toot-id"> #created-941</span></h2><div class="pubdate">10 Jan at 12:20:37 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/941">https://github.com/qt4cg/qtspecs/pull/941</a></div><p>939 Remove fn:numeric-compare</p></div>
<div class="toot" id="created-940"><h2>Pull request #940 created<span class="toot-id"> #created-940</span></h2><div class="pubdate">10 Jan at 12:05:08 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/940">https://github.com/qt4cg/qtspecs/pull/940</a></div><details><summary>878 Add subsequence-where function</summary><div class="markup"><p>Supersedes PR #874</p>
<p>Following discussion of PR #874 which proposed an extended subsequence() function with options to define the start and end position by predicates, this new PR proposes instead a subsequence-where() function that allows the start and end position to be defined by predicates, leaving the existing subsequence() function unchanged.</p>
<p>The items-before/after/starting-where/ending-where quartet are dropped.</p>
<p>The new function is inclusive at both ends. To start at the item after the one that matches the start condition, apply tail() to the result. To finish before the item that matches the end condition, apply trunk() to the result.</p>
</div></details></div></div><p>See 1800
            more statuses in yearly archives.</p></article></main></body></html>