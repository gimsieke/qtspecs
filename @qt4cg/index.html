<!DOCTYPE HTML><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta charset="UTF-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1"><link rel="stylesheet" href="/css/status.css"><title>@qt4cg statuses</title></head><body><main><article><h1>@qt4cg statuses</h1><p>This page displays recent status
            updates
            about the QT4CG project.</p><p>The are also captured in <a href="status.rss">an RSS feed</a>.</p><p>By year: <a href="2023/">2023</a>, <a href="2022/">2022</a>, <a href="2021/">2021</a>, <a href="2020/">2020</a></p><div class="toots">
<div class="toot" id="agenda-06-06"><h2>QT4 CG meeting 037 draft agenda<span class="toot-id"> #agenda-06-06</span></h2><div class="pubdate">05 Jun at 09:20:00 GMT</div><div class="link">Link: <a href="https://qt4cg.org/meeting/agenda/2023/06-06">https://qt4cg.org/meeting/agenda/2023/06-06</a></div><p>Draft agenda published.</p></div>
<div class="toot" id="created-536"><h2>Issue #536 created<span class="toot-id"> #created-536</span></h2><div class="pubdate">03 Jun at 15:41:40 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/536">https://github.com/qt4cg/qtspecs/issues/536</a></div><details><summary>Re: Mathematical Operator Symbols</summary><div class="markup"><p>#460</p>
<p><code>=!&gt;</code> is not mentioned in A 3.3</p>
<p>Also, I do not think it makes sense to allow mixing both characters in one operator, like in <code>＜&lt;</code>. It combines the disadvantages of <code>&lt;&lt;</code> and <code>＜＜</code> without any advantages</p>
</div></details></div>
<div class="toot" id="created-535"><h2>Pull request #535 created<span class="toot-id"> #created-535</span></h2><div class="pubdate">03 Jun at 14:22:06 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/535">https://github.com/qt4cg/qtspecs/pull/535</a></div><p>Editorial: add an entry to the changes appendix</p></div>
<div class="toot" id="created-534"><h2>Pull request #534 created<span class="toot-id"> #created-534</span></h2><div class="pubdate">31 May at 17:27:30 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/534">https://github.com/qt4cg/qtspecs/pull/534</a></div><details><summary>530: escape solidus in JSON</summary><div class="markup"><p>Add <code>escape-solidus</code> serialization parameter for the JSON output method.</p>
</div></details></div>
<div class="toot" id="created-533"><h2>Pull request #533 created<span class="toot-id"> #created-533</span></h2><div class="pubdate">31 May at 15:58:57 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/533">https://github.com/qt4cg/qtspecs/pull/533</a></div><details><summary>Spec for CSV parsing with fn:parse-csv()</summary><div class="markup"><p>This is a spec proposal for <code>fn:parse-csv()</code> from #413.</p>
<p>I've tried to cover off most of what was discussed in that issue, but I have avoided dealing with backlash escapes (per @ChristianGruen's early comment), sticking with the RFC 4180 quoting approach.</p>
<p>There are some issues with the structure where I tried to follow the existing structure of chapter 15, but that leaves the function definition in 15.4 separated by a lot of text before the wider format discussion in 15.7. The split between function def and context affects the JSON and HTML parsing functions too, so I have avoided trying to fix that as well in this PR.</p>
<p>If this meets with approval, I'll squash commits and rebase before merging.</p>
</div></details></div>
<div class="toot" id="created-532"><h2>Pull request #532 created<span class="toot-id"> #created-532</span></h2><div class="pubdate">31 May at 07:30:03 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/532">https://github.com/qt4cg/qtspecs/pull/532</a></div><details><summary>fix error in LambdaParams rule</summary><div class="markup"><p>fixes https://github.com/qt4cg/qtspecs/issues/531#issue-1733539612</p>
<p>LambdaParam | "(" | (LambdaParam ("," LambdaParam)<em>)? | ")" should be:
LambdaParam | ( "(" (LambdaParam ("," LambdaParam)</em>)? ")" )</p>
</div></details></div>
<div class="toot" id="created-531"><h2>Issue #531 created<span class="toot-id"> #created-531</span></h2><div class="pubdate">31 May at 07:14:11 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/531">https://github.com/qt4cg/qtspecs/issues/531</a></div><details><summary>grammar production LambdaParams has "(" and ")" incorrectly under the choice</summary><div class="markup"><p>The grammar production
<code>LambdaParams ::= LambdaParam  |  "("  |  (LambdaParam  (","  LambdaParam)*)?  |  ")"</code>
should be
<code>LambdaParams ::= LambdaParam  |  ("(" (LambdaParam  (","  LambdaParam)*)? ")")</code></p>
</div></details></div>
<div class="toot" id="created-530"><h2>Issue #530 created<span class="toot-id"> #created-530</span></h2><div class="pubdate">31 May at 06:00:48 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/530">https://github.com/qt4cg/qtspecs/issues/530</a></div><details><summary>Escaping of forward slash in JSON output method</summary><div class="markup"><p>The fact that we escape forward slash in the JSON output method has proved unpopular with quite a few users.</p>
<p>The rationale for doing it is discussed at https://stackoverflow.com/questions/1580647/json-why-are-forward-slashes-escaped</p>
<p>The short summary is that it's only needed when JSON is inserted into an HTML <code>script</code> element, and then only when immediately followed by <code>&gt;</code>.</p>
<p>There's a workaround using character maps but it's really clumsy.</p>
<p>I don't want to escape forward slashes by default in the xdm-to-json() function because they appear so often in namespaces and it adds an awful lot of visual clutter. That means that our JSON formatter needs an option to suppress this escaping, which means we might as well provide user control over it as an output property...</p>
<p>Adding a new output property just for this purpose is rather heavyweight both in the specs and in our implementation, but I can't think of a better solution. So I propose adding <code>escape-solidus</code>, values yes/no, default (for compatibility) yes.</p>
<p>Yes, someone will ask about the name. Surely no-one calls it a solidus? Well, Unicode does, and I think we should use the official name. And it avoids arguing about whether it should be slash or forwards-slash or forward-slash. At least I'm not proposing virgule.</p>
</div></details></div>
<div class="toot" id="closed-367"><h2>Issue #367 closed<span class="toot-id"> #closed-367</span></h2><div class="pubdate">30 May at 22:19:55 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/367">https://github.com/qt4cg/qtspecs/issues/367</a></div><p>Focus for RHS of thin arrow expressions</p></div>
<div class="toot" id="minutes-05-30"><h2>QT4 CG meeting 036 draft minutes<span class="toot-id"> #minutes-05-30</span></h2><div class="pubdate">30 May at 17:15:00 GMT</div><div class="link">Link: <a href="https://qt4cg.org/meeting/minutes/2023/05-30">https://qt4cg.org/meeting/minutes/2023/05-30</a></div><p>Draft minutes published.</p></div>
<div class="toot" id="closed-524"><h2>Issue #524 closed<span class="toot-id"> #closed-524</span></h2><div class="pubdate">30 May at 16:17:45 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/524">https://github.com/qt4cg/qtspecs/pull/524</a></div><p>503: reinstate focus functions</p></div>
<div class="toot" id="closed-525"><h2>Issue #525 closed<span class="toot-id"> #closed-525</span></h2><div class="pubdate">30 May at 16:17:00 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/525">https://github.com/qt4cg/qtspecs/pull/525</a></div><p>520: add function identity and use it in deep-equal</p></div>
<div class="toot" id="closed-519"><h2>Issue #519 closed<span class="toot-id"> #closed-519</span></h2><div class="pubdate">30 May at 16:16:26 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/519">https://github.com/qt4cg/qtspecs/pull/519</a></div><p>237: Revise tokenisation appendix</p></div>
<div class="toot" id="closed-527"><h2>Issue #527 closed<span class="toot-id"> #closed-527</span></h2><div class="pubdate">30 May at 16:16:02 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/527">https://github.com/qt4cg/qtspecs/pull/527</a></div><p>Editorial: more corrections to F+O examples</p></div>
<div class="toot" id="created-529"><h2>Pull request #529 created<span class="toot-id"> #created-529</span></h2><div class="pubdate">29 May at 11:22:35 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/529">https://github.com/qt4cg/qtspecs/pull/529</a></div><details><summary>528: revision of json(), and renaming to xdm-to-json()</summary><div class="markup"><p>Revises the detail of the proposed json() function, including a name change to xdm-to-json().</p>
<p>The proposed changes give us a starting point for implementation, but I would expect there might be further tweaks to the spec once we try applying the function to real examples.</p>
</div></details></div>
<div class="toot" id="agenda-05-30"><h2>QT4 CG meeting 036 draft agenda<span class="toot-id"> #agenda-05-30</span></h2><div class="pubdate">29 May at 07:53:00 GMT</div><div class="link">Link: <a href="https://qt4cg.org/meeting/agenda/2023/05-30">https://qt4cg.org/meeting/agenda/2023/05-30</a></div><p>Draft agenda published.</p></div>
<div class="toot" id="created-528"><h2>Issue #528 created<span class="toot-id"> #created-528</span></h2><div class="pubdate">28 May at 20:08:08 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/528">https://github.com/qt4cg/qtspecs/issues/528</a></div><details><summary>Review of the fn:json() function</summary><div class="markup"><p>I've been writing tests for the fn:json function, whose spec I haven't read for quite a while, so it's an opportunity (a) to request WG review of the spec, and (b) for some minor comments.</p>
<ol>
<li>I think a better name for the function might be <code>fn:to-json</code>. Any other suggestions?</li>
<li>Where we specify that a JSON object should be output with particular properties, I think we should be consistent about whether or not we prescribe the order. Writing tests is a lot easier if the order is always prescribed!</li>
<li>Document nodes: it would be better to output both the document URI and the base URI where available.</li>
<li>Under "The children of the element are processed as follows" there are four rules. In the case where an element has just one element node child, I think rule 4 should apply rather than rule 3.</li>
<li>Under Processing-Instruction nodes: typo "A JSON object with a two properties".</li>
<li>The section starting "Strings are escaped as follows" should be promoted up a level.</li>
<li>Representing functions: I propose a different set of rules. (a) for a function that is a reference to a built-in or user-defined function definition, output "Q{uri}local#arity". (b) for an anonymous function, output "#anonymous-function". The rationale is that the JSON output here isn't going to be useful except as a placeholder to indicate that a function item is present.</li>
<li>We might want to be more prescriptive about how numbers are formatted (or to provide user options)</li>
<li>Like many XML-to-JSON libraries, there's the problem that two instances of the same element type might be output very differently depending on which children are present. For example the representation of a book with two authors might be very different from a book with one author. I would suggest that rather than the boolean <code>element-map</code> option, we allow the options to include a list of element names for which <code>object</code> representation rather than <code>array</code> representation is to be used.</li>
</ol>
</div></details></div>
<div class="toot" id="created-527"><h2>Pull request #527 created<span class="toot-id"> #created-527</span></h2><div class="pubdate">28 May at 10:24:27 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/527">https://github.com/qt4cg/qtspecs/pull/527</a></div><details><summary>Editorial: more corrections to F+O examples</summary><div class="markup"><p>Fixes errors in the fn:replace examples, updates elsewhere to reflect changes to the syntax of lambda expressions and focus functions.</p>
</div></details></div>
<div class="toot" id="created-526"><h2>Issue #526 created<span class="toot-id"> #created-526</span></h2><div class="pubdate">26 May at 21:22:22 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/526">https://github.com/qt4cg/qtspecs/issues/526</a></div><details><summary>load-xquery-module() needs changes to account for functions with an arity range</summary><div class="markup"><p>The spec of <code>load-xquery-module()</code> assumes that each function declaration in a query module has a single integer arity; this doesn't allow for default parameters which mean it now has an arity range.</p>
<p>Because the returned map contains function items, which always have a fixed arity, I think it needs to contain one entry for each arity in the arity range. This involves evaluating the defaults for any parameters that have a default value defined; if the default value is context dependent, this is going to have to use the context of the <code>load-xquery-module()</code> function call, which isn't very meaningful, but I can't see what else to do.</p>
<p>An alternative is to only include one function item in the result, corresponding to the maximum arity.</p>
<p>If we introduce sequence-variadic functions, the arity range becomes infinite, which makes both of these ideas problematic. But presumably sequence-variadic functions will be callable with all the values supplied in a single array?</p>
</div></details></div>
<div class="toot" id="created-525"><h2>Pull request #525 created<span class="toot-id"> #created-525</span></h2><div class="pubdate">26 May at 09:27:33 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/525">https://github.com/qt4cg/qtspecs/pull/525</a></div><details><summary>520: add function identity and use it in deep-equal</summary><div class="markup"><p>I believe this PR resolves issues</p>
<p>issue #520 - function identity
issue #333 - equality of function items
issue #381 - deep-equal comparison without errors</p>
<p>The PR introduces a concept of function identity in the data model, and for all expressions that create functions, explains what the identity of the returned function is.</p>
<p>The concept of function identity is used initially in two places: in fn:deep-equal(), when the operands include function items; and in the F+O prose defining the concept of determinism, which in turn is relied on by the definition of memo functions in XSLT.</p>
<p>I had hoped to go further and address issue #119, generalising what kinds of values are allowed as keys in maps, but as explained in a comment on that issue, I hit obstacles.</p>
</div></details></div>
<div class="toot" id="created-524"><h2>Pull request #524 created<span class="toot-id"> #created-524</span></h2><div class="pubdate">25 May at 10:09:47 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/524">https://github.com/qt4cg/qtspecs/pull/524</a></div><details><summary>503: reinstate focus functions</summary><div class="markup"><p>This PR reinstates "focus functions", using the syntax <code>function{EXPR}</code> rather than <code>-&gt;{EXPR}</code>. If accepted, this resolves issue #503.</p>
</div></details></div>
<div class="toot" id="created-523"><h2>Issue #523 created<span class="toot-id"> #created-523</span></h2><div class="pubdate">24 May at 23:28:50 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/523">https://github.com/qt4cg/qtspecs/issues/523</a></div><details><summary>Dealing with component name conflicts with library packages</summary><div class="markup"><h2>Override with visibility='hidden'</h2>
<pre><code class="language-xml">&lt;override&gt;
   &lt;template name='foo' visibility='hidden'/&gt;
&lt;/override&gt;
</code></pre>
<p>This change allows the using package to override a component without running into a potential naming conflict with another component in the using package or in another used package. Because the visibility is hidden, the component is not invokable from the using package.</p>
<h2>Accept with alias</h2>
<pre><code class="language-xml">&lt;accept component='template' names='foo' aliases='fu'/&gt;
</code></pre>
<p>This change allows the using package to accept components but with a different name.</p>
</div></details></div>
<div class="toot" id="closed-522"><h2>Issue #522 closed<span class="toot-id"> #closed-522</span></h2><div class="pubdate">24 May at 07:48:58 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/522">https://github.com/qt4cg/qtspecs/pull/522</a></div><p>function-catalog.xml: Original line endings reverted (modified by GitHub’s 'direct edit' feature)</p></div>
<div class="toot" id="created-522"><h2>Pull request #522 created<span class="toot-id"> #created-522</span></h2><div class="pubdate">24 May at 07:48:39 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/522">https://github.com/qt4cg/qtspecs/pull/522</a></div><details><summary>function-catalog.xml: Original line endings reverted (modified by GitHub’s 'direct edit' feature)</summary><div class="markup"><p>I learned it’s NOT advisable to use GitHub’s features to directly edit files in the browser. The newlines of <code>function-catalog.xml</code> of the original file seem to be changed.</p>
<p>This PR is restoring the original newlines.
Sorry for that.</p>
</div></details></div>
<div class="toot" id="created-521"><h2>Pull request #521 created<span class="toot-id"> #created-521</span></h2><div class="pubdate">23 May at 18:50:56 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/521">https://github.com/qt4cg/qtspecs/pull/521</a></div><p>518: Add transitive-closure() function</p></div>
<div class="toot" id="minutes-05-23"><h2>QT4 CG meeting 035 draft minutes<span class="toot-id"> #minutes-05-23</span></h2><div class="pubdate">23 May at 17:20:00 GMT</div><div class="link">Link: <a href="https://qt4cg.org/meeting/minutes/2023/05-23">https://qt4cg.org/meeting/minutes/2023/05-23</a></div><p>Draft minutes published.</p></div>
<div class="toot" id="closed-504"><h2>Issue #504 closed<span class="toot-id"> #closed-504</span></h2><div class="pubdate">23 May at 16:18:56 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/504">https://github.com/qt4cg/qtspecs/issues/504</a></div><p>Merge map:keys and map:keys-where</p></div>
<div class="toot" id="closed-515"><h2>Issue #515 closed<span class="toot-id"> #closed-515</span></h2><div class="pubdate">23 May at 16:18:54 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/515">https://github.com/qt4cg/qtspecs/pull/515</a></div><p>504: Merge map:keys and map:keys-where</p></div>
<div class="toot" id="closed-396"><h2>Issue #396 closed<span class="toot-id"> #closed-396</span></h2><div class="pubdate">23 May at 16:15:20 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/396">https://github.com/qt4cg/qtspecs/pull/396</a></div><p>333: Deep-equal, no failure when comparing functions</p></div>
<div class="toot" id="created-520"><h2>Issue #520 created<span class="toot-id"> #created-520</span></h2><div class="pubdate">23 May at 11:58:37 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/520">https://github.com/qt4cg/qtspecs/issues/520</a></div><details><summary>Function identity</summary><div class="markup"><p>To make deep-equal error-free for all arguments (issue #333), and to support the introduction of sets (issue #34), we need to be able to test whether two functions are "the same function". This is a proposed pragmatic solution.</p>
<p>We change the data model for functions so that functions, like nodes, have an identity that is acquired when the function is created; two functions are identical if and only if they have the same identity.</p>
<p>In general any expression that returns a new function allocates it an identity that is different from all other existing functions (as with nodes). However:</p>
<ul>
<li>Repeated evaluation of a function reference such as count#1 returns the same function each time, provided that the target function is context-free.</li>
<li>Optimizers are allowed to rewrite expressions (for example by loop-lifting, etc) so that expressions that would in principle return distinct functions actually return the same function, provided the optimizer can determine that the two functions are equivalent in all respects other than their identity. For example if the expression <code>contains(?, 'xxx')</code> appears in a loop, the expression can be lifted out of the loop so there is no requirement that it returns different functions each time (as there is with nodes)</li>
</ul>
<p>Benefits of this approach:</p>
<ul>
<li>identical($x, $x) is always true (function identity survives binding to variables)</li>
<li>functions obtained by repeated evaluation of the same expression in the same context are likely to return identical results in cases that are simple enough for an optimizer to analyse</li>
<li>the results are likely to be reasonably intuitive</li>
<li>optimisers aren't constrained by rules on identity to restrict the rewrites they can attempt</li>
</ul>
<p>This does mean that expressions that return functions become a little impure - but only in the same way that expressions that create nodes are a little impure. The impurity is well understood and tolerated.</p>
<p>Maps and arrays do not have identity as a property separate from their content.</p>
</div></details></div></div><p>See 934
            more statuses in yearly archives.</p></article></main></body></html>