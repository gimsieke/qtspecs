<!DOCTYPE HTML><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta charset="UTF-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1"><link rel="stylesheet" href="/css/status.css"><title>@qt4cg statuses</title></head><body><main><article><h1>@qt4cg statuses</h1><p>This page displays recent status
            updates
            about the QT4CG project.</p><p>The are also captured in <a href="status.rss">an RSS feed</a>.</p><p>By year: <a href="2023/">2023</a>, <a href="2022/">2022</a>, <a href="2021/">2021</a>, <a href="2020/">2020</a></p><div class="toots">
<div class="toot" id="closed-361"><h2>Issue #361 closed<span class="toot-id"> #closed-361</span></h2><div class="pubdate">27 Jun at 16:10:11 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/361">https://github.com/qt4cg/qtspecs/issues/361</a></div><p>Named arguments: $input vs. $value</p></div>
<div class="toot" id="closed-562"><h2>Issue #562 closed<span class="toot-id"> #closed-562</span></h2><div class="pubdate">27 Jun at 16:10:08 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/562">https://github.com/qt4cg/qtspecs/pull/562</a></div><p>361: Named arguments: $input vs. $value</p></div>
<div class="toot" id="closed-567"><h2>Issue #567 closed<span class="toot-id"> #closed-567</span></h2><div class="pubdate">27 Jun at 16:09:46 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/567">https://github.com/qt4cg/qtspecs/issues/567</a></div><p>Errors in schema for XSLT</p></div>
<div class="toot" id="closed-568"><h2>Issue #568 closed<span class="toot-id"> #closed-568</span></h2><div class="pubdate">27 Jun at 16:09:45 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/568">https://github.com/qt4cg/qtspecs/pull/568</a></div><p>567: schema for xslt40</p></div>
<div class="toot" id="closed-569"><h2>Issue #569 closed<span class="toot-id"> #closed-569</span></h2><div class="pubdate">27 Jun at 16:09:28 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/569">https://github.com/qt4cg/qtspecs/pull/569</a></div><p>Minor editorial corrections, XDM chh. 1, 2</p></div>
<div class="toot" id="closed-106"><h2>Issue #106 closed<span class="toot-id"> #closed-106</span></h2><div class="pubdate">27 Jun at 16:08:46 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/106">https://github.com/qt4cg/qtspecs/issues/106</a></div><p>Decorators' support</p></div>
<div class="toot" id="closed-175"><h2>Issue #175 closed<span class="toot-id"> #closed-175</span></h2><div class="pubdate">27 Jun at 16:08:31 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/175">https://github.com/qt4cg/qtspecs/issues/175</a></div><p>In XQuery, allow a semicolon at the end of the module</p></div>
<div class="toot" id="closed-457"><h2>Issue #457 closed<span class="toot-id"> #closed-457</span></h2><div class="pubdate">27 Jun at 16:07:59 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/457">https://github.com/qt4cg/qtspecs/issues/457</a></div><p>Support parsing numeric, alphabetic, and additive number systems.</p></div>
<div class="toot" id="created-575"><h2>Pull request #575 created<span class="toot-id"> #created-575</span></h2><div class="pubdate">27 Jun at 14:05:56 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/575">https://github.com/qt4cg/qtspecs/pull/575</a></div><details><summary>359: fn:void: Absorb result of evaluated argument</summary><div class="markup"><p>#359: fn:void: Absorb result of evaluated argument</p>
</div></details></div>
<div class="toot" id="created-574"><h2>Issue #574 created<span class="toot-id"> #created-574</span></h2><div class="pubdate">27 Jun at 14:02:01 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/574">https://github.com/qt4cg/qtspecs/issues/574</a></div><details><summary>fn:dump: Trace and discard results</summary><div class="markup"><p>See https://github.com/qt4cg/qtspecs/issues/359#issuecomment-1465971781</p>
<h2>fn:dump</h2>
<h3>Summary</h3>
<p>Outputs trace information and discards the result.</p>
<h3>Signature</h3>
<pre><code>fn:dump(
  $value  as item()*,	
  $label  as xs:string?  := ()
) as empty-sequence()
</code></pre>
<h3>Properties</h3>
<p>This function is ·deterministic·, ·context-independent·, and ·focus-independent·.</p>
<h3>Rules</h3>
<p>Similar to <code>fn:trace:</code>, the values of <code>$value</code>, converted to an <code>xs:string</code>, and <code>$label</code> (if supplied and non-empty) may be directed to a trace data set. The destination of the trace output is ·implementation-defined·. The format of the trace output is ·implementation-dependent·, as is the ordering of the output.</p>
<p>In contrast to <code>fn:trace</code>, the function returns an empty sequence.</p>
</div></details></div>
<div class="toot" id="created-573"><h2>Issue #573 created<span class="toot-id"> #created-573</span></h2><div class="pubdate">26 Jun at 16:53:46 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/573">https://github.com/qt4cg/qtspecs/issues/573</a></div><details><summary>Node construction functions</summary><div class="markup"><p>I propose introducing a set of functions that allow node construction in XPath. The basic functions are</p>
<pre><code>new-document($children as node()*)
new-element($name as QName, $content as node()*)
new-attribute($name as QName, $value as xs:string)
new-namespace($prefix as xs:string, $uri as xs:string)
new-comment($content as xs:string)
new-processing-instruction($name as xs:string, $content as xs:string)
new-text($content as xs:string)
</code></pre>
<p>The semantics would be essentially identical to the current node constructors in XQuery and/or the corresponding instructions in XSLT (there are very few differences: a few minor ones, like if there are multiple attributes with the same name, XSLT takes the last, while XQuery throws an error).</p>
<p>As always, it's difficult to know where to draw the line in functionality between XPath and XQuery. One of the guidelines I use is that if an addition to XPath is likely to be useful to XSLT users, then it's worth including. Clearly these functions are not strictly necessary in XSLT (they could easily be user-supplied as wrappers around XSLT instructions). But to take advantage of some of the other capabilities we're introducing in XPath, node construction functions are increasingly handy. Consider for example:</p>
<p><code>&lt;xsl:copy-of select="interleave(para, new-element(xs:QName(xhtml:br)))"/&gt;</code></p>
<p>That's a one-liner that replaces</p>
<pre><code>&lt;xsl:for-each select="para"&gt;
  &lt;xsl:if test="position() ne 1"&gt;&lt;br/&gt;&lt;/xsl:if&gt;
  &lt;xsl:copy-of select="."/&gt;
&lt;/xsl:for-each&gt;
</code></pre>
<p>The new functions are also useful in XQuery because although they duplicate existing syntax, the fact that they are functions rather than custom syntax makes them more versatile.</p>
<p>As with existing constructs in XQuery and XSLT, a naive implementation that follows the semantics literally (which involves copying a subtree when adding an element to a new parent) would be rather inefficient. However, I think that the same established optimizations are equally applicable, for example lazy tree construction and/or push-mode evaluation.</p>
</div></details></div>
<div class="toot" id="created-572"><h2>Issue #572 created<span class="toot-id"> #created-572</span></h2><div class="pubdate">26 Jun at 16:36:41 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/572">https://github.com/qt4cg/qtspecs/issues/572</a></div><details><summary>fn:evaluate-xpath() function</summary><div class="markup"><p>XSLT 3.0 introduced an instruction, xsl:evaluate, for dynamic evaluation of XPath expressions. But there is no way of doing this in XQuery.</p>
<p>It was done as an instruction in XSLT because functions at the time were not flexible enough to cope with a range of optional parameters. This situation has changed.</p>
<p>An <code>fn:evaluate()</code> function might operate successfully with the following parameters:</p>
<ul>
<li>xpath - the XPath expression as a string.</li>
<li>namespaces - the namespace bindings as a map from prefix to URI, defaulting to the namespace bindings in the static context of the caller</li>
<li>parameters - parameter values as a map from QName to value, defaulting to an empty map</li>
<li>context-item - the context item for evaluation, defaulting to the context item of the caller</li>
<li>options:
<ul>
<li>default collation</li>
<li>base URI</li>
<li>schema-aware = true/false</li>
<li>allow-external-access = true/false</li>
<li>cache = true/false (whether to cache compiled expressions for reuse)</li>
</ul>
</li>
</ul>
<p>Before <code>xsl:evaluate</code> as introduced, there was some concern in the WG about security and the risk of injection attacks. I think that the allow-external-access switch is sufficient for this: if you don't trust the expression, set it to false, and all dangerous things like access to external documents and other resources, use of extension functions, etc, is disabled.</p>
</div></details></div>
<div class="toot" id="agenda-06-27"><h2>QT4 CG meeting 040 draft agenda<span class="toot-id"> #agenda-06-27</span></h2><div class="pubdate">23 Jun at 10:55:00 GMT</div><div class="link">Link: <a href="https://qt4cg.org/meeting/agenda/2023/06-27">https://qt4cg.org/meeting/agenda/2023/06-27</a></div><p>Draft agenda published.</p></div>
<div class="toot" id="created-571"><h2>Issue #571 created<span class="toot-id"> #created-571</span></h2><div class="pubdate">23 Jun at 09:05:20 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/571">https://github.com/qt4cg/qtspecs/issues/571</a></div><details><summary>XSLT: xsl:for-each-group/@break-when</summary><div class="markup"><p>The new <code>@break-when</code> attribute on <code>xsl:for-each-group</code></p>
<p>(a) has not been reviewed by the CG</p>
<p>(b) is not mentioned in the changes appendix</p>
<p>(c) is not included in the schema-for-XSLT40</p>
</div></details></div>
<div class="toot" id="created-570"><h2>Issue #570 created<span class="toot-id"> #created-570</span></h2><div class="pubdate">23 Jun at 07:59:29 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/570">https://github.com/qt4cg/qtspecs/issues/570</a></div><details><summary>XSLT: Built-in template rules for maps and arrays</summary><div class="markup"><p>The current built-in template rules for maps and arrays do not work well for a recursive-descent traversal of a JSON-like tree of maps and arrays. The effect of on-no-match="shallow-copy" is to do a deep copy, and the effect of on-no-match="shallow-skip" is to do a deep skip. I therefore propose two new values for on-no-match, provisionally "shallow-copy-all" and "shallow-skip-all".</p>
<p>For more details see my Balisage 2022 paper: https://balisage.net/Proceedings/vol27/html/Kay01/BalisageVol27-Kay01.html</p>
<p>We do in fact have some test cases that use this syntax, see <code>attr/mode-4001</code> <em>et seq</em>, but it has never found its way into the spec.</p>
</div></details></div>
<div class="toot" id="created-569"><h2>Pull request #569 created<span class="toot-id"> #created-569</span></h2><div class="pubdate">23 Jun at 03:40:55 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/569">https://github.com/qt4cg/qtspecs/pull/569</a></div><details><summary>Minor editorial corrections, XDM chh. 1, 2</summary><div class="markup"><p>Minor corrections to XDM chapters 1, 2.</p>
<ul>
<li><code>expanded-QName</code> versus <code>expanded QName</code>. The latter outnumbered the former ca. 3:2, and is better, so I with with it.</li>
<li>some language pointing to tables &amp; lines, language rendered obsolete by @ndw 's nice new graphs, excised</li>
<li>other minor edits for clarity, consistency</li>
</ul>
</div></details></div>
<div class="toot" id="created-568"><h2>Pull request #568 created<span class="toot-id"> #created-568</span></h2><div class="pubdate">22 Jun at 20:15:58 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/568">https://github.com/qt4cg/qtspecs/pull/568</a></div><details><summary>567: schema for xslt40</summary><div class="markup"><p>This PR applies the errata to the XSLT 3.0 version of the schema, and extends the schema to support new syntax that has been introduced in XSLT 4.0.</p>
<p>Fix #567.</p>
</div></details></div>
<div class="toot" id="created-567"><h2>Issue #567 created<span class="toot-id"> #created-567</span></h2><div class="pubdate">22 Jun at 17:24:17 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/567">https://github.com/qt4cg/qtspecs/issues/567</a></div><details><summary>Errors in schema for XSLT</summary><div class="markup"><p>Erratum E10 for XSLT 3.0 notes a number of errors in the schema for XSLT 3.0. The errata can be found in the repository at https://github.com/w3c/qtspecs/blob/master/errata/xslt-30/errata.xml but they are not published or linked from the spec; they were produced by the XSL WG after publishing 3.0 and before the group disbanded.</p>
<p>The version of the schema found in the 3.0 repository does not include these corrections; therefore, neither does the one in the 4.0 repository.</p>
<p>There is another version of the schema in the xslt30test repository, and this one does include the corrections (as far as I can see).</p>
<p>However, new additions for changes needed for 4.0 have been applied inconsistently to the two versions.</p>
<p>There's therefore a pressing need to bring everything back into line. A good step would be to cut out the duplication: once we've got it clean, the build process should copy qtspecs/specifications/xslt-40/src/schema-for-xslt40.xsd to xslt40-test/tests/misc/catalog/schema-for-xslt40.xsd and we should only maintain the former.</p>
</div></details></div>
<div class="toot" id="created-566"><h2>Issue #566 created<span class="toot-id"> #created-566</span></h2><div class="pubdate">22 Jun at 11:31:04 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/566">https://github.com/qt4cg/qtspecs/issues/566</a></div><details><summary>fn:parse-uri, fn:build-uri: Feedback</summary><div class="markup"><p>Feedback on <code>fn:parse-uri</code> (thanks, @ndw, for the comprehensible rules in the spec):</p>
<ol>
<li>With the current rules, the port is not detected in <code>http://x:80</code>. Maybe <code>x:</code> is misinterpreted as the beginning of a Windows path?</li>
<li>The <em>uri decoding</em> should be revised. It’s currently possible to create strings with invalid Unicode characters: <code>parse-uri('%FF')</code>. With the current rules, the following expression returns <code>df83</code> and <code>dc00</code>:</li>
</ol>
<pre><code class="language-xquery">parse-uri('%FF00')
=!&gt; map:get('filepath')
=!&gt; string-to-codepoints()
=!&gt; format-integer('16^XX')
</code></pre>
<p>More to come (or not).</p>
</div></details></div>
<div class="toot" id="closed-560"><h2>Issue #560 closed<span class="toot-id"> #closed-560</span></h2><div class="pubdate">22 Jun at 11:23:18 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/560">https://github.com/qt4cg/qtspecs/issues/560</a></div><p>Formatting Monospace</p></div>
<div class="toot" id="closed-565"><h2>Issue #565 closed<span class="toot-id"> #closed-565</span></h2><div class="pubdate">22 Jun at 09:29:31 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/565">https://github.com/qt4cg/qtspecs/pull/565</a></div><p>More typographic changes</p></div>
<div class="toot" id="created-565"><h2>Pull request #565 created<span class="toot-id"> #created-565</span></h2><div class="pubdate">22 Jun at 09:21:14 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/565">https://github.com/qt4cg/qtspecs/pull/565</a></div><details><summary>More typographic changes</summary><div class="markup"><p>Further to #560, I'll just merge this if it passes.</p>
<ol>
<li>Make the <code>&lt;pre&gt;</code> font the same size as the other monospaced environments</li>
<li>Tighten up the spacing in function signatures</li>
<li>Make table-formatted examples use valign=top</li>
<li>Add subtle shading to table-formatted examples so the rows are easier to distinguish.</li>
</ol>
</div></details></div>
<div class="toot" id="created-564"><h2>Issue #564 created<span class="toot-id"> #created-564</span></h2><div class="pubdate">22 Jun at 07:54:18 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/564">https://github.com/qt4cg/qtspecs/issues/564</a></div><details><summary>Sorted maps</summary><div class="markup"><p>Based on a requirement from Michael Müller-Hillebrand on xsl-list.</p>
<p>We could define a variant of map:build() that constructs a sorted map. If a map is sorted, then:</p>
<ul>
<li>map:is-sorted() returns true.</li>
<li>map:keys() returns the keys in sorted order.</li>
<li>map:range(map, min, max) returns a sorted sub-map whose keys lie within a particular range</li>
<li>map:get-by-prefix() returns the values whose keys start with a given substring</li>
</ul>
</div></details></div>
<div class="toot" id="closed-563"><h2>Issue #563 closed<span class="toot-id"> #closed-563</span></h2><div class="pubdate">21 Jun at 12:15:38 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/563">https://github.com/qt4cg/qtspecs/pull/563</a></div><p>Style and other editorial fixes</p></div>
<div class="toot" id="created-563"><h2>Pull request #563 created<span class="toot-id"> #created-563</span></h2><div class="pubdate">21 Jun at 11:47:26 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/563">https://github.com/qt4cg/qtspecs/pull/563</a></div><details><summary>Style and other editorial fixes</summary><div class="markup"><p>This PR mostly attempts to fix #560 by making the formatting of code more consistent.</p>
<ol>
<li>I removed the reference to the W3C CSS and made a local copy</li>
<li>Added CSS variables for code parameters and tried to make use of them everywhere</li>
<li>I removed the use of "font:small" in index tables, so they're a little easier to read</li>
<li>I noticed and fixed two places where we had old-style type hierarchy diagrams</li>
</ol>
<p>These fixes aren't going to be visible in the PR build, so I'm just going to merge it.</p>
</div></details></div>
<div class="toot" id="created-562"><h2>Pull request #562 created<span class="toot-id"> #created-562</span></h2><div class="pubdate">21 Jun at 09:03:26 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/562">https://github.com/qt4cg/qtspecs/pull/562</a></div><details><summary>361: Named arguments: $input vs. $value</summary><div class="markup"><p>#361: Just an editorial one to get one more issue closed.</p>
</div></details></div>
<div class="toot" id="minutes-06-20"><h2>QT4 CG meeting 039 draft minutes<span class="toot-id"> #minutes-06-20</span></h2><div class="pubdate">20 Jun at 17:15:00 GMT</div><div class="link">Link: <a href="https://qt4cg.org/meeting/minutes/2023/06-20">https://qt4cg.org/meeting/minutes/2023/06-20</a></div><p>Draft minutes published.</p></div>
<div class="toot" id="closed-526"><h2>Issue #526 closed<span class="toot-id"> #closed-526</span></h2><div class="pubdate">20 Jun at 16:49:48 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/526">https://github.com/qt4cg/qtspecs/issues/526</a></div><p>load-xquery-module() needs changes to account for functions with an arity range</p></div>
<div class="toot" id="closed-548"><h2>Issue #548 closed<span class="toot-id"> #closed-548</span></h2><div class="pubdate">20 Jun at 16:49:09 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/548">https://github.com/qt4cg/qtspecs/issues/548</a></div><p>Space separation in lambda expressions</p></div>
<div class="toot" id="created-561"><h2>Issue #561 created<span class="toot-id"> #created-561</span></h2><div class="pubdate">20 Jun at 16:44:54 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/561">https://github.com/qt4cg/qtspecs/issues/561</a></div><details><summary>Alias for `function` keyword</summary><div class="markup"><p>See https://github.com/qt4cg/qtspecs/issues/548#issuecomment-1591023928 and the subsequent comments:</p>
<blockquote>
<p>[…] I would still be in favor to have <code>fn</code> or <code>f</code> as a plain alias for <code>function</code> (and optionally drop the thin arrow syntax), simply because function items and declarations can get so frequent:</p>
</blockquote>
<pre><code class="language-xquery">fn($a) { $a + 1 }
fn { . + 1 }
</code></pre>
</div></details></div></div><p>See 1037
            more statuses in yearly archives.</p></article></main></body></html>