<!DOCTYPE HTML><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta charset="UTF-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1"><link rel="stylesheet" href="/css/status.css"><title>@qt4cg statuses</title></head><body><main><article><h1>@qt4cg statuses</h1><p>This page displays recent status
            updates
            about the QT4CG project.</p><p>The are also captured in <a href="status.rss">an RSS feed</a>.</p><p>By year: <a href="2024/">2024</a>, <a href="2023/">2023</a>, <a href="2022/">2022</a>, <a href="2021/">2021</a>, <a href="2020/">2020</a></p><div class="toots">
<div class="toot" id="created-1070"><h2>Issue #1070 created<span class="toot-id"> #created-1070</span></h2><div class="pubdate">08 Mar at 23:10:01 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1070">https://github.com/qt4cg/qtspecs/issues/1070</a></div><details><summary>Concise syntax for map construction</summary><div class="markup"><p>It has been suggested that we should allow a "bare braces" syntax for map construction. This would reduce visual clutter especially when defining options arguments, as in</p>
<p><code>serialize($result, map{"method": "adaptive", "indent": true()})</code></p>
<p>I believe there are no syntactic obstacles to dropping the "map" keyword. The main reason it is there was because there was competition for the construct with people doing so-called scripting extensions who wanted "bare braces" to represent blocks of statements.</p>
<p>Allowing <code>{"method": "adaptive"}</code> would align with JSON.</p>
<p>But I think we should go a step further and drop the quotes:</p>
<p><code>{method: "adaptive"}</code></p>
<p>except that we could allow a string literal if the key isn't an NCName, as with record type syntax.</p>
<p>Could we do this and still allow computed or non-string keys? I don't think we need to, the existing syntax remains available.</p>
<p>So I propose we allow:</p>
<p><code>serialize($result, {method: "adaptive", indent: true()})</code></p>
<p>While we're about it, is there any enthusiasm for allowing</p>
<p><code>serialize($result, {method: "adaptive", indent: ✅})</code>  (: U+2705 :)</p>
</div></details></div>
<div class="toot" id="closed-596"><h2>Issue #596 closed<span class="toot-id"> #closed-596</span></h2><div class="pubdate">08 Mar at 22:45:24 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/596">https://github.com/qt4cg/qtspecs/issues/596</a></div><p>Pinned values: Transforming Trees</p></div>
<div class="toot" id="created-1069"><h2>Issue #1069 created<span class="toot-id"> #created-1069</span></h2><div class="pubdate">08 Mar at 03:58:06 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1069">https://github.com/qt4cg/qtspecs/issues/1069</a></div><details><summary>fn:ucd</summary><div class="markup"><p>This issue floats the idea of a new function, <code>fn:ucd</code> (for Unicode character database).</p>
<p>The working signature would be <code>fn:ucd($codepoint as xs:positiveInteger) as map(*)?</code>.  In the returned map, each entry would have a key that is a Unicode property name (full or abbreviated) and a value that reflects the property of <code>$character</code> in the Unicode character database.</p>
<p>What would users get? Access to a deep store of character data not otherwise (easily) available, such as name, name alias, bidirectional properties, age (when it entered Unicode), breaks (word, sentence, grapheme), scripts, and dozens of other properties. See <a href="https://www.unicode.org/reports/tr44/#Property_Index">Unicode TR 44</a>. Although many properties are of specialized interest, I think most people would find at least a few of these properties of significance.</p>
<p>Can't we already do this with regular expressions? Well, no. Category escapes in XPath regular expressions, e.g., <code>\p{Lm}</code>, are based upon general categories, but the properties mentioned above cut across these general categories. For example, general category <code>Pd</code> dash is not coterminous with the property <code>Dash</code>. Property <code>Quotation_Mark</code> crosses many subcategories of <code>P</code> Punctuation.</p>
<p>A few use cases:</p>
<p><strong>Extrapolation</strong>
<code>string-to-codepoints('ɑϞ') ! ('U+' || dec-to-hex(.) || ': ' || ucd(.)('Name'))</code> would return <code>('U+251: LATIN SMALL LETTER ALPHA', 'U+3DE: GREEK LETTER KOPPA')</code></p>
<p><strong>Filtering</strong>
<code>if (some $i in string-to-codepoints($text) satisfies ucd($i)('Soft_Dotted')) then...</code></p>
<p><strong>Annotating</strong></p>
<pre><code>&lt;div class="{myfunc:most-frequent((string-to-codepoints($text) ! ucd(.)('Script')))}"&gt;
    &lt;xsl:value-of select="$text"/&gt;
&lt;/div&gt;
</code></pre>
<p>might produce</p>
<pre><code>&lt;div class="Syriac"&gt;ܡܠܟܘܬܐ ܕܫܡܝܐ ܐܝܬܝܗ̇. ܠܐ ܚܫܘܫܘܬܐ ܕܢܦܫܐ܆ ܥܡ ܝܕܥܬܐ ܕܫܪܪܐ ܕܗܠܝܢ ܕܐܝܬܝܗܝܢ&lt;/div&gt;
</code></pre>
<p>And so forth. I can think of dozens of different types of operations where <code>fn:ucd</code> might be significant.</p>
<p>Thoughts?</p>
</div></details></div>
<div class="toot" id="created-1068"><h2>Pull request #1068 created<span class="toot-id"> #created-1068</span></h2><div class="pubdate">08 Mar at 01:51:11 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1068">https://github.com/qt4cg/qtspecs/pull/1068</a></div><details><summary>73 fn:graphemes</summary><div class="markup"><p>First draft of <code>fn:graphemes</code>, in response to discussion at #73 .</p>
<p>A battery of tests will be submitted as a PR to the qt4tests repository.</p>
</div></details></div>
<div class="toot" id="closed-1067"><h2>Issue #1067 closed<span class="toot-id"> #closed-1067</span></h2><div class="pubdate">07 Mar at 13:48:18 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1067">https://github.com/qt4cg/qtspecs/issues/1067</a></div><p>fn:deep-equal: significant children</p></div>
<div class="toot" id="created-1067"><h2>Issue #1067 created<span class="toot-id"> #created-1067</span></h2><div class="pubdate">07 Mar at 12:22:18 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1067">https://github.com/qt4cg/qtspecs/issues/1067</a></div><details><summary>fn:deep-equal: significant children</summary><div class="markup"><p>The current rules of <a href="https://qt4cg.org/specifications/xpath-functions-40/Overview.html#func-deep-equal">fn:deep-equal</a> are:</p>
<blockquote>
<p>e. Let <code>significant-children($parent)</code> be the sequence of nodes obtained by applying the following steps to the children of <code>$parent</code>, in turn:
&nbsp;&nbsp;i. Comment nodes are discarded if the option <code>comments</code> is false.
&nbsp;&nbsp;ii. Processing instruction nodes are discarded if the option <code>processing-instructions</code> is false.
&nbsp;&nbsp;iii. Adjacent text nodes are merged.
…
…the sequence <code>significant-children($i1)</code> is deep-equal to the sequence <code>significant-children($i2)</code>.</p>
</blockquote>
<p>If my interpretation is correct, the following expression is now expected to return <code>true</code>…</p>
<pre><code class="language-xquery">deep-equal(
  &lt;e&gt;A&lt;!----&gt;B&lt;/e&gt;,
  &lt;e&gt;AB&lt;/e&gt;
)
</code></pre>
<p>…and we need to update various test cases (e.g. <a href="https://github.com/qt4cg/qt4tests/blob/af7640a513bd7bda9f301a0cc8334a58bb5ea78e/fn/deep-equal.xml#L2390-L2398">K2-SeqDeepEqualFunc-22</a>).</p>
</div></details></div>
<div class="toot" id="created-1066"><h2>Pull request #1066 created<span class="toot-id"> #created-1066</span></h2><div class="pubdate">06 Mar at 22:03:08 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1066">https://github.com/qt4cg/qtspecs/pull/1066</a></div><details><summary>1052 Simplify the results of parse-csv</summary><div class="markup"><p>Changes parse-csv to deliver the results in a simpler format:</p>
<p>(a) the result structure is less deeply nested: one record with four entries
(b) the actual data is delivered as a sequence of arrays of strings, closely aligned with the result of <code>csv-to-arrays</code></p>
<p>The rules in the spec have also been rearranged to reflect this, so the rules are now organised according to the values delivered for each of these four fields.</p>
<p>The examples in the spec are changed to reflect the new output format; in addition they have been editorially reorganized so each example is more self-contained, avoiding the need for extensive scrolling to find the values of variables referenced in each example.</p>
<p>Fix issue #1052</p>
</div></details></div>
<div class="toot" id="created-1065"><h2>Issue #1065 created<span class="toot-id"> #created-1065</span></h2><div class="pubdate">06 Mar at 12:34:38 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1065">https://github.com/qt4cg/qtspecs/issues/1065</a></div><details><summary>fn:format-number: further notes</summary><div class="markup"><p>This issue summarizes suggestions for <code>fn:format-number</code> from the <a href="https://qt4cg.org/meeting/minutes/2024/03-05.html">QT4 Meeting 068</a> that have not yet been incorporated into the current draft:</p>
<ul>
<li>The <a href="https://cldr.unicode.org/translation/number-currency-formats/number-and-currency-patterns">Unicode Common Locale Data Repository</a> (CLDR) should be referenced; it has recommendations for all of the languages in Unicode and some variants.</li>
<li>We could consider introducing an options map so that we can just add more things later (such as e.g. an option for using the default decimal format for parsing the picture string, see https://github.com/qt4cg/qtspecs/issues/1048#issuecomment-1978869499).</li>
</ul>
</div></details></div>
<div class="toot" id="closed-919"><h2>Issue #919 closed<span class="toot-id"> #closed-919</span></h2><div class="pubdate">06 Mar at 12:06:16 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/919">https://github.com/qt4cg/qtspecs/issues/919</a></div><p>Should predicate callbacks use EBV?</p></div>
<div class="toot" id="closed-944"><h2>Issue #944 closed<span class="toot-id"> #closed-944</span></h2><div class="pubdate">06 Mar at 12:04:55 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/944">https://github.com/qt4cg/qtspecs/issues/944</a></div><p>Coercion rules: implicit types</p></div>
<div class="toot" id="closed-1047"><h2>Issue #1047 closed<span class="toot-id"> #closed-1047</span></h2><div class="pubdate">06 Mar at 12:02:29 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1047">https://github.com/qt4cg/qtspecs/issues/1047</a></div><p>Incorrect note for `fn:some` and `fn:every`</p></div>
<div class="toot" id="closed-1064"><h2>Issue #1064 closed<span class="toot-id"> #closed-1064</span></h2><div class="pubdate">06 Mar at 09:56:20 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1064">https://github.com/qt4cg/qtspecs/pull/1064</a></div><p>340-editorial fn:format-number</p></div>
<div class="toot" id="created-1064"><h2>Pull request #1064 created<span class="toot-id"> #created-1064</span></h2><div class="pubdate">06 Mar at 09:56:14 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1064">https://github.com/qt4cg/qtspecs/pull/1064</a></div><details><summary>340-editorial fn:format-number</summary><div class="markup"><p>…an addendum to the editorial change I made yesterday; will be merged in a minute.</p>
</div></details></div>
<div class="toot" id="closed-1054"><h2>Issue #1054 closed<span class="toot-id"> #closed-1054</span></h2><div class="pubdate">06 Mar at 09:45:04 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1054">https://github.com/qt4cg/qtspecs/issues/1054</a></div><p>Spec fn:message #id using old name fn:log</p></div>
<div class="toot" id="closed-1057"><h2>Issue #1057 closed<span class="toot-id"> #closed-1057</span></h2><div class="pubdate">06 Mar at 09:45:02 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1057">https://github.com/qt4cg/qtspecs/pull/1057</a></div><p>1054 Spec fn:message #id using old name fn:log</p></div>
<div class="toot" id="created-1063"><h2>Issue #1063 created<span class="toot-id"> #created-1063</span></h2><div class="pubdate">05 Mar at 23:20:17 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1063">https://github.com/qt4cg/qtspecs/issues/1063</a></div><details><summary>deep-equal() - option to compare functions liberally</summary><div class="markup"><p>We have changed deep-equal() so it no longer automatically treats functions as not equal.</p>
<p>However, it is still in practice infeasible to use deep-equal() for comparison of test results that include function items because it is not in general possible to supply an expected result that compares true to the function item actually returned. Since comparison of test results is an important use case for deep-equal, this is a serious limitation. It affects our own process that checks that output from examples in the spec is correct: the examples for parse-csv, for example, are artificially adjusted to make test comparison feasible by eliminating the function items in the result, which reduces the pedagogical value of the examples.</p>
<p>There should be an option such as <code>strict-function-comparison=true|false</code>. If set to false, then the function properties such as name, arity, and signature are compared, but the function body is ignored and assumed equal.</p>
</div></details></div>
<div class="toot" id="minutes-03-05"><h2>QT4 CG meeting 068 draft minutes<span class="toot-id"> #minutes-03-05</span></h2><div class="pubdate">05 Mar at 17:30:00 GMT</div><div class="link">Link: <a href="https://qt4cg.org/meeting/minutes/2024/03-05">https://qt4cg.org/meeting/minutes/2024/03-05</a></div><p>Draft minutes published.</p></div>
<div class="toot" id="closed-1053"><h2>Issue #1053 closed<span class="toot-id"> #closed-1053</span></h2><div class="pubdate">05 Mar at 17:19:37 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1053">https://github.com/qt4cg/qtspecs/pull/1053</a></div><p>1047 Default predicate for some#1 and every#1</p></div>
<div class="toot" id="closed-1046"><h2>Issue #1046 closed<span class="toot-id"> #closed-1046</span></h2><div class="pubdate">05 Mar at 17:16:22 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1046">https://github.com/qt4cg/qtspecs/pull/1046</a></div><p>1038 take-while predicate no longer uses EBV</p></div>
<div class="toot" id="closed-413"><h2>Issue #413 closed<span class="toot-id"> #closed-413</span></h2><div class="pubdate">05 Mar at 17:14:04 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/413">https://github.com/qt4cg/qtspecs/issues/413</a></div><p>New function: parse-csv()</p></div>
<div class="toot" id="closed-1017"><h2>Issue #1017 closed<span class="toot-id"> #closed-1017</span></h2><div class="pubdate">05 Mar at 17:13:38 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1017">https://github.com/qt4cg/qtspecs/issues/1017</a></div><p>Change csv-to-xml() to produce an XHTML table</p></div>
<div class="toot" id="closed-1043"><h2>Issue #1043 closed<span class="toot-id"> #closed-1043</span></h2><div class="pubdate">05 Mar at 17:13:02 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1043">https://github.com/qt4cg/qtspecs/issues/1043</a></div><p>CSV parsing - "blank" rows</p></div>
<div class="toot" id="closed-1051"><h2>Issue #1051 closed<span class="toot-id"> #closed-1051</span></h2><div class="pubdate">05 Mar at 17:13:01 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1051">https://github.com/qt4cg/qtspecs/pull/1051</a></div><p>1043 Clarification of CSV edge cases</p></div>
<div class="toot" id="closed-340"><h2>Issue #340 closed<span class="toot-id"> #closed-340</span></h2><div class="pubdate">05 Mar at 17:08:20 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/340">https://github.com/qt4cg/qtspecs/issues/340</a></div><p>fn:format-number: Specifying decimal format</p></div>
<div class="toot" id="closed-1049"><h2>Issue #1049 closed<span class="toot-id"> #closed-1049</span></h2><div class="pubdate">05 Mar at 17:00:58 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1049">https://github.com/qt4cg/qtspecs/pull/1049</a></div><p>340-partial fn:format-number: Specifying decimal format</p></div>
<div class="toot" id="closed-1061"><h2>Issue #1061 closed<span class="toot-id"> #closed-1061</span></h2><div class="pubdate">05 Mar at 12:54:36 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1061">https://github.com/qt4cg/qtspecs/issues/1061</a></div><p>discussion - language pragmas</p></div>
<div class="toot" id="created-1062"><h2>Pull request #1062 created<span class="toot-id"> #created-1062</span></h2><div class="pubdate">05 Mar at 12:05:50 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1062">https://github.com/qt4cg/qtspecs/pull/1062</a></div><details><summary>150bis - revised proposal for fn:ranks</summary><div class="markup"><p>This proposal is an amended/alternative proposal for the fn:ranks function, taking into account the work done on the original issue #150 and the PR #1027 and the comments raised. Acknowledgements to the original author for the idea and for a lot of good work on examples etc.</p>
<p>It amends the previous proposal as follows:</p>
<p>(a) the signature and the semantics are aligned with fn:sort. This adds some functionality (multiple sort keys, ascending/descending) and also removes some complexity (two different collations for comparing input items and result items)</p>
<p>(b) the style of exposition is changed editorially for consistency with other functions</p>
</div></details></div>
<div class="toot" id="created-1061"><h2>Issue #1061 created<span class="toot-id"> #created-1061</span></h2><div class="pubdate">05 Mar at 10:10:45 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1061">https://github.com/qt4cg/qtspecs/issues/1061</a></div><details><summary>discussion - language pragmas</summary><div class="markup"><p>The motivation is introducing breaking changes into the language that may have value, but not enough value to justify a breaking change.</p>
<p>Haskell uses language pragmas for this, and actually most (well, a lot) Haskell code does not use the base specification, and quite common constructs (GADTs, multi param type classes) require extensions.</p>
<p>Haskell devs are used to this, it may require some referring to the the top of the file to change the pragmas but its a working solution to introducing optional things that may be breaking changes.</p>
<p>Thoughts?</p>
<p>Benefits</p>
<ul>
<li>allows breaking changes to be introduced</li>
</ul>
<p>Costs</p>
<ul>
<li>developers may have to refer to the language pragma to correctly understand the code</li>
<li>implementation explosion, extensions may not be independent and interact causing an explosion of combinations of extensions (though i think its reasonable for an implementation to just implement combinations that are practical).</li>
</ul>
<p>I'm biased, I want to introduce breaking changes, but am thwarted by the versioning strategy.</p>
</div></details></div>
<div class="toot" id="created-1060"><h2>Issue #1060 created<span class="toot-id"> #created-1060</span></h2><div class="pubdate">04 Mar at 17:57:26 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1060">https://github.com/qt4cg/qtspecs/issues/1060</a></div><details><summary>Formatting XPath/XQuery</summary><div class="markup"><p>I got reminded today that the specification documents are kind of “wild”, because all code snippets use a different formatting:</p>
<ul>
<li>The indentation is inconsistent (the tendency seems to be 2 spaces, in accordance with the function signatures). Repeatedly, indentations are used that don’t seem to follow any conventions at all.</li>
<li>Sometimes, <code>function</code>, <code>map</code> and <code>array</code> keywords are followed by a space, sometimes not. My preference would be not be too stingy; we have enough space.</li>
<li>Sometimes, the <code>return</code> keyword starts in a new line, sometimes it’s attached to the previous line.</li>
</ul>
<p>This is certainly something we cannot finalize too early, but I think we shouldn’t be too erratic in an official document, even though it’s “just code”.</p>
<p>Related: #1000.</p>
</div></details></div>
<div class="toot" id="created-1059"><h2>Pull request #1059 created<span class="toot-id"> #created-1059</span></h2><div class="pubdate">04 Mar at 15:32:01 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1059">https://github.com/qt4cg/qtspecs/pull/1059</a></div><details><summary>1019 XQFO: Unknown option parameters</summary><div class="markup"><p>Issue: #1019</p>
</div></details></div></div><p>See 2054
            more statuses in yearly archives.</p></article></main></body></html>