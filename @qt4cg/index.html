<!DOCTYPE HTML><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta charset="UTF-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1"><link rel="stylesheet" href="/css/status.css"><title>@qt4cg statuses</title></head><body><main><article><h1>@qt4cg statuses</h1><p>This page displays recent status
            updates
            about the QT4CG project.</p><p>The are also captured in <a href="status.rss">an RSS feed</a>.</p><p>By year: <a href="2024/">2024</a>, <a href="2023/">2023</a>, <a href="2022/">2022</a>, <a href="2021/">2021</a>, <a href="2020/">2020</a></p><div class="toots">
<div class="toot" id="agenda-05-07"><h2>QT4 CG meeting 076 draft agenda<span class="toot-id"> #agenda-05-07</span></h2><div class="pubdate">06 May at 09:55:00 GMT</div><div class="link">Link: <a href="https://qt4cg.org/meeting/agenda/2024/05-07">https://qt4cg.org/meeting/agenda/2024/05-07</a></div><p>Draft agenda published.</p></div>
<div class="toot" id="created-1187"><h2>Issue #1187 created<span class="toot-id"> #created-1187</span></h2><div class="pubdate">04 May at 10:55:13 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1187">https://github.com/qt4cg/qtspecs/issues/1187</a></div><details><summary>Decimal rounding</summary><div class="markup"><p>This is in response to a bug/feature request from a Saxon user: see https://saxonica.plan.io/issues/6408</p>
<p>Currently</p>
<p>(a) the round() function gives no control over rounding mode (towards zero, towards positive infinity, etc etc).</p>
<p>(b) decimal division leaves it entirely implementation-defined what the precision of the result should be, let alone what rounding is applied to attain that precision.</p>
<p>This can cause difficulties for users where, for example, financial accounting standards mandate a particular rounding mode.</p>
<p>Is this something we want to address?</p>
</div></details></div>
<div class="toot" id="created-1186"><h2>Pull request #1186 created<span class="toot-id"> #created-1186</span></h2><div class="pubdate">02 May at 11:17:02 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1186">https://github.com/qt4cg/qtspecs/pull/1186</a></div><details><summary>1170 Editorial: fn:index-where</summary><div class="markup"><p>Issue: 1170</p>
<ul>
<li>Editorial, 2 characters added</li>
<li>“2. Redundant parens in function signatures“ is obsolete (https://github.com/qt4cg/qtspecs/pull/1182/files#diff-7625c07ae8131ff65c3caa677b188ed2b9b66237312d11c05a2fa2838c6f5c67R21233)</li>
</ul>
</div></details></div>
<div class="toot" id="created-1185"><h2>Pull request #1185 created<span class="toot-id"> #created-1185</span></h2><div class="pubdate">02 May at 11:07:53 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1185">https://github.com/qt4cg/qtspecs/pull/1185</a></div><details><summary>1179 array:values, map:values → contents</summary><div class="markup"><p>Issue: #1179</p>
</div></details></div>
<div class="toot" id="created-1184"><h2>Pull request #1184 created<span class="toot-id"> #created-1184</span></h2><div class="pubdate">01 May at 21:14:36 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1184">https://github.com/qt4cg/qtspecs/pull/1184</a></div><details><summary>1165-Use Unicode-style character references</summary><div class="markup"><p>Currently only affects F+O.</p>
<p>New element <code>&lt;char&gt;U+xxxx&lt;/char&gt;</code> is supported in the DTD and XSLT. It is automatically expanded to include the character name and glyph. I was hoping to get the Unicode character names directly from the Unicode database, but that's a bit unwieldy, so I created a little file (in the style directory) containing the names of the characters that we actually use.</p>
</div></details></div>
<div class="toot" id="created-1183"><h2>Issue #1183 created<span class="toot-id"> #created-1183</span></h2><div class="pubdate">01 May at 20:24:56 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1183">https://github.com/qt4cg/qtspecs/issues/1183</a></div><details><summary>transient() - a function to make functions nondeterministic</summary><div class="markup"><p>I propose a function <code>transient()</code> which takes a function as input and returns a function that is functionally identical, but which relaxes the requirement for determinism.</p>
<p>For example, <code>transient(current-dateTime#0)</code> returns a function that returns a date and time, but is not required to return the same date and time on every call, while <code>transient(doc#1)</code> returns a function that dereferences an XML document URI, but is not required to return the same document every time it is called with the same URI.</p>
<p>A valid implementation, of course, could return the supplied function unchanged - the transient() function gives the implementation the freedom to relax the rules, but does not require it to do so.</p>
<p><code>transient()</code> seems like a more friendly name than <code>nondeterministic()</code>.</p>
</div></details></div>
<div class="toot" id="created-1182"><h2>Pull request #1182 created<span class="toot-id"> #created-1182</span></h2><div class="pubdate">30 Apr at 23:39:29 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1182">https://github.com/qt4cg/qtspecs/pull/1182</a></div><details><summary>1171 Change predicate callbacks to allow empty return value</summary><div class="markup"><p>Return type changes from <code>xs:boolean</code> to <code>xs:boolean?</code></p>
</div></details></div>
<div class="toot" id="created-1181"><h2>Pull request #1181 created<span class="toot-id"> #created-1181</span></h2><div class="pubdate">30 Apr at 22:00:20 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1181">https://github.com/qt4cg/qtspecs/pull/1181</a></div><details><summary>296 Allow default-namespace=##any</summary><div class="markup"><p>Allows the default namespace for elements and types to have the special value "##any", which causes unprefixed QNames to match elements in any namespace. Use cases include:</p>
<ul>
<li>Casual ad-hoc XPath queries, where over-retrieval isn't a problem</li>
<li>Use with HTML, where it can be unpredictable whether elements will be in a namespace, and where users are accustomed to browser behaviour with its "wilful violation" of the XPath 1.0 specification</li>
<li>Any environment where multiple namespaces are in use for variants of what is essentially the same vocabulary of element names (for example, where the XML designer has made the mistake of versioning the namespace URI)</li>
</ul>
</div></details></div>
<div class="toot" id="closed-161"><h2>Issue #161 closed<span class="toot-id"> #closed-161</span></h2><div class="pubdate">30 Apr at 20:02:27 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/161">https://github.com/qt4cg/qtspecs/issues/161</a></div><p>Support unbounded variadic functions on sequence parameters</p></div>
<div class="toot" id="closed-1137"><h2>Issue #1137 closed<span class="toot-id"> #closed-1137</span></h2><div class="pubdate">30 Apr at 20:02:27 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1137">https://github.com/qt4cg/qtspecs/pull/1137</a></div><p>161 Variadic functions</p></div>
<div class="toot" id="created-1180"><h2>Issue #1180 created<span class="toot-id"> #created-1180</span></h2><div class="pubdate">30 Apr at 18:04:27 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1180">https://github.com/qt4cg/qtspecs/issues/1180</a></div><details><summary>fn:unparsed-text: `cache` option</summary><div class="markup"><p>In #1117, we discussed the pros and cons of a <code>deterministic</code> option for <code>fn:unparsed-text</code>.</p>
<p>I would suggest  making the function strictly nondeterministic, but adding a <code>cache</code> option:</p>
<ul>
<li>That way we don’t equate determinism with caching, which can in fact be different things. For example, an implementation might decide to do deterministic things at compile time, whereas it might be better to cache data only when it’s actually requested.</li>
<li>The meaning of the option will be easier to explain to non-experts (…and avoid confusion among experts).</li>
</ul>
</div></details></div>
<div class="toot" id="minutes-04-30"><h2>QT4 CG meeting 075 draft minutes<span class="toot-id"> #minutes-04-30</span></h2><div class="pubdate">30 Apr at 17:30:00 GMT</div><div class="link">Link: <a href="https://qt4cg.org/meeting/minutes/2024/04-30">https://qt4cg.org/meeting/minutes/2024/04-30</a></div><p>Draft minutes published.</p></div>
<div class="toot" id="closed-1086"><h2>Issue #1086 closed<span class="toot-id"> #closed-1086</span></h2><div class="pubdate">30 Apr at 16:22:31 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1086">https://github.com/qt4cg/qtspecs/issues/1086</a></div><p>array:values spec cleanup</p></div>
<div class="toot" id="closed-1087"><h2>Issue #1087 closed<span class="toot-id"> #closed-1087</span></h2><div class="pubdate">30 Apr at 16:22:30 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1087">https://github.com/qt4cg/qtspecs/pull/1087</a></div><p>1086 Editorial changes to array:values</p></div>
<div class="toot" id="closed-1166"><h2>Issue #1166 closed<span class="toot-id"> #closed-1166</span></h2><div class="pubdate">30 Apr at 16:16:12 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1166">https://github.com/qt4cg/qtspecs/issues/1166</a></div><p>Invalid option keys: the rule is unclear</p></div>
<div class="toot" id="closed-1168"><h2>Issue #1168 closed<span class="toot-id"> #closed-1168</span></h2><div class="pubdate">30 Apr at 16:16:11 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1168">https://github.com/qt4cg/qtspecs/pull/1168</a></div><p>1166 Clarify rule on invalid option keys</p></div>
<div class="toot" id="closed-1173"><h2>Issue #1173 closed<span class="toot-id"> #closed-1173</span></h2><div class="pubdate">30 Apr at 16:12:28 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1173">https://github.com/qt4cg/qtspecs/issues/1173</a></div><p>array:build, map:build: Positional access</p></div>
<div class="toot" id="closed-1174"><h2>Issue #1174 closed<span class="toot-id"> #closed-1174</span></h2><div class="pubdate">30 Apr at 16:12:27 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1174">https://github.com/qt4cg/qtspecs/pull/1174</a></div><p>1173 array:build, map:build: Positional access</p></div>
<div class="toot" id="closed-1177"><h2>Issue #1177 closed<span class="toot-id"> #closed-1177</span></h2><div class="pubdate">30 Apr at 16:10:20 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1177">https://github.com/qt4cg/qtspecs/pull/1177</a></div><p>1162 Positional variables are xs:integer not xs:positiveInteger</p></div>
<div class="toot" id="closed-553"><h2>Issue #553 closed<span class="toot-id"> #closed-553</span></h2><div class="pubdate">30 Apr at 16:08:10 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/553">https://github.com/qt4cg/qtspecs/issues/553</a></div><p>New function fn:substitute()</p></div>
<div class="toot" id="created-1179"><h2>Issue #1179 created<span class="toot-id"> #created-1179</span></h2><div class="pubdate">30 Apr at 16:02:22 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1179">https://github.com/qt4cg/qtspecs/issues/1179</a></div><details><summary>Editorial: `array:values`, `map:values`</summary><div class="markup"><p>Triggered by #1087:</p>
<ol>
<li>Align <code>map:values</code> with <code>array:values</code></li>
<li>Revise notes.</li>
<li>Rename the functions.</li>
</ol>
<p>@michaelhkay You suggested that <code>content</code> might be a better name – rather than <code>item</code> – for retrieving the sequence-concatenation of values in map lookups in https://github.com/qt4cg/qtspecs/issues/1169#issuecomment-2074378446. Should we rename the functions to <code>array:contents</code>, <code>map:contents</code> or use <code>array:items</code> and <code>map:items</code>?</p>
</div></details></div>
<div class="toot" id="closed-1178"><h2>Issue #1178 closed<span class="toot-id"> #closed-1178</span></h2><div class="pubdate">30 Apr at 16:00:29 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1178">https://github.com/qt4cg/qtspecs/pull/1178</a></div><p>1146 Add inline change markup in the XPath/XQuery spec</p></div>
<div class="toot" id="created-1178"><h2>Pull request #1178 created<span class="toot-id"> #created-1178</span></h2><div class="pubdate">28 Apr at 22:51:26 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1178">https://github.com/qt4cg/qtspecs/pull/1178</a></div><details><summary>1146 Add inline change markup in the XPath/XQuery spec</summary><div class="markup"><p>There is more work to be done to ensure the change log entries are complete, but this is a good start.</p>
</div></details></div>
<div class="toot" id="closed-1159"><h2>Issue #1159 closed<span class="toot-id"> #closed-1159</span></h2><div class="pubdate">27 Apr at 20:40:02 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1159">https://github.com/qt4cg/qtspecs/issues/1159</a></div><p>Filter operator for arrays</p></div>
<div class="toot" id="created-1177"><h2>Pull request #1177 created<span class="toot-id"> #created-1177</span></h2><div class="pubdate">27 Apr at 20:36:07 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1177">https://github.com/qt4cg/qtspecs/pull/1177</a></div><details><summary>1162 Positional variables are xs:integer not xs:positiveInteger</summary><div class="markup"><p>Reverts a change that made the type xs:positiveInteger as the impact of the change was not fully explored, and the same change was not made elsewhere e.g. to the argument type of array:get() or the return type of fn:position().</p>
<p>Note: the use of xs:positiveInteger has been retained for row and column numbers in the CSV functions, and for codepoints in the fn:char() function.</p>
</div></details></div>
<div class="toot" id="created-1176"><h2>Issue #1176 created<span class="toot-id"> #created-1176</span></h2><div class="pubdate">26 Apr at 03:15:45 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1176">https://github.com/qt4cg/qtspecs/issues/1176</a></div><details><summary>Use fn:parse-uri to check whether a filepath is relative or absolute</summary><div class="markup"><p>I have a question about the new function <code>fn:parse-uri()</code>. A common use case is to check whether a file path is absolute or relative. For example, I want to check whether the file path <code>images/img1.png</code> is relative and can therefore be converted to an absolute file path using <code>resolve-uri()</code>. Or I want to check whether <code>$base</code> is absolute and can therefore be used as the second argument in <code>resolve-uri()</code>.</p>
<p>How would I use a <code>uri-structure-record</code> map determined as a result of<code> fn:parse-uri ()</code> to decide whether it is a relative or absolute file path?<br>
Greetings, Frank</p>
</div></details></div>
<div class="toot" id="created-1175"><h2>Issue #1175 created<span class="toot-id"> #created-1175</span></h2><div class="pubdate">25 Apr at 18:18:44 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1175">https://github.com/qt4cg/qtspecs/issues/1175</a></div><details><summary>XPath: Optional parameters in the definition of an inline function</summary><div class="markup"><p>This is a proposal to extend the definition of an inline-function item with the ability to specify a set of optional/keyword-value parameters, following the sequence of positional parameters of the function.</p>
<p>This is very similar to what we already have for static function definitions: https://qt4cg.org/specifications/xquery-40/xpath-40.html#dt-function-definition and https://qt4cg.org/specifications/xquery-40/xpath-40.html#id-static-functions</p>
<p>While a <strong>static function definition</strong> has the following parts:</p>
<ul>
<li>
<p>The function name, which is an <a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#dt-expanded-qname">expanded QName</a>.</p>
</li>
<li>
<p>A (possibly empty) list of required parameters, each having:</p>
</li>
<li>
<p>a parameter name (an <a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#dt-expanded-qname">expanded QName</a>)</p>
</li>
<li>
<p>a required type (a <a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#dt-sequence-type">sequence type</a>)</p>
</li>
<li>
<p>A (possibly empty) list of optional parameters, each having:</p>
</li>
<li>
<p>a parameter name (an <a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#dt-expanded-qname">expanded QName</a>)</p>
</li>
<li>
<p>a required type (a <a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#dt-sequence-type">sequence type</a>)</p>
</li>
<li>
<p>a default value expression (an expression: see <a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#id-expressions">4 Expressions</a>)</p>
</li>
<li>
<p>A return type (a <a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#dt-sequence-type">sequence type</a>)</p>
</li>
<li>
<p>A (possibly empty) set of function annotations</p>
</li>
<li>
<p>A body. The function body contains the logic that enables the function result to be computed from the supplied arguments and information in the static and dynamic context.</p>
</li>
</ul>
<p>For an <strong>inline function definition</strong> we will have:</p>
<ul>
<li>
<p>A name of a variable to contain the function item being defined.</p>
</li>
<li>
<p>A (possibly empty) list of required parameters, each having:</p>
</li>
<li>
<p>a parameter name (an <a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#dt-expanded-qname">expanded QName</a>)</p>
</li>
<li>
<p>an optional type (a <a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#dt-sequence-type">sequence type</a>)</p>
</li>
<li>
<p>A (possibly empty) list of optional parameters, each having:</p>
</li>
<li>
<p>a parameter name (an <a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#dt-expanded-qname">expanded QName</a>)</p>
</li>
<li>
<p>an optional type (a <a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#dt-sequence-type">sequence type</a>)</p>
</li>
<li>
<p>a default value expression (an expression: see <a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#id-expressions">4 Expressions</a>)</p>
</li>
<li>
<p>An optional return type (a <a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#dt-sequence-type">sequence type</a>)</p>
</li>
<li>
<p>A body. The function body contains the logic that enables the function result to be computed from the supplied arguments and information in the static and dynamic context.</p>
</li>
</ul>
<p><strong>What is accomplished by introducing optional parameters</strong>?</p>
<p>The answer is the same as for the effect of having optional parameters in a static function definition: increased <strong><em>brevity</em></strong>, <strong><em>conciseness</em></strong> and <strong><em>clarity</em></strong> .</p>
<pre><code class="language-xq">let $myFun := fn($pos1, $pos2, $posK, $kw1 := expr1, $kw2 := expr2, ...,  $kwN := exprN) { (: Some expression :)} 
</code></pre>
<p>replaces what would otherwise be a set of <code>N! + 1</code> separate inline function definitions, each of which must be assigned to a separate variable.</p>
<p>Similarly to the static function calls, with this new feature a call to such an inline function must provide values for all positional arguments, followed by an optional set (meaning in any order) of assignments of values to specific keyword-valued (optional) arguments. The rules for an inline function call are similar to those for a call to a static function - the provided values for the positional arguments must precede all other provided values and the values for the optional arguments may be provided in any order.</p>
<p>Here is a short example of an inline function definition and calling it:</p>
<pre><code class="language-xq">let $incr := fn($arg1, $increment := 1) {$arg1 + $increment }
 return
  (
   $incr(5),
   $incr(5, increment := 2),
   $incr(5, increment := 3)
 )
</code></pre>
<p>produces:</p>
<p><code>6, 7, 8</code></p>
</div></details></div>
<div class="toot" id="created-1174"><h2>Pull request #1174 created<span class="toot-id"> #created-1174</span></h2><div class="pubdate">24 Apr at 12:45:48 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1174">https://github.com/qt4cg/qtspecs/pull/1174</a></div><details><summary>1173 array:build, map:build: Positional access</summary><div class="markup"><p>Issue: #1173</p>
</div></details></div>
<div class="toot" id="closed-1110"><h2>Issue #1110 closed<span class="toot-id"> #closed-1110</span></h2><div class="pubdate">24 Apr at 12:40:10 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1110">https://github.com/qt4cg/qtspecs/issues/1110</a></div><p>New error codes</p></div>
<div class="toot" id="created-1173"><h2>Issue #1173 created<span class="toot-id"> #created-1173</span></h2><div class="pubdate">24 Apr at 10:13:38 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1173">https://github.com/qt4cg/qtspecs/issues/1173</a></div><details><summary>array:build, map:build: Positional access</summary><div class="markup"><p><code>array:build</code> seems to be the only function (for iterating over ordered input) for which the HOF parameters lacks a positional parameter:</p>
<pre><code class="language-xquery">array:build(
  $input   as item()*,	
  $action  as function(item()) as item()*  := fn:identity#1
) as array(*)

(: should be :)
array:build(
  $input   as item()*,	
  $action  as function(item(), xs:integer) as item()*  := fn:identity#1
) as array(*)
</code></pre>
</div></details></div></div><p>See 2319
            more statuses in yearly archives.</p></article></main></body></html>