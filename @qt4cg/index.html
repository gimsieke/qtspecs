<!DOCTYPE HTML><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta charset="UTF-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1"><link rel="stylesheet" href="/css/status.css"><title>@qt4cg statuses</title></head><body><main><article><h1>@qt4cg statuses</h1><p>This page displays recent status
            updates
            about the QT4CG project.</p><p>The are also captured in <a href="status.rss">an RSS feed</a>.</p><p>By year: <a href="2023/">2023</a>, <a href="2022/">2022</a>, <a href="2021/">2021</a>, <a href="2020/">2020</a></p><div class="toots">
<div class="toot" id="closed-514"><h2>Issue #514 closed<span class="toot-id"> #closed-514</span></h2><div class="pubdate">25 Jul at 15:30:03 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/514">https://github.com/qt4cg/qtspecs/issues/514</a></div><p>Lambda expression: Annotations</p></div>
<div class="toot" id="created-639"><h2>Issue #639 created<span class="toot-id"> #created-639</span></h2><div class="pubdate">25 Jul at 15:26:23 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/639">https://github.com/qt4cg/qtspecs/issues/639</a></div><details><summary>fn:void: Naming</summary><div class="markup"><p>A new function <code>fn:void</code> was added to the spec (see #359 for details).</p>
<p>This issue can be used to discuss alternative names for the function, as was suggested by @dnovatchev.</p>
</div></details></div>
<div class="toot" id="created-638"><h2>Issue #638 created<span class="toot-id"> #created-638</span></h2><div class="pubdate">25 Jul at 14:35:21 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/638">https://github.com/qt4cg/qtspecs/issues/638</a></div><details><summary>Editorial: Avoid e.g.</summary><div class="markup"><p>Occurrences of <code>e.g.</code> should be replaced with alternatives, such as <code>(for example)</code>.</p>
<p>See https://github.com/qt4cg/qtspecs/pull/629#issuecomment-1649952964</p>
</div></details></div>
<div class="toot" id="created-637"><h2>Issue #637 created<span class="toot-id"> #created-637</span></h2><div class="pubdate">25 Jul at 13:35:03 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/637">https://github.com/qt4cg/qtspecs/issues/637</a></div><details><summary>Annotation Values: Booleans</summary><div class="markup"><p>Functions annotations in XQuery have become a popular feature to attach vendor-specific information (for unit testing, locking, RESTXQ, etc.) to functions.</p>
<p>Annotation values are limited to literals, though. It would often be helpful to supply boolean values, but we don’t have literals for that in the language.</p>
<p>I suggest enhancing the existing grammar…</p>
<pre><code>Annotation  ::=  "%"&nbsp;EQName&nbsp;("("&nbsp;Literal&nbsp;(","&nbsp;Literal)* ")")?
</code></pre>
<p>…and allowing the strings <code>false()</code> and <code>true()</code> as values:</p>
<pre><code>Annotation  ::=  "%"&nbsp;EQName&nbsp;("("&nbsp;AnnotationValue&nbsp;(","&nbsp;AnnotationValue)* ")")?
AnnotationValue  :=  Literal | "false()" | "true()"
</code></pre>
<p>The suggestion is upward compatible if we should decide later on that we want to allow arbitrary expressions for annotation values.</p>
</div></details></div>
<div class="toot" id="closed-636"><h2>Issue #636 closed<span class="toot-id"> #closed-636</span></h2><div class="pubdate">25 Jul at 07:25:47 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/636">https://github.com/qt4cg/qtspecs/issues/636</a></div><p>Ternary operator</p></div>
<div class="toot" id="created-636"><h2>Issue #636 created<span class="toot-id"> #created-636</span></h2><div class="pubdate">25 Jul at 03:53:03 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/636">https://github.com/qt4cg/qtspecs/issues/636</a></div><details><summary>Ternary operator</summary><div class="markup"><p>Per #171 the WG decided to allow the ternary operator. I'm looking at <a href="https://qt4cg.org/specifications/xquery-40/xpath-40-diff.html#id-conditionals">4.16 of the current version of XPath 4.0</a> and the ternary operator is presented as illustrative, but the operator does not appear to have been properly introduced and defined in the specs. The terms "ternary", "??", and "!!" appear only twice each, and in contexts that could be confused as being illustrative.</p>
<p>By my reading, the definition of <code>[11] ExprSingle</code> should be expanded to allow a new option, call it <code>TernaryOption</code>, and to the grammar should be new entry <code>TernaryOption ::= Expr "??" ExprSingle "!!" ExprSingle</code>. Does such a definition allow any ambiguous constructs?</p>
<p>I propose that 4.16 be subdivided into two subsections, the first one briefly introducing the ternary operator and the second handling if/then statements. Slight aside: the latter should also include a note pointing out how to avoid a then branch (and an example), a courtesy to developers who are overly accustomed to the unbraced approach as to not give the braced approach much thought.</p>
</div></details></div>
<div class="toot" id="created-635"><h2>Pull request #635 created<span class="toot-id"> #created-635</span></h2><div class="pubdate">24 Jul at 16:28:37 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/635">https://github.com/qt4cg/qtspecs/pull/635</a></div><details><summary>451: Schema compatibility</summary><div class="markup"><p>This PR addresses part (not all) of issue 451.</p>
<p>It recognises that an application may use more than one schema; for example in a pipeline using multiple stylesheets, it must be possible for the first stylesheet to produce valid output that is valid input to the second, without requiring that the two stylesheet have absolutely identical schema imports. It recognises that there are cases (for example involving substitution groups) where two schemas X and Y may both include the same type T, but produce different results when an element is validated against T. So it defines a concept of schema compatibility and defines its limitations, especially on the semantics of item types such as <code>element(*,T)</code> and <code>schema-element(E)</code>. The rules for schema compatibility between different modules of a query and between different packages in a stylesheet are tightened up and brought into line with each other.</p>
</div></details></div>
<div class="toot" id="created-634"><h2>Pull request #634 created<span class="toot-id"> #created-634</span></h2><div class="pubdate">24 Jul at 13:54:14 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/634">https://github.com/qt4cg/qtspecs/pull/634</a></div><details><summary>471: Quotes (missing cases)</summary><div class="markup"><p>See Matt’s comment in https://github.com/qt4cg/qtspecs/pull/533#issuecomment-1647945368</p>
</div></details></div>
<div class="toot" id="closed-389"><h2>Issue #389 closed<span class="toot-id"> #closed-389</span></h2><div class="pubdate">22 Jul at 15:38:19 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/389">https://github.com/qt4cg/qtspecs/issues/389</a></div><p>The fn:build-uri function needs to perform URI encoding for path and query segments</p></div>
<div class="toot" id="closed-556"><h2>Issue #556 closed<span class="toot-id"> #closed-556</span></h2><div class="pubdate">22 Jul at 15:35:11 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/556">https://github.com/qt4cg/qtspecs/issues/556</a></div><p>Serialization phase 5 note unclear</p></div>
<div class="toot" id="closed-621"><h2>Issue #621 closed<span class="toot-id"> #closed-621</span></h2><div class="pubdate">22 Jul at 13:41:38 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/621">https://github.com/qt4cg/qtspecs/pull/621</a></div><p>Removed chapter 4 from XDM</p></div>
<div class="toot" id="closed-626"><h2>Issue #626 closed<span class="toot-id"> #closed-626</span></h2><div class="pubdate">22 Jul at 13:41:22 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/626">https://github.com/qt4cg/qtspecs/pull/626</a></div><p>Adjusted serialization step 5 note</p></div>
<div class="toot" id="closed-625"><h2>Issue #625 closed<span class="toot-id"> #closed-625</span></h2><div class="pubdate">22 Jul at 13:40:42 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/625">https://github.com/qt4cg/qtspecs/pull/625</a></div><p>XPath minor edits, chh. 1-2</p></div>
<div class="toot" id="created-633"><h2>Pull request #633 created<span class="toot-id"> #created-633</span></h2><div class="pubdate">22 Jul at 03:35:01 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/633">https://github.com/qt4cg/qtspecs/pull/633</a></div><details><summary>Edits ch. 4.1 through 4.15</summary><div class="markup"><p>Note, this batch of edits includes a shift from "built-in" to "system" when describing functions, per edits made in XDM.</p>
</div></details></div>
<div class="toot" id="created-632"><h2>Pull request #632 created<span class="toot-id"> #created-632</span></h2><div class="pubdate">21 Jul at 21:18:01 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/632">https://github.com/qt4cg/qtspecs/pull/632</a></div><details><summary>SENR0001: Error description updated</summary><div class="markup"><p>Observed by @line-o:
https://xmlcom.slack.com/archives/C01GVC3JLHE/p1689946671105499</p>
</div></details></div>
<div class="toot" id="created-631"><h2>Pull request #631 created<span class="toot-id"> #created-631</span></h2><div class="pubdate">21 Jul at 17:46:42 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/631">https://github.com/qt4cg/qtspecs/pull/631</a></div><details><summary>600: fn:decode-from-uri</summary><div class="markup"><p>I did my best to define rules for a counterpart of the <code>fn:encode-for-uri</code> function, including various edge cases.</p>
<p>I’m convinced that the function has been requested often enough to justify its inclusion in the spec. I’m also aware that users may have different expectations regarding the details of the conversion rules. On the other hand, this discussion can be observed for other languages as well, and that’s mostly due to the… heterogeneous history of URIs, not the actual implementations. For example, <code>URLDecode.decode</code> in Java converts the plus character to a space, and JavaScript’s <code>decodeURI</code> adopts it unchanged. I decided to convert it as well, as <code>fn:encode-for-uri</code> encodes the plus sign to <code>%2B</code>.</p>
<p>@ndw My rules have largely been inspired by your decoding rules for <code>fn:parse-uri</code>. I hope these rules can be dropped and replaced with a reference to this new function (analogous to <code>fn:build-uri</code>, which references <code>fn:encode-for-uri</code>).</p>
</div></details></div>
<div class="toot" id="agenda-07-25"><h2>QT4 CG meeting 043 draft agenda<span class="toot-id"> #agenda-07-25</span></h2><div class="pubdate">21 Jul at 08:30:05 GMT</div><div class="link">Link: <a href="https://qt4cg.org/meeting/agenda/2023/07-25">https://qt4cg.org/meeting/agenda/2023/07-25</a></div><p>Draft agenda published.</p></div>
<div class="toot" id="created-630"><h2>Pull request #630 created<span class="toot-id"> #created-630</span></h2><div class="pubdate">21 Jul at 02:53:50 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/630">https://github.com/qt4cg/qtspecs/pull/630</a></div><details><summary>XPath spec ch. 3 minor edits</summary><div class="markup"><p>Minor edits to ch. 3 of XPath spec. Note, this PR includes an adjustment to the XDM spec, in the form of a cross-reference, because the terms "string value" and "typed value" are heavily used in XDM but defined only in XPath.</p>
</div></details></div>
<div class="toot" id="created-629"><h2>Pull request #629 created<span class="toot-id"> #created-629</span></h2><div class="pubdate">20 Jul at 16:36:56 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/629">https://github.com/qt4cg/qtspecs/pull/629</a></div><details><summary>574: fn:log: Trace and discard results</summary><div class="markup"><ul>
<li>New function <code>fn:log</code></li>
<li>Rules of <code>fn:trace</code> revised</li>
</ul>
</div></details></div>
<div class="toot" id="closed-620"><h2>Issue #620 closed<span class="toot-id"> #closed-620</span></h2><div class="pubdate">20 Jul at 07:25:49 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/620">https://github.com/qt4cg/qtspecs/pull/620</a></div><p>[616] Converted X Node to x node</p></div>
<div class="toot" id="closed-622"><h2>Issue #622 closed<span class="toot-id"> #closed-622</span></h2><div class="pubdate">20 Jul at 07:24:11 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/622">https://github.com/qt4cg/qtspecs/pull/622</a></div><p>XDM minor edits, back material</p></div>
<div class="toot" id="created-628"><h2>Issue #628 created<span class="toot-id"> #created-628</span></h2><div class="pubdate">20 Jul at 07:07:24 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/628">https://github.com/qt4cg/qtspecs/issues/628</a></div><details><summary>distinct-values and duplicate-values: order of results</summary><div class="markup"><p>I've noticed that a few tests have appeared in QT4tests distinct-values() that assume the order of results is "order of first appearance" (search for <code>assert-deep-eq</code>). We should either change the tests, or change the spec to require order of first appearance.</p>
<p>Since no implementors have objected to these tests, it seems likely that implementations are delivering results in "order of first appearance", and if that is the case, then I think it would be a convenience to users to guarantee this in the spec.</p>
<p>To allow for parallel implementations, we could say that the order is undefined if ordering mode is unordered.</p>
</div></details></div>
<div class="toot" id="created-627"><h2>Pull request #627 created<span class="toot-id"> #created-627</span></h2><div class="pubdate">20 Jul at 02:39:53 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/627">https://github.com/qt4cg/qtspecs/pull/627</a></div><details><summary>Adjusted function category descriptions</summary><div class="markup"><p>Attempted revision in light of #624. Perhaps not everything is exactly right, but it should be a step in the right direction.</p>
</div></details></div>
<div class="toot" id="created-626"><h2>Pull request #626 created<span class="toot-id"> #created-626</span></h2><div class="pubdate">20 Jul at 01:47:50 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/626">https://github.com/qt4cg/qtspecs/pull/626</a></div><details><summary>Adjusted serialization step 5 note</summary><div class="markup"><p>This brief edit addresses issue #556, which I've chosen to handle apophatically.</p>
</div></details></div>
<div class="toot" id="created-625"><h2>Pull request #625 created<span class="toot-id"> #created-625</span></h2><div class="pubdate">20 Jul at 01:09:33 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/625">https://github.com/qt4cg/qtspecs/pull/625</a></div><details><summary>XPath minor edits, chh. 1-2</summary><div class="markup"><p>All minor edits. Some edits are motivated by an attempt to address broken parallelism or some other form of localized inconsistency. Does not include questions about function descriptions, raised at #624.</p>
</div></details></div>
<div class="toot" id="created-624"><h2>Issue #624 created<span class="toot-id"> #created-624</span></h2><div class="pubdate">19 Jul at 22:56:34 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/624">https://github.com/qt4cg/qtspecs/issues/624</a></div><details><summary>XPath function definition clarification</summary><div class="markup"><p>In the XPath specs, 2.2, <a href="https://qt4cg.org/specifications/xquery-40/xpath-40-diff.html#dt-function-definition">function definitions</a>, the reader is informed that every (statically known) function definition takes one of three mutually exclusive categories: application, system, or external.</p>
<blockquote>
<p>[Definition: Application functions are function definitions written in a host language such as XQuery or XSLT whose semantics are defined in this family of specifications. Their behavior (including the rules determining the static and dynamic context) follows the rules for such functions in the relevant host language specification.]</p>
</blockquote>
<p>The first sentence appears to point to user-written functions in the host languages, and the second sentence appears to point to functions defined by the host language specifications. I assume that this category is meant to include both, and I propose the language be tightened up to make that clear. If my assumption is incorrect, then some other type of revision is needed.</p>
<p>Later on, when the term “built-in function” is introduced, it is not as clearly stated as it should be how that term maps onto the three-way division. It seems that “built-in function” encompasses all system functions and only those application functions that are defined by the specifications, and not user-written functions. Whatever the case, and whatever the best path of revision, this paragraph would be most effective if moved up with the tripartite category discussion.</p>
<p>The term "external function" is introduced here in the static context, with language that is highly suggestive of a definition. But the definition proper is reserved for the dynamic context, and in shorter, different prose that I think loses some of the considerations provided in the static context. I propose that the two passages be consolidated and located in the static context, where the two other types of functions are defined, with an xref in the dynamic context to the meaning of external function.</p>
<p>Down in the dynamic context:</p>
<blockquote>
<p>The dynamically known function definitions may include external functions.</p>
</blockquote>
<p>This sentence is a bit puzzling, because of course they are allowed to include all three types of functions -- none are forbidden, since, after all, the dynamically known functions are a superset of statically known ones. Perhaps the point is to drawn the reader's attention to those functions that are known dynamically but not statically? Perhaps this revision?: "Many of the function definitions known dynamically but not statically will be external functions, but they may include user-written application functions written in a host language, known only dynamically, e.g., through <code>fn:transform</code>."</p>
<p>Cumulatively the above points could go beyond mere minor touch-up, so comments are welcome before I attempt any edits.</p>
</div></details></div>
<div class="toot" id="closed-573"><h2>Issue #573 closed<span class="toot-id"> #closed-573</span></h2><div class="pubdate">19 Jul at 21:58:12 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/573">https://github.com/qt4cg/qtspecs/issues/573</a></div><p>Node construction functions</p></div>
<div class="toot" id="created-623"><h2>Pull request #623 created<span class="toot-id"> #created-623</span></h2><div class="pubdate">19 Jul at 16:51:53 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/623">https://github.com/qt4cg/qtspecs/pull/623</a></div><details><summary>93: sort descending</summary><div class="markup"><p>Enhances fn:sort to allow multiple major-to-minor sort keys each of which can independently specify a collation and an ascending/descending option.</p>
<p>Also includes infrastructure changes to allow occurrence indicators on function arguments or results that reference a named record type.</p>
<p>Similar changes will be needed for array:sort; to reduce the risk of rework I propose to make those changes after this PR has been reviewed and accepted.</p>
<p>Fix #93</p>
</div></details></div>
<div class="toot" id="created-622"><h2>Pull request #622 created<span class="toot-id"> #created-622</span></h2><div class="pubdate">19 Jul at 00:51:45 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/622">https://github.com/qt4cg/qtspecs/pull/622</a></div><details><summary>XDM minor edits, back material</summary><div class="markup"><p>Note, the example was invalid because of a failure to access the included xsd file.</p>
</div></details></div>
<div class="toot" id="created-621"><h2>Pull request #621 created<span class="toot-id"> #created-621</span></h2><div class="pubdate">18 Jul at 22:52:59 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/621">https://github.com/qt4cg/qtspecs/pull/621</a></div><details><summary>Removed chapter 4 from XDM</summary><div class="markup"><p>As noted in Slack, chapter 4 of the XDM specs is out of place. In this PR I have moved the very general material in chapter 4 to the preamble of chapter 6 (now 5), which provided the opportunity to orient the reader to the structure of that chapter.</p>
<p>Cross-references to chapter 4 have been search for and dealt with. The CSS deletion comes from my observation that there is no such class <code>infoset-mapping</code> in the resultant HTML file; section 4's <code>infoset-mapping</code> is an id.</p>
</div></details></div></div><p>See 1155
            more statuses in yearly archives.</p></article></main></body></html>