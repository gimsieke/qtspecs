<!DOCTYPE HTML><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta charset="UTF-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1"><link rel="stylesheet" href="/css/status.css"><title>@qt4cg statuses</title></head><body><main><article><h1>@qt4cg statuses</h1><p>This page displays recent status
            updates
            about the QT4CG project.</p><p>The are also captured in <a href="status.rss">an RSS feed</a>.</p><p>By year: <a href="2024/">2024</a>, <a href="2023/">2023</a>, <a href="2022/">2022</a>, <a href="2021/">2021</a>, <a href="2020/">2020</a></p><div class="toots">
<div class="toot" id="minutes-04-30"><h2>QT4 CG meeting 075 draft minutes<span class="toot-id"> #minutes-04-30</span></h2><div class="pubdate">30 Apr at 17:30:00 GMT</div><div class="link">Link: <a href="https://qt4cg.org/meeting/minutes/2024/04-30">https://qt4cg.org/meeting/minutes/2024/04-30</a></div><p>Draft minutes published.</p></div>
<div class="toot" id="closed-1086"><h2>Issue #1086 closed<span class="toot-id"> #closed-1086</span></h2><div class="pubdate">30 Apr at 16:22:31 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1086">https://github.com/qt4cg/qtspecs/issues/1086</a></div><p>array:values spec cleanup</p></div>
<div class="toot" id="closed-1087"><h2>Issue #1087 closed<span class="toot-id"> #closed-1087</span></h2><div class="pubdate">30 Apr at 16:22:30 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1087">https://github.com/qt4cg/qtspecs/pull/1087</a></div><p>1086 Editorial changes to array:values</p></div>
<div class="toot" id="closed-1166"><h2>Issue #1166 closed<span class="toot-id"> #closed-1166</span></h2><div class="pubdate">30 Apr at 16:16:12 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1166">https://github.com/qt4cg/qtspecs/issues/1166</a></div><p>Invalid option keys: the rule is unclear</p></div>
<div class="toot" id="closed-1168"><h2>Issue #1168 closed<span class="toot-id"> #closed-1168</span></h2><div class="pubdate">30 Apr at 16:16:11 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1168">https://github.com/qt4cg/qtspecs/pull/1168</a></div><p>1166 Clarify rule on invalid option keys</p></div>
<div class="toot" id="closed-1173"><h2>Issue #1173 closed<span class="toot-id"> #closed-1173</span></h2><div class="pubdate">30 Apr at 16:12:28 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1173">https://github.com/qt4cg/qtspecs/issues/1173</a></div><p>array:build, map:build: Positional access</p></div>
<div class="toot" id="closed-1174"><h2>Issue #1174 closed<span class="toot-id"> #closed-1174</span></h2><div class="pubdate">30 Apr at 16:12:27 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1174">https://github.com/qt4cg/qtspecs/pull/1174</a></div><p>1173 array:build, map:build: Positional access</p></div>
<div class="toot" id="closed-1177"><h2>Issue #1177 closed<span class="toot-id"> #closed-1177</span></h2><div class="pubdate">30 Apr at 16:10:20 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1177">https://github.com/qt4cg/qtspecs/pull/1177</a></div><p>1162 Positional variables are xs:integer not xs:positiveInteger</p></div>
<div class="toot" id="closed-553"><h2>Issue #553 closed<span class="toot-id"> #closed-553</span></h2><div class="pubdate">30 Apr at 16:08:10 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/553">https://github.com/qt4cg/qtspecs/issues/553</a></div><p>New function fn:substitute()</p></div>
<div class="toot" id="created-1179"><h2>Issue #1179 created<span class="toot-id"> #created-1179</span></h2><div class="pubdate">30 Apr at 16:02:22 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1179">https://github.com/qt4cg/qtspecs/issues/1179</a></div><details><summary>Editorial: `array:values`, `map:values`</summary><div class="markup"><p>Triggered by #1087:</p>
<ol>
<li>Align <code>map:values</code> with <code>array:values</code></li>
<li>Revise notes.</li>
<li>Rename the functions.</li>
</ol>
<p>@michaelhkay You suggested that <code>content</code> might be a better name – rather than <code>item</code> – for retrieving the sequence-concatenation of values in map lookups in https://github.com/qt4cg/qtspecs/issues/1169#issuecomment-2074378446. Should we rename the functions to <code>array:contents</code>, <code>map:contents</code> or use <code>array:items</code> and <code>map:items</code>?</p>
</div></details></div>
<div class="toot" id="closed-1178"><h2>Issue #1178 closed<span class="toot-id"> #closed-1178</span></h2><div class="pubdate">30 Apr at 16:00:29 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1178">https://github.com/qt4cg/qtspecs/pull/1178</a></div><p>1146 Add inline change markup in the XPath/XQuery spec</p></div>
<div class="toot" id="created-1178"><h2>Pull request #1178 created<span class="toot-id"> #created-1178</span></h2><div class="pubdate">28 Apr at 22:51:26 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1178">https://github.com/qt4cg/qtspecs/pull/1178</a></div><details><summary>1146 Add inline change markup in the XPath/XQuery spec</summary><div class="markup"><p>There is more work to be done to ensure the change log entries are complete, but this is a good start.</p>
</div></details></div>
<div class="toot" id="closed-1159"><h2>Issue #1159 closed<span class="toot-id"> #closed-1159</span></h2><div class="pubdate">27 Apr at 20:40:02 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1159">https://github.com/qt4cg/qtspecs/issues/1159</a></div><p>Filter operator for arrays</p></div>
<div class="toot" id="created-1177"><h2>Pull request #1177 created<span class="toot-id"> #created-1177</span></h2><div class="pubdate">27 Apr at 20:36:07 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1177">https://github.com/qt4cg/qtspecs/pull/1177</a></div><details><summary>1162 Positional variables are xs:integer not xs:positiveInteger</summary><div class="markup"><p>Reverts a change that made the type xs:positiveInteger as the impact of the change was not fully explored, and the same change was not made elsewhere e.g. to the argument type of array:get() or the return type of fn:position().</p>
<p>Note: the use of xs:positiveInteger has been retained for row and column numbers in the CSV functions, and for codepoints in the fn:char() function.</p>
</div></details></div>
<div class="toot" id="created-1176"><h2>Issue #1176 created<span class="toot-id"> #created-1176</span></h2><div class="pubdate">26 Apr at 03:15:45 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1176">https://github.com/qt4cg/qtspecs/issues/1176</a></div><details><summary>Use fn:parse-uri to check whether a filepath is relative or absolute</summary><div class="markup"><p>I have a question about the new function <code>fn:parse-uri()</code>. A common use case is to check whether a file path is absolute or relative. For example, I want to check whether the file path <code>images/img1.png</code> is relative and can therefore be converted to an absolute file path using <code>resolve-uri()</code>. Or I want to check whether <code>$base</code> is absolute and can therefore be used as the second argument in <code>resolve-uri()</code>.</p>
<p>How would I use a <code>uri-structure-record</code> map determined as a result of<code> fn:parse-uri ()</code> to decide whether it is a relative or absolute file path?<br>
Greetings, Frank</p>
</div></details></div>
<div class="toot" id="created-1175"><h2>Issue #1175 created<span class="toot-id"> #created-1175</span></h2><div class="pubdate">25 Apr at 18:18:44 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1175">https://github.com/qt4cg/qtspecs/issues/1175</a></div><details><summary>XPath: Optional parameters in the definition of an inline function</summary><div class="markup"><p>This is a proposal to extend the definition of an inline-function item with the ability to specify a set of optional/keyword-value parameters, following the sequence of positional parameters of the function.</p>
<p>This is very similar to what we already have for static function definitions: https://qt4cg.org/specifications/xquery-40/xpath-40.html#dt-function-definition and https://qt4cg.org/specifications/xquery-40/xpath-40.html#id-static-functions</p>
<p>While a <strong>static function definition</strong> has the following parts:</p>
<ul>
<li>
<p>The function name, which is an <a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#dt-expanded-qname">expanded QName</a>.</p>
</li>
<li>
<p>A (possibly empty) list of required parameters, each having:</p>
</li>
<li>
<p>a parameter name (an <a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#dt-expanded-qname">expanded QName</a>)</p>
</li>
<li>
<p>a required type (a <a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#dt-sequence-type">sequence type</a>)</p>
</li>
<li>
<p>A (possibly empty) list of optional parameters, each having:</p>
</li>
<li>
<p>a parameter name (an <a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#dt-expanded-qname">expanded QName</a>)</p>
</li>
<li>
<p>a required type (a <a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#dt-sequence-type">sequence type</a>)</p>
</li>
<li>
<p>a default value expression (an expression: see <a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#id-expressions">4 Expressions</a>)</p>
</li>
<li>
<p>A return type (a <a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#dt-sequence-type">sequence type</a>)</p>
</li>
<li>
<p>A (possibly empty) set of function annotations</p>
</li>
<li>
<p>A body. The function body contains the logic that enables the function result to be computed from the supplied arguments and information in the static and dynamic context.</p>
</li>
</ul>
<p>For an <strong>inline function definition</strong> we will have:</p>
<ul>
<li>
<p>A name of a variable to contain the function item being defined.</p>
</li>
<li>
<p>A (possibly empty) list of required parameters, each having:</p>
</li>
<li>
<p>a parameter name (an <a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#dt-expanded-qname">expanded QName</a>)</p>
</li>
<li>
<p>an optional type (a <a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#dt-sequence-type">sequence type</a>)</p>
</li>
<li>
<p>A (possibly empty) list of optional parameters, each having:</p>
</li>
<li>
<p>a parameter name (an <a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#dt-expanded-qname">expanded QName</a>)</p>
</li>
<li>
<p>an optional type (a <a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#dt-sequence-type">sequence type</a>)</p>
</li>
<li>
<p>a default value expression (an expression: see <a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#id-expressions">4 Expressions</a>)</p>
</li>
<li>
<p>An optional return type (a <a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#dt-sequence-type">sequence type</a>)</p>
</li>
<li>
<p>A body. The function body contains the logic that enables the function result to be computed from the supplied arguments and information in the static and dynamic context.</p>
</li>
</ul>
<p><strong>What is accomplished by introducing optional parameters</strong>?</p>
<p>The answer is the same as for the effect of having optional parameters in a static function definition: increased <strong><em>brevity</em></strong>, <strong><em>conciseness</em></strong> and <strong><em>clarity</em></strong> .</p>
<pre><code class="language-xq">let $myFun := fn($pos1, $pos2, $posK, $kw1 := expr1, $kw2 := expr2, ...,  $kwN := exprN) { (: Some expression :)} 
</code></pre>
<p>replaces what would otherwise be a set of <code>N! + 1</code> separate inline function definitions, each of which must be assigned to a separate variable.</p>
<p>Similarly to the static function calls, with this new feature a call to such an inline function must provide values for all positional arguments, followed by an optional set (meaning in any order) of assignments of values to specific keyword-valued (optional) arguments. The rules for an inline function call are similar to those for a call to a static function - the provided values for the positional arguments must precede all other provided values and the values for the optional arguments may be provided in any order.</p>
<p>Here is a short example of an inline function definition and calling it:</p>
<pre><code class="language-xq">let $incr := fn($arg1, $increment := 1) {$arg1 + $increment }
 return
  (
   $incr(5),
   $incr(5, increment := 2),
   $incr(5, increment := 3)
 )
</code></pre>
<p>produces:</p>
<p><code>6, 7, 8</code></p>
</div></details></div>
<div class="toot" id="created-1174"><h2>Pull request #1174 created<span class="toot-id"> #created-1174</span></h2><div class="pubdate">24 Apr at 12:45:48 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1174">https://github.com/qt4cg/qtspecs/pull/1174</a></div><details><summary>1173 array:build, map:build: Positional access</summary><div class="markup"><p>Issue: #1173</p>
</div></details></div>
<div class="toot" id="closed-1110"><h2>Issue #1110 closed<span class="toot-id"> #closed-1110</span></h2><div class="pubdate">24 Apr at 12:40:10 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1110">https://github.com/qt4cg/qtspecs/issues/1110</a></div><p>New error codes</p></div>
<div class="toot" id="created-1173"><h2>Issue #1173 created<span class="toot-id"> #created-1173</span></h2><div class="pubdate">24 Apr at 10:13:38 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1173">https://github.com/qt4cg/qtspecs/issues/1173</a></div><details><summary>array:build, map:build: Positional access</summary><div class="markup"><p><code>array:build</code> seems to be the only function (for iterating over ordered input) for which the HOF parameters lacks a positional parameter:</p>
<pre><code class="language-xquery">array:build(
  $input   as item()*,	
  $action  as function(item()) as item()*  := fn:identity#1
) as array(*)

(: should be :)
array:build(
  $input   as item()*,	
  $action  as function(item(), xs:integer) as item()*  := fn:identity#1
) as array(*)
</code></pre>
</div></details></div>
<div class="toot" id="created-1172"><h2>Issue #1172 created<span class="toot-id"> #created-1172</span></h2><div class="pubdate">24 Apr at 10:08:33 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1172">https://github.com/qt4cg/qtspecs/issues/1172</a></div><details><summary>Iterating maps: Positional access</summary><div class="markup"><p>With the new filter expression for maps, the context position is available. To be consistent, if we want to provide positional access for unordered data, we should…</p>
<ul>
<li>either provide this for map functions  as well (<code>map:filter</code>, <code>map:for-each</code>), or</li>
<li>don’t provide it for map predicates at all.</li>
</ul>
</div></details></div>
<div class="toot" id="created-1171"><h2>Issue #1171 created<span class="toot-id"> #created-1171</span></h2><div class="pubdate">24 Apr at 10:02:05 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1171">https://github.com/qt4cg/qtspecs/issues/1171</a></div><details><summary>Predicates returning xs:boolean vs. xs:boolean?</summary><div class="markup"><p>In <a href="https://qt4cg.org/specifications/xquery-40/xquery-40.html#id-filter-maps-and-arrays">4.13.4  Filter Expressions for Maps and Arrays</a>, the type of the predicate expression <code>FILTER</code> is <code>xs:boolean?</code>.</p>
<p>To be consistent, we should either relax the types of the predicate/filter functions (for <code>fn:filter</code>, etc.) or stick with <code>xs:boolean</code>.</p>
</div></details></div>
<div class="toot" id="created-1170"><h2>Issue #1170 created<span class="toot-id"> #created-1170</span></h2><div class="pubdate">24 Apr at 07:31:05 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1170">https://github.com/qt4cg/qtspecs/issues/1170</a></div><details><summary>Editorial: fn:index-where; parentheses; …</summary><div class="markup"><h4>1. fn:index-where, array:index-where</h4>
<blockquote>
<p>Returns the position in an input ...</p>
</blockquote>
<p>→ positions</p>
<h4>2. Redundant parens in function signatures</h4>
<pre><code>as (function(xs:anyAtomicType, item()*) as xs:boolean)
...
</code></pre>
</div></details></div>
<div class="toot" id="created-1169"><h2>Issue #1169 created<span class="toot-id"> #created-1169</span></h2><div class="pubdate">24 Apr at 06:35:25 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1169">https://github.com/qt4cg/qtspecs/issues/1169</a></div><details><summary>Maps &amp; Arrays: Consistency &amp; Terminology</summary><div class="markup"><p>After the introduction of #1094 and #1159, and before adding more map/array operations, I think it’s time to get more serious about consistency and terminology. The current drafts employ a variety of terms that are not clearly defined, or separated from each other. We now have at least…</p>
<blockquote>
<p>items, members, pairs, keys, values, entries</p>
</blockquote>
<p>…which are sometimes used for maps, for arrays, or for both data structures. A first attempt to clean up, with reducing the overall effort:</p>
<ol>
<li>
<p>A minor one: The modifier for lookups should be in singular form, analagous to node axes: <code>item</code>, <code>key</code>, <code>value</code>, <code>pair</code>.</p>
</li>
<li>
<p>While I first advocated the orthogonality principle for axes in lookup expressions, I now think we should stick to the existing terminology. Otherwise, we would need to revise many other existing parts of the spec. My suggestion would be to:</p>
</li>
</ol>
<ul>
<li>introduce <code>member</code> for arrays</li>
<li>only allow <code>key</code>, <code>value</code> and <code>pair</code> for maps</li>
<li>allow <code>items</code> for both maps and arrays</li>
</ul>
<p>This would make it symmetric with a) the current terminology for maps and arrays, and b) enhanced <code>for</code> clauses, i.e. <code>for member $m</code> and <code>for key $k value $v</code>.</p>
<p>The reverse approach would be to drop <code>for member $m</code> and to also allow <code>for key $k value $v</code> for arrays (with <code>for value</code> replacing <code>for member</code>). In addition, we could have <code>for pair</code>.</p>
<ol start="3">
<li>
<p>With the introduction of the <code>item</code> axis, <code>map:values</code> and <code>arrays:values</code> should be renamed to <code>map:items</code> and <code>array:items</code>.</p>
</li>
<li>
<p>I would suggest dropping <code>array:members</code> and <code>array:of-members</code>. The names don’t imply we’ll deal with records, and it’s not in line with <code>for member $m</code> either. If we want to keep these functions, we could rename them to <code>array:pairs</code> and <code>array:of-pairs</code> and add the integer positions as keys, and we should introduce and consistently use the term <code>pair</code> for maps and arrays.</p>
</li>
</ol>
<p>Closely related: #826</p>
</div></details></div>
<div class="toot" id="closed-1125"><h2>Issue #1125 closed<span class="toot-id"> #closed-1125</span></h2><div class="pubdate">23 Apr at 22:48:05 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1125">https://github.com/qt4cg/qtspecs/pull/1125</a></div><p>1094 Enhanced lookup expressions</p></div>
<div class="toot" id="closed-1094"><h2>Issue #1094 closed<span class="toot-id"> #closed-1094</span></h2><div class="pubdate">23 Apr at 22:48:05 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1094">https://github.com/qt4cg/qtspecs/issues/1094</a></div><p>Axis steps in lookup expressions</p></div>
<div class="toot" id="minutes-04-23"><h2>QT4 CG meeting 074 draft minutes<span class="toot-id"> #minutes-04-23</span></h2><div class="pubdate">23 Apr at 17:10:00 GMT</div><div class="link">Link: <a href="https://qt4cg.org/meeting/minutes/2024/04-23">https://qt4cg.org/meeting/minutes/2024/04-23</a></div><p>Draft minutes published.</p></div>
<div class="toot" id="closed-1135"><h2>Issue #1135 closed<span class="toot-id"> #closed-1135</span></h2><div class="pubdate">23 Apr at 16:04:39 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1135">https://github.com/qt4cg/qtspecs/issues/1135</a></div><p>Definition of focus functions</p></div>
<div class="toot" id="closed-1157"><h2>Issue #1157 closed<span class="toot-id"> #closed-1157</span></h2><div class="pubdate">23 Apr at 16:04:38 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1157">https://github.com/qt4cg/qtspecs/pull/1157</a></div><p>1135 Correction to definition of focus functions</p></div>
<div class="toot" id="closed-1163"><h2>Issue #1163 closed<span class="toot-id"> #closed-1163</span></h2><div class="pubdate">23 Apr at 16:01:24 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1163">https://github.com/qt4cg/qtspecs/pull/1163</a></div><p>1159 Add filter expressions for maps and arrays</p></div>
<div class="toot" id="closed-235"><h2>Issue #235 closed<span class="toot-id"> #closed-235</span></h2><div class="pubdate">23 Apr at 15:59:37 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/235">https://github.com/qt4cg/qtspecs/issues/235</a></div><p>Add multiple=true() option to fn:parse-json and fn:json-doc</p></div></div><p>See 2308
            more statuses in yearly archives.</p></article></main></body></html>