<!DOCTYPE HTML><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta charset="UTF-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1"><link rel="stylesheet" href="/css/status.css"><title>@qt4cg statuses</title></head><body><main><article><h1>@qt4cg statuses</h1><p>This page displays recent status
            updates
            about the QT4CG project.</p><p>The are also captured in <a href="status.rss">an RSS feed</a>.</p><p>By year: <a href="2023/">2023</a>, <a href="2022/">2022</a>, <a href="2021/">2021</a>, <a href="2020/">2020</a></p><div class="toots">
<div class="toot" id="minutes-10-24"><h2>QT4 CG meeting 051 draft minutes<span class="toot-id"> #minutes-10-24</span></h2><div class="pubdate">24 Oct at 16:10:00 GMT</div><div class="link">Link: <a href="https://qt4cg.org/meeting/minutes/2023/10-24">https://qt4cg.org/meeting/minutes/2023/10-24</a></div><p>Draft minutes published.</p></div>
<div class="toot" id="closed-734"><h2>Issue #734 closed<span class="toot-id"> #closed-734</span></h2><div class="pubdate">24 Oct at 16:06:35 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/734">https://github.com/qt4cg/qtspecs/pull/734</a></div><p>517: fn:chain</p></div>
<div class="toot" id="closed-763"><h2>Issue #763 closed<span class="toot-id"> #closed-763</span></h2><div class="pubdate">24 Oct at 16:05:23 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/763">https://github.com/qt4cg/qtspecs/pull/763</a></div><p>686: XQFO diagnostic function documentation</p></div>
<div class="toot" id="closed-762"><h2>Issue #762 closed<span class="toot-id"> #closed-762</span></h2><div class="pubdate">24 Oct at 16:04:34 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/762">https://github.com/qt4cg/qtspecs/pull/762</a></div><p>758: XQFO minor edits 3</p></div>
<div class="toot" id="closed-653"><h2>Issue #653 closed<span class="toot-id"> #closed-653</span></h2><div class="pubdate">24 Oct at 16:04:19 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/653">https://github.com/qt4cg/qtspecs/issues/653</a></div><p>XQuery - option to suppress entity expansion</p></div>
<div class="toot" id="closed-749"><h2>Issue #749 closed<span class="toot-id"> #closed-749</span></h2><div class="pubdate">24 Oct at 16:04:18 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/749">https://github.com/qt4cg/qtspecs/pull/749</a></div><p>653: Add string literals E".." and L".." to control entity expansion</p></div>
<div class="toot" id="closed-647"><h2>Issue #647 closed<span class="toot-id"> #closed-647</span></h2><div class="pubdate">24 Oct at 16:04:07 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/647">https://github.com/qt4cg/qtspecs/issues/647</a></div><p>XQuery: import schema with multiple location hints</p></div>
<div class="toot" id="closed-659"><h2>Issue #659 closed<span class="toot-id"> #closed-659</span></h2><div class="pubdate">24 Oct at 16:04:06 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/659">https://github.com/qt4cg/qtspecs/pull/659</a></div><p>647: schema location hints</p></div>
<div class="toot" id="closed-383"><h2>Issue #383 closed<span class="toot-id"> #closed-383</span></h2><div class="pubdate">24 Oct at 16:03:15 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/383">https://github.com/qt4cg/qtspecs/issues/383</a></div><p>fn:deep-equal: Order of child elements (unordered-elements)</p></div>
<div class="toot" id="created-771"><h2>Issue #771 created<span class="toot-id"> #created-771</span></h2><div class="pubdate">24 Oct at 12:42:18 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/771">https://github.com/qt4cg/qtspecs/issues/771</a></div><details><summary>British vs. American English</summary><div class="markup"><p>Purely editorial: Some words in the specification seem to be British English (organised, generalised, behaviour), whereas the majority of the text is American English. Should this be fixed?</p>
<p>I assume there are tools to get this straight? I am too rarely affected by it to know more about it…</p>
</div></details></div>
<div class="toot" id="created-770"><h2>Pull request #770 created<span class="toot-id"> #created-770</span></h2><div class="pubdate">23 Oct at 14:03:21 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/770">https://github.com/qt4cg/qtspecs/pull/770</a></div><details><summary>566: Use fn:decode-from-uri in fn:parse-uri</summary><div class="markup"><p>I think this is sufficient to close issue 566. @ChristianGruen could you let me know if you agree?</p>
</div></details></div>
<div class="toot" id="created-769"><h2>Pull request #769 created<span class="toot-id"> #created-769</span></h2><div class="pubdate">23 Oct at 13:26:43 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/769">https://github.com/qt4cg/qtspecs/pull/769</a></div><details><summary>768: details about decode-from-uri</summary><div class="markup"><p>Closes #768</p>
</div></details></div>
<div class="toot" id="created-768"><h2>Issue #768 created<span class="toot-id"> #created-768</span></h2><div class="pubdate">23 Oct at 12:53:14 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/768">https://github.com/qt4cg/qtspecs/issues/768</a></div><details><summary>Details about decode-for-uri</summary><div class="markup"><p>I'm unclear on how <code>%XA</code> should be decoded. Is that <code>%X</code> (an error) followed by <code>A</code>, or is that <code>%XA</code> (an error)?</p>
<p>Also, a couple of typos:</p>
<pre><code>s/to an sequence/to a sequence/
s/that are no hexadecimal/that are not hexadecimal`
</code></pre>
</div></details></div>
<div class="toot" id="agenda-10-24"><h2>QT4 CG meeting 051 draft agenda<span class="toot-id"> #agenda-10-24</span></h2><div class="pubdate">23 Oct at 10:10:00 GMT</div><div class="link">Link: <a href="https://qt4cg.org/meeting/agenda/2023/10-24">https://qt4cg.org/meeting/agenda/2023/10-24</a></div><p>Draft agenda published.</p></div>
<div class="toot" id="created-767"><h2>Issue #767 created<span class="toot-id"> #created-767</span></h2><div class="pubdate">23 Oct at 09:20:20 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/767">https://github.com/qt4cg/qtspecs/issues/767</a></div><details><summary>parse-html(): case of SVG element names</summary><div class="markup"><p>Gunther Rademacher points out at https://github.com/qt4cg/qt4tests/issues/57 that the expected test results for parse-html() expect SVG elements to be output in lower case; and as far as I can see, this is consistent with the spec. But is it useful? It means we're producing XML that isn't valid according to the SVG schema, and that presumably might be rejected by tools that expect to handle valid SVG.</p>
<p>In passing, I note that it's very hard to work out from the parse-html() spec what the function actually does; it's somehow written as if it's obvious, but it never gets around to actually saying it explicitly. It also doesn't say what happens when the <code>method</code> option is omitted, as it is in these tests.</p>
<p>In addition, it seems that we don't have any tests that exercise the various options of the function, e.g. the ability to consue binary as well as character input.</p>
</div></details></div>
<div class="toot" id="created-766"><h2>Pull request #766 created<span class="toot-id"> #created-766</span></h2><div class="pubdate">19 Oct at 22:45:58 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/766">https://github.com/qt4cg/qtspecs/pull/766</a></div><details><summary>765 Update version references etc to 4.0 status</summary><div class="markup"><p>Includes the following changes:</p>
<ul>
<li>Clarification of the syntax and semantics of the version number in the XQuery version declaration</li>
<li>Updates to front and back matter to reflect the current status of the 4.0 specs</li>
<li>Update cross-spec references to point to the 4.0 specs rather than 3.1 specs</li>
<li>A DTD change from spec="SER40" to spec="SE40" to reflect the name of the /etc file generated by the gradle script.</li>
</ul>
<p>Fix #765</p>
</div></details></div>
<div class="toot" id="created-765"><h2>Issue #765 created<span class="toot-id"> #created-765</span></h2><div class="pubdate">19 Oct at 10:33:18 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/765">https://github.com/qt4cg/qtspecs/issues/765</a></div><details><summary>XQuery version declaration: upgrade to 4.0</summary><div class="markup"><p>The text at §5.1 does not yet acknowledge version="4.0".</p>
<p>We should also be a bit more precise about the syntax, which currently says that the version number is two integers separated by a dot. We should give a regular expression to be absolutely clear that we mean decimal integers, no underscores allowed.</p>
<p>There are a few other version references to tidy up at the same time, e.g. "XQuery is designed to meet the requirements identified by the W3C XML Query Working Group [[XQuery 3.1 Requirements]]."</p>
</div></details></div>
<div class="toot" id="created-764"><h2>Issue #764 created<span class="toot-id"> #created-764</span></h2><div class="pubdate">19 Oct at 09:07:07 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/764">https://github.com/qt4cg/qtspecs/issues/764</a></div><details><summary>XQuery: Simplify module imports</summary><div class="markup"><p>With XQuery, you can import library modules as follows:</p>
<pre><code class="language-xquery">import module namespace utils = 'http://project.org/utils' at 'org/project/utils.xq`;
utils:action()
</code></pre>
<p>If an implementation has a mechanism to resolve a namespace URI, you can also do this:</p>
<pre><code class="language-xquery">import module namespace utils = 'http://project.org/utils`;
utils:action()
</code></pre>
<p>It would be desirable to simplify this further, and be able to do one of…</p>
<pre><code class="language-xquery">(: already legal, but no namespace binding takes place :)
import module namespace 'http://project.org/utils';
(: not supported yet :)
import module namespace http://project.org/utils;
(: no URI rewriting needed for relative paths :)
import module namespace org/project/utils;

utils:action()
</code></pre>
<p>…and…</p>
<ol>
<li>rewrite namespace URIs to local paths (this is how we proceed: https://docs.basex.org/wiki/Java_Bindings#URI_Rewriting)</li>
<li>extract the prefix from the path.</li>
</ol>
<p>I can imagine that the current ways to simplify imports depend a lot on the used implementations. Suggestions are welcome.</p>
</div></details></div>
<div class="toot" id="closed-759"><h2>Issue #759 closed<span class="toot-id"> #closed-759</span></h2><div class="pubdate">19 Oct at 05:41:18 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/759">https://github.com/qt4cg/qtspecs/issues/759</a></div><p>Serialization: JSON Parameters</p></div>
<div class="toot" id="created-763"><h2>Pull request #763 created<span class="toot-id"> #created-763</span></h2><div class="pubdate">19 Oct at 04:44:59 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/763">https://github.com/qt4cg/qtspecs/pull/763</a></div><details><summary>686: XQFO diagnostic function documentation</summary><div class="markup"><p>I think what prompted my original ticket was the use of "output". That term is used scores of times in the specs, and it always implies the output of a function within the XPath expression. Although the term is qualified in the diagnostic functions with the adjective "trace" or "log", it's tempting to think of the function's actual output. Coming back a few weeks later, I think some gentle massaging (instead of a convoluted preamble) can help readers not make the requisite adjustment, reflected in the present PR.</p>
<p>I have offered two examples that I hope show the practical side of these functions. I might have missed something though, so please chime in.</p>
</div></details></div>
<div class="toot" id="created-762"><h2>Pull request #762 created<span class="toot-id"> #created-762</span></h2><div class="pubdate">19 Oct at 03:38:34 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/762">https://github.com/qt4cg/qtspecs/pull/762</a></div><details><summary>758: XQFO minor edits 3</summary><div class="markup"><p>This covers edits to XQFO 4 through 5.3, and incorporates the suggestion in #758</p>
</div></details></div>
<div class="toot" id="closed-746"><h2>Issue #746 closed<span class="toot-id"> #closed-746</span></h2><div class="pubdate">18 Oct at 20:54:43 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/746">https://github.com/qt4cg/qtspecs/issues/746</a></div><p>break-when -&gt; split-when in fn:partition</p></div>
<div class="toot" id="created-761"><h2>Pull request #761 created<span class="toot-id"> #created-761</span></h2><div class="pubdate">18 Oct at 20:42:49 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/761">https://github.com/qt4cg/qtspecs/pull/761</a></div><details><summary>554/754 Simplify the new transitive-closure function</summary><div class="markup"><p>Drops the <code>$min</code> and <code>$max</code> parameters, with the effect that this corresponds much more closely to the general computer-science definition of a transitive closure.</p>
<p>The function now computes the set of nodes delivered by the transitive closure of the supplied <code>$step</code> function when applied to a given <code>$start</code> node, rather than returning a function item that must then be applied to the chosen $start node. This is hopefully easier for most users to understand, and does not lose any useful functionality.</p>
<p>The <code>$min</code> parameter of the old function is effectively forced to its default value of 1, and the $max value to its default of infinity.</p>
<p>Fix #754
Fix #554</p>
<p>This PR addresses the main points of #554 in making the function correspond more closely to the mathematical (or at least the computer-science) definition of transitive closure. It doesn't implement other ideas in #554, like returning the depth of search alongside the actual closure. That's because I believe in the principle that wherever possible a function should do one thing in as simple a way as possible.</p>
</div></details></div>
<div class="toot" id="created-760"><h2>Issue #760 created<span class="toot-id"> #created-760</span></h2><div class="pubdate">18 Oct at 08:47:05 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/760">https://github.com/qt4cg/qtspecs/issues/760</a></div><details><summary>Serialize functions: consistency</summary><div class="markup"><p>We should be more ambitious about ensuring consistency when serializing data back to its original representation, and how to achieve it. This is the status quo:</p>
<p>Format| Serialize Function | Parse Function
--- | --- | ---
<strong>XML</strong> | <code>fn:serialize($input)</code> | <code>fn:parse-xml</code>
<strong>JSON</strong> | <code>fn:serialize($input, map { 'method': 'json' })</code> | <code>fn:parse-json</code>
<strong>JSON</strong> | <code>fn:xml-to-json($input)</code> | <code>fn:json-to-xml</code>
<strong>XHTML</strong> | <code>fn:serialize($input, map { 'method': 'xhtml' })</code> | <code>fn:parse-html</code>
<strong>HTML</strong> | <code>fn:serialize($input, map { 'method': 'html' })</code> | <code>fn:parse-html</code>
<strong>CSV</strong> | <em>still missing</em> | <code>fn:parse-csv</code> and variants</p>
<p>In BaseX, the XML created by <code>fn:json-to-xml</code> can already be serialized back to JSON as follows (related: #759):</p>
<pre><code class="language-xquery">serialize(
  &lt;map xmlns="http://www.w3.org/2005/xpath-functions"&gt;
    &lt;number key="A"&gt;1&lt;/number&gt;
  &lt;/map&gt;,
  map { 'method': 'json', 'json': map { 'format': 'basic' }
})
</code></pre>
<p>For CSV, we’ve introduced a CSV serialization method that supports all CSV flavors we support (see <a href="docs.basex.org/wiki/CSV_Module">CSV Module</a> for more details):</p>
<pre><code class="language-xquery">serialize(
  &lt;map xmlns="http://www.w3.org/2005/xpath-functions"&gt;
    &lt;number key="A"&gt;1&lt;/number&gt;
  &lt;/map&gt;,
  map { 'method': 'csv', 'csv': map { 'format': 'direct' }
})
</code></pre>
<p>Related (parse functions): #748</p>
</div></details></div>
<div class="toot" id="created-759"><h2>Issue #759 created<span class="toot-id"> #created-759</span></h2><div class="pubdate">18 Oct at 08:41:04 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/759">https://github.com/qt4cg/qtspecs/issues/759</a></div><details><summary>Serialization: JSON Parameters</summary><div class="markup"><p>We have more and more serialization parameters that are specific to JSON (related: #530, #756, #576, #641). It won’t get better with each new option we add, so maybe it’s time to introduce a custom serialization parameter for JSON (and possibly other methods):</p>
<pre><code class="language-xquery">serialize(
  map { "abc": 123 },
  map { 'method': 'json', 'json': map { 'escape-solidus': true(), 'number-format':'#' }
})
</code></pre>
<p>If we want to be able to use output options in the XQuery prolog, we additionally need to define a syntax for serializing the options to a single string:</p>
<pre><code class="language-xquery">declare namespace output = 'http://www.w3.org/2010/xslt-xquery-serialization';
declare option output:method 'json';
declare option output:json 'escape-solidus=yes,number-format=#';
map { "abc": 123 }
</code></pre>
<p>Both suggestions are inspired by our own implementation; we use it for our custom JSON and CSV options.</p>
</div></details></div>
<div class="toot" id="closed-706"><h2>Issue #706 closed<span class="toot-id"> #closed-706</span></h2><div class="pubdate">18 Oct at 06:53:42 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/706">https://github.com/qt4cg/qtspecs/issues/706</a></div><p>FLWOR: for member $m1 in $a1, member $m2 in $a2</p></div>
<div class="toot" id="closed-752"><h2>Issue #752 closed<span class="toot-id"> #closed-752</span></h2><div class="pubdate">18 Oct at 06:53:41 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/752">https://github.com/qt4cg/qtspecs/pull/752</a></div><p>706: Fix "for member" grammar problems</p></div>
<div class="toot" id="closed-750"><h2>Issue #750 closed<span class="toot-id"> #closed-750</span></h2><div class="pubdate">18 Oct at 06:45:12 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/750">https://github.com/qt4cg/qtspecs/issues/750</a></div><p>xsl:mode/@as and built-in template rules</p></div>
<div class="toot" id="closed-751"><h2>Issue #751 closed<span class="toot-id"> #closed-751</span></h2><div class="pubdate">18 Oct at 06:45:11 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/751">https://github.com/qt4cg/qtspecs/pull/751</a></div><p>QT4CG-048-01: xsl:mode/@as with built-in templates</p></div>
<div class="toot" id="closed-740"><h2>Issue #740 closed<span class="toot-id"> #closed-740</span></h2><div class="pubdate">18 Oct at 06:32:38 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/740">https://github.com/qt4cg/qtspecs/pull/740</a></div><p>QT4CG-047-01: Rename break-when to split-when, plus minor editorial cleanup</p></div></div><p>See 1417
            more statuses in yearly archives.</p></article></main></body></html>