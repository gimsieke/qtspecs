<!DOCTYPE HTML><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta charset="UTF-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1"><link rel="stylesheet" href="/css/status.css"><title>@qt4cg statuses</title></head><body><main><article><h1>@qt4cg statuses</h1><p>This page displays recent status
            updates
            about the QT4CG project.</p><p>The are also captured in <a href="status.rss">an RSS feed</a>.</p><p>By year: <a href="2024/">2024</a>, <a href="2023/">2023</a>, <a href="2022/">2022</a>, <a href="2021/">2021</a>, <a href="2020/">2020</a></p><div class="toots">
<div class="toot" id="agenda-02-27"><h2>QT4 CG meeting 067 draft agenda<span class="toot-id"> #agenda-02-27</span></h2><div class="pubdate">26 Feb at 11:45:00 GMT</div><div class="link">Link: <a href="https://qt4cg.org/meeting/agenda/2024/02-27">https://qt4cg.org/meeting/agenda/2024/02-27</a></div><p>Draft agenda published.</p></div>
<div class="toot" id="created-1044"><h2>Issue #1044 created<span class="toot-id"> #created-1044</span></h2><div class="pubdate">26 Feb at 10:50:11 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1044">https://github.com/qt4cg/qtspecs/issues/1044</a></div><details><summary>CSV row delimiter - allowed values</summary><div class="markup"><p>Section 15.4.2.1 says:</p>
<blockquote>
<p>The row delimiter defaults to matching any of CRLF (
), LF (
), or CR (
). Valid values for the row delimiter are a single Unicode character, or one of CRLF, LF, or CR, that has not been marked for use as the column delimiter. Implementations must raise [[err:FOCV0002](] if the row-delimiter option is set to a multi-character string other than CRLF (
)</p>
</blockquote>
<ol>
<li>It's not entirely clear to me what this is saying. Are alternative row delimiters other than newline delimiters allowed (<code>row-delimiter:('|','/')</code>?</li>
<li>The statement in this section doesn't align with the error conditions appearing in the actual function specs, which says: "A dynamic error [[err:FOCV0002] occurs if one or more of the values for field-delimiter or quote-character are specified and are not a single character." - no mention here of the row-delimiter.</li>
</ol>
</div></details></div>
<div class="toot" id="created-1043"><h2>Issue #1043 created<span class="toot-id"> #created-1043</span></h2><div class="pubdate">26 Feb at 08:59:44 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1043">https://github.com/qt4cg/qtspecs/issues/1043</a></div><details><summary>CSV parsing - "blank" rows</summary><div class="markup"><p>The CSV parsing specification states "A blank row is represented as an empty array.".</p>
<ol>
<li>
<p>It's not clear what "blank" means here. Does it depend on the whitespace-trimming option?</p>
</li>
<li>
<p>It would be more logical to return an array containing a single zero-length string, since any other line containing no field delimiter is considered to contain one field.</p>
</li>
<li>
<p>Alternatively, it might make sense to ignore the row entirely.</p>
</li>
</ol>
</div></details></div>
<div class="toot" id="created-1042"><h2>Pull request #1042 created<span class="toot-id"> #created-1042</span></h2><div class="pubdate">26 Feb at 00:11:20 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1042">https://github.com/qt4cg/qtspecs/pull/1042</a></div><details><summary>1016 Editorial cleanup - csv-to-arrays</summary><div class="markup"><p>The changes here are almost entirely editorial, reordering material, removing duplication and changing some of the language for consistency with the rest of the spec. There is one substantive change - the function <code>csv-to-simple-rows</code> is renamed <code>csv-to-arrays</code>.</p>
<p>Fix #1016</p>
</div></details></div>
<div class="toot" id="created-1041"><h2>Pull request #1041 created<span class="toot-id"> #created-1041</span></h2><div class="pubdate">23 Feb at 10:47:00 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1041">https://github.com/qt4cg/qtspecs/pull/1041</a></div><details><summary>236 map:build: sequence of keys</summary><div class="markup"><p>Issue: #236</p>
</div></details></div>
<div class="toot" id="created-1040"><h2>Pull request #1040 created<span class="toot-id"> #created-1040</span></h2><div class="pubdate">23 Feb at 09:23:06 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1040">https://github.com/qt4cg/qtspecs/pull/1040</a></div><details><summary>485 Predeclared namespaces in XQuery: output</summary><div class="markup"><p>Issue: #485</p>
</div></details></div>
<div class="toot" id="created-1039"><h2>Issue #1039 created<span class="toot-id"> #created-1039</span></h2><div class="pubdate">22 Feb at 09:42:03 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1039">https://github.com/qt4cg/qtspecs/issues/1039</a></div><details><summary>Allow dynamic collations in XQuery "order by" and "group by"</summary><div class="markup"><p>I propose that in "order by" and "group by" clauses, the keyword "collation" should be followed by an expression rather than by a URILiteral.</p>
<p>The only problem this causes is if the expression depends on variables in the tuple stream, because obviously the collation must be selected for the tuple stream as a whole, not for each individual tuple.</p>
<p>We can solve this problem by amending the rules for the scope of variables bound in FLWOR expressions (§4.15.1 rule 1) so that collation expressions are excluded from the scope; or perhaps (it might be simpler) to make it a static error if the collation expression refers to a variable bound in the containing FLWOR expression.</p>
<p>If the syntax allows a general expression then a simple <code>"quoted-string"</code> will be interpreted as a <code>StringLiteral</code> rather than a <code>URILiteral</code>. As far as I'm aware the two things are syntactically and semantically identical so this isn't a problem.</p>
</div></details></div>
<div class="toot" id="created-1038"><h2>Issue #1038 created<span class="toot-id"> #created-1038</span></h2><div class="pubdate">21 Feb at 21:03:41 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1038">https://github.com/qt4cg/qtspecs/issues/1038</a></div><details><summary>Backwards incompatibility caused by use of EBV in callback functions</summary><div class="markup"><p>Changing fn:filter and similar functions that existed in 3.1 to use the EBV of the callback function's result has introduced a backwards incompatibility. In 3.1, the function conversion rules were used to convert the callback function's result to <code>xs:boolean</code>. This involves atomization. If the callback returned the untyped node <code>&lt;a&gt;false&lt;/a&gt;</code>, this is atomised as <code>false()</code>, but its EBV is <code>true()</code>.</p>
<p>Revealed by test case fn:filter-006.</p>
<p>I think it's unlikely to happen much in practice, but it's a bit nasty. Perhaps we shouldn't make the change to use EBV for functions that existed in 3.1?</p>
<p>Perhaps we should even consider reverting the change entirely. It's not exactly essential.</p>
</div></details></div>
<div class="toot" id="created-1037"><h2>Issue #1037 created<span class="toot-id"> #created-1037</span></h2><div class="pubdate">21 Feb at 17:22:24 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1037">https://github.com/qt4cg/qtspecs/issues/1037</a></div><details><summary>fn:json-to-xml: 'number-parser' option</summary><div class="markup"><p>A function supplied via the <code>number-parser</code> option of <code>fn:json-to-xml</code> is now allowed to return zero or more items. Analogous to the <code>action</code> argument of <code>fn:replace</code>, the result should be converted to a string by invoking <code>fn:string</code> on the result. An example:</p>
<pre><code class="language-xquery">json-to-xml('-1', map { 'number-parser': abs#1 })
→ &lt;fn:number&gt;1&lt;/fn:number&gt;

  json-to-xml('1', map { 'number-parser': fn { true#0 } })
→ err:FOTY0013
</code></pre>
<p>No change is required for <code>fn:parse-json</code>.</p>
</div></details></div>
<div class="toot" id="created-1036"><h2>Issue #1036 created<span class="toot-id"> #created-1036</span></h2><div class="pubdate">21 Feb at 13:19:40 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1036">https://github.com/qt4cg/qtspecs/issues/1036</a></div><details><summary>parse-json: liberal parsing</summary><div class="markup"><p>I noticed that some new test cases (<a href="https://github.com/qt4cg/qt4tests/blob/1859042e97f5d2ce4917bd3eef7beae4e5f64171/fn/parse-json.xml#L960-L973"><code>fn-parse-json-712</code></a>, <code>fn-parse-json-716</code>, possibly others) rely on specific liberal parsing rules.</p>
<p>@michaelhkay Do you think that it could make sense to formalize some of those rules, or should we rather fix the test cases?</p>
</div></details></div>
<div class="toot" id="closed-1005"><h2>Issue #1005 closed<span class="toot-id"> #closed-1005</span></h2><div class="pubdate">21 Feb at 10:29:09 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1005">https://github.com/qt4cg/qtspecs/issues/1005</a></div><p>regular expressions - whitespace</p></div>
<div class="toot" id="closed-709"><h2>Issue #709 closed<span class="toot-id"> #closed-709</span></h2><div class="pubdate">21 Feb at 10:29:00 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/709">https://github.com/qt4cg/qtspecs/issues/709</a></div><p>(Un)Checked Evaluation</p></div>
<div class="toot" id="closed-459"><h2>Issue #459 closed<span class="toot-id"> #closed-459</span></h2><div class="pubdate">21 Feb at 10:28:56 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/459">https://github.com/qt4cg/qtspecs/issues/459</a></div><p>Eager and lazy evaluation</p></div>
<div class="toot" id="closed-135"><h2>Issue #135 closed<span class="toot-id"> #closed-135</span></h2><div class="pubdate">21 Feb at 10:28:46 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/135">https://github.com/qt4cg/qtspecs/issues/135</a></div><p>Arrays' counterparts for functions on sequences, and vice versa</p></div>
<div class="toot" id="closed-94"><h2>Issue #94 closed<span class="toot-id"> #closed-94</span></h2><div class="pubdate">21 Feb at 10:28:34 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/94">https://github.com/qt4cg/qtspecs/issues/94</a></div><p>Functions that determine if a given sequence is a subsequence of another sequence</p></div>
<div class="toot" id="closed-43"><h2>Issue #43 closed<span class="toot-id"> #closed-43</span></h2><div class="pubdate">21 Feb at 10:28:25 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/43">https://github.com/qt4cg/qtspecs/issues/43</a></div><p>Support standard and user-defined composite values using item type definitions</p></div>
<div class="toot" id="closed-1001"><h2>Issue #1001 closed<span class="toot-id"> #closed-1001</span></h2><div class="pubdate">20 Feb at 23:53:19 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1001">https://github.com/qt4cg/qtspecs/issues/1001</a></div><p>fn:subsequence-where: equivalent `fn:slice` expression</p></div>
<div class="toot" id="closed-1020"><h2>Issue #1020 closed<span class="toot-id"> #closed-1020</span></h2><div class="pubdate">20 Feb at 23:51:19 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1020">https://github.com/qt4cg/qtspecs/issues/1020</a></div><p>When to apply the coercion rules</p></div>
<div class="toot" id="created-1035"><h2>Issue #1035 created<span class="toot-id"> #created-1035</span></h2><div class="pubdate">20 Feb at 19:04:16 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1035">https://github.com/qt4cg/qtspecs/issues/1035</a></div><details><summary>Add default values for parameters in constructor functions for records</summary><div class="markup"><p>We have added implicit constructor functions for named record types; we should allow the parameters in these functions to take explicit default values.</p>
<p>For example</p>
<p><code>declare item type my:complex as record(r as xs:double, i as xs:double := 0)</code></p>
<p>At the same time we might consider introducing fixed values, for example</p>
<p><code>declare item type my:rectangle as record(height, width, area ::= function($rect){$rect?height * $rect?width))</code></p>
<p>in which (a) the area function must NOT be supplied as an argument to the constructor function call, and (b) a map in which the area field is different from this fixed value is not a valid instance of the <code>my:rectangle</code> record type.</p>
</div></details></div>
<div class="toot" id="created-1034"><h2>Pull request #1034 created<span class="toot-id"> #created-1034</span></h2><div class="pubdate">20 Feb at 18:56:48 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1034">https://github.com/qt4cg/qtspecs/pull/1034</a></div><details><summary>QT4CG-066-xx Add note regarding absence of drop-while / skip-while</summary><div class="markup"><p>In response to comments noted in the minutes of meeting 066, and made in writing against PR #1008, add a note justifying the absence of drop-while or skip-while functions.</p>
</div></details></div>
<div class="toot" id="created-1033"><h2>Pull request #1033 created<span class="toot-id"> #created-1033</span></h2><div class="pubdate">20 Feb at 18:44:14 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1033">https://github.com/qt4cg/qtspecs/pull/1033</a></div><details><summary>QT4CG-066-01 Add note that whitespace and comments in regexen are lexical constructs</summary><div class="markup"><p>Adds a note explaining why whitespace and comments are not explicit in the regex grammar; see action QT4CG-066-01</p>
</div></details></div>
<div class="toot" id="created-1032"><h2>Pull request #1032 created<span class="toot-id"> #created-1032</span></h2><div class="pubdate">20 Feb at 18:25:18 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1032">https://github.com/qt4cg/qtspecs/pull/1032</a></div><details><summary>1029 Make argument of fn:void optional</summary><div class="markup"><p>Allows the use of <code>fn:void#0</code> when required.</p>
<p>Fix #1029</p>
</div></details></div>
<div class="toot" id="created-1031"><h2>Pull request #1031 created<span class="toot-id"> #created-1031</span></h2><div class="pubdate">20 Feb at 18:07:39 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1031">https://github.com/qt4cg/qtspecs/pull/1031</a></div><details><summary>1024 Change precedence of 'otherwise' operator</summary><div class="markup"><p>Changes the precedence of the <code>otherwise</code> operator so that <code>@price otherwise @cost * 2</code> now means <code>@price otherwise (@cost * 2)</code> rather than <code>(@price otherwise @cost) * 2</code>.</p>
<p>Fix #1024</p>
</div></details></div>
<div class="toot" id="minutes-02-20"><h2>QT4 CG meeting 066 draft minutes<span class="toot-id"> #minutes-02-20</span></h2><div class="pubdate">20 Feb at 17:30:00 GMT</div><div class="link">Link: <a href="https://qt4cg.org/meeting/minutes/2024/02-20">https://qt4cg.org/meeting/minutes/2024/02-20</a></div><p>Draft minutes published.</p></div>
<div class="toot" id="closed-999"><h2>Issue #999 closed<span class="toot-id"> #closed-999</span></h2><div class="pubdate">20 Feb at 17:25:46 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/999">https://github.com/qt4cg/qtspecs/issues/999</a></div><p>regular expression addition - comments</p></div>
<div class="toot" id="closed-1022"><h2>Issue #1022 closed<span class="toot-id"> #closed-1022</span></h2><div class="pubdate">20 Feb at 17:25:45 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1022">https://github.com/qt4cg/qtspecs/pull/1022</a></div><p>999 Allow comments in regular expressions</p></div>
<div class="toot" id="closed-1028"><h2>Issue #1028 closed<span class="toot-id"> #closed-1028</span></h2><div class="pubdate">20 Feb at 17:22:31 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1028">https://github.com/qt4cg/qtspecs/pull/1028</a></div><p>960(partial) Recognize alternative representation of JSON null</p></div>
<div class="toot" id="closed-617"><h2>Issue #617 closed<span class="toot-id"> #closed-617</span></h2><div class="pubdate">20 Feb at 17:19:27 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/617">https://github.com/qt4cg/qtspecs/issues/617</a></div><p>Implicit constructor functions for record types and union types</p></div>
<div class="toot" id="closed-953"><h2>Issue #953 closed<span class="toot-id"> #closed-953</span></h2><div class="pubdate">20 Feb at 17:19:26 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/953">https://github.com/qt4cg/qtspecs/pull/953</a></div><p>617 Define record constructors</p></div>
<div class="toot" id="closed-1002"><h2>Issue #1002 closed<span class="toot-id"> #closed-1002</span></h2><div class="pubdate">20 Feb at 17:16:05 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1002">https://github.com/qt4cg/qtspecs/issues/1002</a></div><p>Reinstate subsequence-before</p></div></div><p>See 1987
            more statuses in yearly archives.</p></article></main></body></html>