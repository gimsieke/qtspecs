<!DOCTYPE HTML><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta charset="UTF-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1"><link rel="stylesheet" href="/css/status.css"><title>@qt4cg statuses</title></head><body><main><article><h1>@qt4cg statuses</h1><p>This page displays recent status
            updates
            about the QT4CG project.</p><p>The are also captured in <a href="status.rss">an RSS feed</a>.</p><p>By year: <a href="2023/">2023</a>, <a href="2022/">2022</a>, <a href="2021/">2021</a>, <a href="2020/">2020</a></p><div class="toots">
<div class="toot" id="agenda-09-12"><h2>QT4 CG meeting 045 draft agenda<span class="toot-id"> #agenda-09-12</span></h2><div class="pubdate">11 Sep at 11:15:05 GMT</div><div class="link">Link: <a href="https://qt4cg.org/meeting/agenda/2023/09-12">https://qt4cg.org/meeting/agenda/2023/09-12</a></div><p>Draft agenda published.</p></div>
<div class="toot" id="created-691"><h2>Pull request #691 created<span class="toot-id"> #created-691</span></h2><div class="pubdate">08 Sep at 19:40:26 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/691">https://github.com/qt4cg/qtspecs/pull/691</a></div><details><summary>688 Semantics of local union types, enumeration types, etc</summary><div class="markup"><p>Fix #688.</p>
<p>This PR fleshes out the detailed semantics of local union types, enumeration types, and type aliases. It fills a number of gaps in the current specification but doesn't aim to change the overall intent.</p>
</div></details></div>
<div class="toot" id="created-690"><h2>Pull request #690 created<span class="toot-id"> #created-690</span></h2><div class="pubdate">08 Sep at 11:29:06 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/690">https://github.com/qt4cg/qtspecs/pull/690</a></div><details><summary>687 Clarify constructor functions for user-defined types</summary><div class="markup"><p>Clarifies the rules for constructor functions, especially for list and union types, and for types defined by means of type aliases rather than in an imported schema. Fix #687.</p>
</div></details></div>
<div class="toot" id="created-689"><h2>Issue #689 created<span class="toot-id"> #created-689</span></h2><div class="pubdate">08 Sep at 08:36:45 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/689">https://github.com/qt4cg/qtspecs/issues/689</a></div><details><summary>fn:stack-trace: keep or drop?</summary><div class="markup"><p>The current specification contains a diagnostic function called <a href="https://qt4cg.org/specifications/xpath-functions-40/Overview.html#func-stack-trace"><code>fn:stack-trace</code></a>. Many other languages provide a similar function: The returned output can possibly help to understand which function calls led to an error during the evaluation of a code.</p>
<p>Still, I have strong doubts that it is a good decision to include this function in the standard:</p>
<p>The specification gives you a vast amount of freedom how to implement and optimize things. As a result, it’s completely feasible and reasonable to rewrite the following code…</p>
<pre><code class="language-xquery">declare function local:double($f) {
  $f * 2
};
(1 to 6) ! local:double(.)
</code></pre>
<p>…to <code>(1 to 6) ! (. * 2)</code> at compile time. If a user adds a <code>fn:stack-overflow</code> call in the function body, s·he would expect to find the function invocation of the original code representation in the output. As always, there are technical solutions to achieve this (store additional information in the evaluation tree on the original query; suppress optimizations when <code>fn:stack-trace</code> is found), but all of them can affect the runtime behavior and lead to different evaluation trees, hiding possible bugs in the implementation (which can be a reason to call <code>fn:stack-trace</code> at all).</p>
<p>A standard should provide a minimum amount of assurance that a function behaves similarly across different implementations. At this time, I don’t believe we can’t give that guarantee.</p>
<p>Related: #55, #686</p>
<p>– As an alternative, a stack trace could optionally be created by an implementation when an error is triggered.</p>
</div></details></div>
<div class="toot" id="created-688"><h2>Issue #688 created<span class="toot-id"> #created-688</span></h2><div class="pubdate">07 Sep at 17:33:43 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/688">https://github.com/qt4cg/qtspecs/issues/688</a></div><details><summary>Coercion rules for union types and enumeration types</summary><div class="markup"><p>The coercion rules for enumeration types have not been defined (there is a TODO in the spec).</p>
<p>For union types (including both schema-defined and locally-defined union types), the rules appear to need some further work. Given types <code>R1</code> and <code>R2</code> that are defined by restriction from <code>B1</code> and <code>B2</code>, if an atomic value <code>V</code> is an instance of <code>B1</code> that conforms to the rules of <code>R1</code>, then the relabelling coercion means it V will now be acceptable where the required type is <code>R1</code>. But if the required type is <code>union(R1, R2)</code>, the relabelling coercion is not invoked. This feels inconsistent, since <code>union(R1, R2)</code> might be expected to accept anything that <code>R1</code> accepts.</p>
<p>Test case FunctionCall-056 (currently failing) illlustrates the problem.</p>
</div></details></div>
<div class="toot" id="created-687"><h2>Issue #687 created<span class="toot-id"> #created-687</span></h2><div class="pubdate">07 Sep at 15:21:50 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/687">https://github.com/qt4cg/qtspecs/issues/687</a></div><details><summary>Constructor functions for user-defined types</summary><div class="markup"><p>This is a deficiency in the 3.1 F+O specification.</p>
<p>Constructor functions for user-defined types are very poorly described:</p>
<ol>
<li>
<p>It's unclear how anonymous types are handled. The spec says there is a constructor function for every simple type in the static context. That would include anonymous types. But constructor functions for anonymous types, if they exist, are essentially useless, because their names are not known.</p>
</li>
<li>
<p>The semantics of constructor functions for user-defined list and union types are described very vaguely, by analogy with built-in types; and the analogy points to the section on built-in atomic types which doesn't cover union and list types.</p>
</li>
<li>
<p>For a union type <code>U</code>, it says that the return type of the constructor U(x) is defined as <code>xs:anyAtomicType</code>. Why not define it as <code>U</code>? Perhaps this predates the ability to use union types as return types.</p>
</li>
</ol>
</div></details></div>
<div class="toot" id="created-686"><h2>Issue #686 created<span class="toot-id"> #created-686</span></h2><div class="pubdate">06 Sep at 21:28:53 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/686">https://github.com/qt4cg/qtspecs/issues/686</a></div><details><summary>XQFO presentation of diagnostic functions</summary><div class="markup"><p>From an informal discussion on Slack, I feel that clarity is needed in the <a href="https://qt4cg.org/specifications/xpath-functions-40/Overview.html#diagnostics">Diagnostic tracing</a> section. The problem is that <code>fn:trace()</code> and <code>fn:log()</code> introduce the terms "trace output" with no definition or explanation, and this is easily confused with the primary output defined by the function signatures, and affects how readers think about the determinism of the functions. "The serialization of the trace output..." implies that the processor will necessarily serialize something, but I doubt that can or should be presumed. More needs to be said about the responsibilities of the processor in the contract for these functions.</p>
<p>In my opinion, this section would benefit from a brief preamble, providing context to set the stage for the rules. Some draft text for us to discuss:</p>
<blockquote>
<p>Diagnostic tracing functions provide a transfer of information, either from the processor to the dynamic context, or vice versa.</p>
<p>The function that transfers information from the processor to the dynamic context, <code>fn:stack-trace()</code>, returns a string that can be further processed and used in the XPath expression and elsewhere in a host language.</p>
<p>The functions that transfer information from the dynamic context to the processor, <code>fn:trace()</code> and <code>fn:log()</code>, each have two effects. The first effect, the output, pertains to the returned values, defined by the function signature and essential to the XPath expression. Such output is always deterministic. The second effect, processor behavior, concerns the way the processor handles the values bound to the parameters, supplied for diagnostic tracing. Processor behavior is always directed toward the user or environment that invoked the processor. Actions may include sending messages, serializing the values and writing them to a log file or database, or something else. Unlike the output (the first effect), the results of processor behavior are implementation-defined and nondeterministic with respect to order of the parameter values.</p>
</blockquote>
<p>The draft above attempts to avoid "output" to describe the processor-side diagnostics, so as to avoid potential confusion when dealing with the return-type defined in the signature. Where "trace output" appears in each of the rules, "processor behavior" can be used instead.</p>
<p>Questions:</p>
<ul>
<li>Any objections, corrections, or suggestions?</li>
<li>Any other examples of how a processor might use trace diagnostics?</li>
<li>Should a paragraph be added to explain briefly how <code>trace()</code> and <code>log()</code> differ from <code>xsl:message</code>? (E.g., a serialized tree should not be presumed.)</li>
<li>In the informal Balisage birds-of-a-feather discussion this summer, reservations were expressed by participants about the name <code>log()</code>. Is it possible to drop the function and simply extend the arity of <code>trace()</code> with a parameter <code>$return-input as xs:boolean? := true()</code>?</li>
</ul>
</div></details></div>
<div class="toot" id="closed-685"><h2>Issue #685 closed<span class="toot-id"> #closed-685</span></h2><div class="pubdate">06 Sep at 09:59:52 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/685">https://github.com/qt4cg/qtspecs/pull/685</a></div><p>Style fixes</p></div>
<div class="toot" id="created-685"><h2>Pull request #685 created<span class="toot-id"> #created-685</span></h2><div class="pubdate">06 Sep at 09:49:14 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/685">https://github.com/qt4cg/qtspecs/pull/685</a></div><details><summary>Style fixes</summary><div class="markup"><ol>
<li>Put the XSLT processor version comment at the end of the file instead of the beginning. Putting it before the <code>&lt;!DOCTYPE html&gt;</code> forces browsers into quirks mode.</li>
<li>Improve the XPath Functions stylesheets so that they don't put <code>div</code> elements inside <code>p</code> elements when outputting examples.</li>
</ol>
</div></details></div>
<div class="toot" id="closed-684"><h2>Issue #684 closed<span class="toot-id"> #closed-684</span></h2><div class="pubdate">06 Sep at 09:17:27 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/684">https://github.com/qt4cg/qtspecs/pull/684</a></div><p>Ignore this PR</p></div>
<div class="toot" id="closed-683"><h2>Issue #683 closed<span class="toot-id"> #closed-683</span></h2><div class="pubdate">06 Sep at 09:14:34 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/683">https://github.com/qt4cg/qtspecs/pull/683</a></div><p>XQFO context/focus in/dependent functions clarification note</p></div>
<div class="toot" id="created-684"><h2>Pull request #684 created<span class="toot-id"> #created-684</span></h2><div class="pubdate">06 Sep at 08:37:43 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/684">https://github.com/qt4cg/qtspecs/pull/684</a></div><details><summary>Ignore this PR</summary><div class="markup"><p>This is just norm hacking about</p>
</div></details></div>
<div class="toot" id="created-683"><h2>Pull request #683 created<span class="toot-id"> #created-683</span></h2><div class="pubdate">06 Sep at 02:16:02 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/683">https://github.com/qt4cg/qtspecs/pull/683</a></div><details><summary>XQFO context/focus in/dependent functions clarification note</summary><div class="markup"><p>Added note clarifying the relationship between context and focus, for the purpose of illustrating the relationships between focus/context in/dependent functions. Wrapped with companion <code>&lt;note&gt;</code>s in a parent <code>&lt;notes&gt;</code>.</p>
</div></details></div>
<div class="toot" id="created-682"><h2>Pull request #682 created<span class="toot-id"> #created-682</span></h2><div class="pubdate">05 Sep at 20:12:37 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/682">https://github.com/qt4cg/qtspecs/pull/682</a></div><details><summary>637: allow true() and false() as function annotation values</summary><div class="markup"><p>Fix #637</p>
</div></details></div>
<div class="toot" id="closed-658"><h2>Issue #658 closed<span class="toot-id"> #closed-658</span></h2><div class="pubdate">05 Sep at 19:34:08 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/658">https://github.com/qt4cg/qtspecs/issues/658</a></div><p>Constructor Function: Parameter Name, Zero-Arity</p></div>
<div class="toot" id="created-681"><h2>Pull request #681 created<span class="toot-id"> #created-681</span></h2><div class="pubdate">05 Sep at 19:30:59 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/681">https://github.com/qt4cg/qtspecs/pull/681</a></div><details><summary>665: Fix typos in fn:items-XX functions</summary><div class="markup"><p>Fix #665</p>
</div></details></div>
<div class="toot" id="created-680"><h2>Pull request #680 created<span class="toot-id"> #created-680</span></h2><div class="pubdate">05 Sep at 17:52:01 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/680">https://github.com/qt4cg/qtspecs/pull/680</a></div><details><summary>668 define case insensitive collation normatively</summary><div class="markup"><p>Fix #668</p>
</div></details></div>
<div class="toot" id="minutes-09-05"><h2>QT4 CG meeting 044 draft minutes<span class="toot-id"> #minutes-09-05</span></h2><div class="pubdate">05 Sep at 17:20:00 GMT</div><div class="link">Link: <a href="https://qt4cg.org/meeting/minutes/2023/09-05">https://qt4cg.org/meeting/minutes/2023/09-05</a></div><p>Draft minutes published.</p></div>
<div class="toot" id="created-679"><h2>Pull request #679 created<span class="toot-id"> #created-679</span></h2><div class="pubdate">05 Sep at 16:53:56 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/679">https://github.com/qt4cg/qtspecs/pull/679</a></div><details><summary>669 - fix typo "appearing appearing"</summary><div class="markup"><p>Fix #669</p>
</div></details></div>
<div class="toot" id="created-678"><h2>Pull request #678 created<span class="toot-id"> #created-678</span></h2><div class="pubdate">05 Sep at 16:43:25 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/678">https://github.com/qt4cg/qtspecs/pull/678</a></div><details><summary>671 switch sans operand</summary><div class="markup"><p>Fix #671</p>
</div></details></div>
<div class="toot" id="closed-619"><h2>Issue #619 closed<span class="toot-id"> #closed-619</span></h2><div class="pubdate">05 Sep at 16:04:53 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/619">https://github.com/qt4cg/qtspecs/pull/619</a></div><p>XDM ch. 6 minor edits</p></div>
<div class="toot" id="closed-633"><h2>Issue #633 closed<span class="toot-id"> #closed-633</span></h2><div class="pubdate">05 Sep at 16:04:28 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/633">https://github.com/qt4cg/qtspecs/pull/633</a></div><p>Edits ch. 4.1 through 4.15</p></div>
<div class="toot" id="closed-601"><h2>Issue #601 closed<span class="toot-id"> #closed-601</span></h2><div class="pubdate">05 Sep at 15:15:13 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/601">https://github.com/qt4cg/qtspecs/issues/601</a></div><p>fn:all → fn:every?</p></div>
<div class="toot" id="closed-640"><h2>Issue #640 closed<span class="toot-id"> #closed-640</span></h2><div class="pubdate">05 Sep at 15:15:08 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/640">https://github.com/qt4cg/qtspecs/pull/640</a></div><p>601: fn:all → fn:every?</p></div>
<div class="toot" id="created-675"><h2>Issue #675 created<span class="toot-id"> #created-675</span></h2><div class="pubdate">05 Sep at 14:55:54 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/675">https://github.com/qt4cg/qtspecs/issues/675</a></div><details><summary>XSLT streaming rules for new constructs</summary><div class="markup"><p>The XSLT spec has rules for the streamability of all system functions and XPath language constructs. These need updating for new 4.0 constructs.</p>
</div></details></div>
<div class="toot" id="closed-664"><h2>Issue #664 closed<span class="toot-id"> #closed-664</span></h2><div class="pubdate">05 Sep at 14:08:26 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/664">https://github.com/qt4cg/qtspecs/pull/664</a></div><p>663 xsl:original keywords</p></div>
<div class="toot" id="created-674"><h2>Pull request #674 created<span class="toot-id"> #created-674</span></h2><div class="pubdate">05 Sep at 14:07:29 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/674">https://github.com/qt4cg/qtspecs/pull/674</a></div><details><summary>663: Describe how calls to xsl:original with keywords work</summary><div class="markup"><p>Rework PR 664 (fix for 663) on new baseline</p>
<p>Fix #663.</p>
</div></details></div>
<div class="toot" id="created-673"><h2>Pull request #673 created<span class="toot-id"> #created-673</span></h2><div class="pubdate">05 Sep at 13:53:36 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/673">https://github.com/qt4cg/qtspecs/pull/673</a></div><details><summary>HTML namespace changes</summary><div class="markup"><p>This PR applies my action items for updating the HTML XDM mapping around namespaces and local names.</p>
<p>Note: this currently makes <code>dm:namespace-nodes</code> return an empty sequence. I'm not currently sure what the best approach is here.</p>
</div></details></div>
<div class="toot" id="created-672"><h2>Pull request #672 created<span class="toot-id"> #created-672</span></h2><div class="pubdate">04 Sep at 20:05:30 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/672">https://github.com/qt4cg/qtspecs/pull/672</a></div><details><summary>XFO minor edits, chap. 1</summary><div class="markup"><p>Most substantive change is the trimming of prose held over from before the revision of the diagrams.</p>
</div></details></div>
<div class="toot" id="created-671"><h2>Issue #671 created<span class="toot-id"> #created-671</span></h2><div class="pubdate">02 Sep at 19:37:54 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/671">https://github.com/qt4cg/qtspecs/issues/671</a></div><details><summary>Switch expression without operand (analogous to XSLT choose)</summary><div class="markup"><p>By syntax analogy with <code>switch</code>,</p>
<pre><code>choose
   test ($a &lt; $b) return "lesser"
   test ($a &gt; $b) return "greater"
   test ($a eq $b) return "equal"
   default return "Getting the default is hard to explain"
</code></pre>
<p>Something like</p>
<pre><code>ChooseExpr ::= "choose" ChooseTestClause+ "default" "return"&nbsp;ExprSingle
ChooseTestClause ::= "test"&nbsp;"(" Expr ")" "return"&nbsp;ExprSingle
</code></pre>
<p>I know I can do this by stringing if-then-else together, but would greatly appreciate the cleaner and more manageable syntax for those times when many tests are inescapable.</p>
</div></details></div></div><p>See 1246
            more statuses in yearly archives.</p></article></main></body></html>