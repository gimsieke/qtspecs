<!DOCTYPE HTML><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta charset="UTF-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1"><link rel="stylesheet" href="/css/status.css"><title>@qt4cg statuses</title></head><body><main><article><h1>@qt4cg statuses</h1><p>This page displays recent status
            updates
            about the QT4CG project.</p><p>The are also captured in <a href="status.rss">an RSS feed</a>.</p><p>By year: <a href="2024/">2024</a>, <a href="2023/">2023</a>, <a href="2022/">2022</a>, <a href="2021/">2021</a>, <a href="2020/">2020</a></p><div class="toots">
<div class="toot" id="minutes-03-05"><h2>QT4 CG meeting 068 draft minutes<span class="toot-id"> #minutes-03-05</span></h2><div class="pubdate">05 Mar at 17:30:00 GMT</div><div class="link">Link: <a href="https://qt4cg.org/meeting/minutes/2024/03-05">https://qt4cg.org/meeting/minutes/2024/03-05</a></div><p>Draft minutes published.</p></div>
<div class="toot" id="closed-1053"><h2>Issue #1053 closed<span class="toot-id"> #closed-1053</span></h2><div class="pubdate">05 Mar at 17:19:37 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1053">https://github.com/qt4cg/qtspecs/pull/1053</a></div><p>1047 Default predicate for some#1 and every#1</p></div>
<div class="toot" id="closed-1046"><h2>Issue #1046 closed<span class="toot-id"> #closed-1046</span></h2><div class="pubdate">05 Mar at 17:16:22 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1046">https://github.com/qt4cg/qtspecs/pull/1046</a></div><p>1038 take-while predicate no longer uses EBV</p></div>
<div class="toot" id="closed-413"><h2>Issue #413 closed<span class="toot-id"> #closed-413</span></h2><div class="pubdate">05 Mar at 17:14:04 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/413">https://github.com/qt4cg/qtspecs/issues/413</a></div><p>New function: parse-csv()</p></div>
<div class="toot" id="closed-1017"><h2>Issue #1017 closed<span class="toot-id"> #closed-1017</span></h2><div class="pubdate">05 Mar at 17:13:38 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1017">https://github.com/qt4cg/qtspecs/issues/1017</a></div><p>Change csv-to-xml() to produce an XHTML table</p></div>
<div class="toot" id="closed-1043"><h2>Issue #1043 closed<span class="toot-id"> #closed-1043</span></h2><div class="pubdate">05 Mar at 17:13:02 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1043">https://github.com/qt4cg/qtspecs/issues/1043</a></div><p>CSV parsing - "blank" rows</p></div>
<div class="toot" id="closed-1051"><h2>Issue #1051 closed<span class="toot-id"> #closed-1051</span></h2><div class="pubdate">05 Mar at 17:13:01 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1051">https://github.com/qt4cg/qtspecs/pull/1051</a></div><p>1043 Clarification of CSV edge cases</p></div>
<div class="toot" id="closed-340"><h2>Issue #340 closed<span class="toot-id"> #closed-340</span></h2><div class="pubdate">05 Mar at 17:08:20 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/340">https://github.com/qt4cg/qtspecs/issues/340</a></div><p>fn:format-number: Specifying decimal format</p></div>
<div class="toot" id="closed-1049"><h2>Issue #1049 closed<span class="toot-id"> #closed-1049</span></h2><div class="pubdate">05 Mar at 17:00:58 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1049">https://github.com/qt4cg/qtspecs/pull/1049</a></div><p>340-partial fn:format-number: Specifying decimal format</p></div>
<div class="toot" id="closed-1061"><h2>Issue #1061 closed<span class="toot-id"> #closed-1061</span></h2><div class="pubdate">05 Mar at 12:54:36 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1061">https://github.com/qt4cg/qtspecs/issues/1061</a></div><p>discussion - language pragmas</p></div>
<div class="toot" id="created-1062"><h2>Pull request #1062 created<span class="toot-id"> #created-1062</span></h2><div class="pubdate">05 Mar at 12:05:50 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1062">https://github.com/qt4cg/qtspecs/pull/1062</a></div><details><summary>150bis - revised proposal for fn:ranks</summary><div class="markup"><p>This proposal is an amended/alternative proposal for the fn:ranks function, taking into account the work done on the original issue #150 and the PR #1027 and the comments raised. Acknowledgements to the original author for the idea and for a lot of good work on examples etc.</p>
<p>It amends the previous proposal as follows:</p>
<p>(a) the signature and the semantics are aligned with fn:sort. This adds some functionality (multiple sort keys, ascending/descending) and also removes some complexity (two different collations for comparing input items and result items)</p>
<p>(b) the style of exposition is changed editorially for consistency with other functions</p>
</div></details></div>
<div class="toot" id="created-1061"><h2>Issue #1061 created<span class="toot-id"> #created-1061</span></h2><div class="pubdate">05 Mar at 10:10:45 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1061">https://github.com/qt4cg/qtspecs/issues/1061</a></div><details><summary>discussion - language pragmas</summary><div class="markup"><p>The motivation is introducing breaking changes into the language that may have value, but not enough value to justify a breaking change.</p>
<p>Haskell uses language pragmas for this, and actually most (well, a lot) Haskell code does not use the base specification, and quite common constructs (GADTs, multi param type classes) require extensions.</p>
<p>Haskell devs are used to this, it may require some referring to the the top of the file to change the pragmas but its a working solution to introducing optional things that may be breaking changes.</p>
<p>Thoughts?</p>
<p>Benefits</p>
<ul>
<li>allows breaking changes to be introduced</li>
</ul>
<p>Costs</p>
<ul>
<li>developers may have to refer to the language pragma to correctly understand the code</li>
<li>implementation explosion, extensions may not be independent and interact causing an explosion of combinations of extensions (though i think its reasonable for an implementation to just implement combinations that are practical).</li>
</ul>
<p>I'm biased, I want to introduce breaking changes, but am thwarted by the versioning strategy.</p>
</div></details></div>
<div class="toot" id="created-1060"><h2>Issue #1060 created<span class="toot-id"> #created-1060</span></h2><div class="pubdate">04 Mar at 17:57:26 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1060">https://github.com/qt4cg/qtspecs/issues/1060</a></div><details><summary>Formatting XPath/XQuery</summary><div class="markup"><p>I got reminded today that the specification documents are kind of “wild”, because all code snippets use a different formatting:</p>
<ul>
<li>The indentation is inconsistent (the tendency seems to be 2 spaces, in accordance with the function signatures). Repeatedly, indentations are used that don’t seem to follow any conventions at all.</li>
<li>Sometimes, <code>function</code>, <code>map</code> and <code>array</code> keywords are followed by a space, sometimes not. My preference would be not be too stingy; we have enough space.</li>
<li>Sometimes, the <code>return</code> keyword starts in a new line, sometimes it’s attached to the previous line.</li>
</ul>
<p>This is certainly something we cannot finalize too early, but I think we shouldn’t be too erratic in an official document, even though it’s “just code”.</p>
<p>Related: #1000.</p>
</div></details></div>
<div class="toot" id="created-1059"><h2>Pull request #1059 created<span class="toot-id"> #created-1059</span></h2><div class="pubdate">04 Mar at 15:32:01 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1059">https://github.com/qt4cg/qtspecs/pull/1059</a></div><details><summary>1019 XQFO: Unknown option parameters</summary><div class="markup"><p>Issue: #1019</p>
</div></details></div>
<div class="toot" id="created-1058"><h2>Pull request #1058 created<span class="toot-id"> #created-1058</span></h2><div class="pubdate">04 Mar at 14:37:20 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1058">https://github.com/qt4cg/qtspecs/pull/1058</a></div><details><summary>1037 fn:json-to-xml: 'number-parser' option</summary><div class="markup"><p>Issue: #1037</p>
</div></details></div>
<div class="toot" id="created-1057"><h2>Pull request #1057 created<span class="toot-id"> #created-1057</span></h2><div class="pubdate">04 Mar at 14:31:06 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1057">https://github.com/qt4cg/qtspecs/pull/1057</a></div><details><summary>1054 Spec fn:message #id using old name fn:log</summary><div class="markup"><p>Issue: #1054</p>
</div></details></div>
<div class="toot" id="closed-1056"><h2>Issue #1056 closed<span class="toot-id"> #closed-1056</span></h2><div class="pubdate">04 Mar at 12:30:13 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1056">https://github.com/qt4cg/qtspecs/issues/1056</a></div><p>Simplifying match templates</p></div>
<div class="toot" id="created-1056"><h2>Issue #1056 created<span class="toot-id"> #created-1056</span></h2><div class="pubdate">01 Mar at 13:53:47 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1056">https://github.com/qt4cg/qtspecs/issues/1056</a></div><details><summary>Simplifying match templates</summary><div class="markup"><p>I like match templates a lot, I think they are a USP for XSLT, but I find using them quite clumsy e.g.</p>
<ul>
<li>priority rules are quite subtle (I couldn't tell you what they are not, and I tend to make them explicit)</li>
<li>because each match sits in a different template they tend to sort of drift around in the spaghetti of the code</li>
<li>they don't naturally extend to nested local matches....everything exists at the top level.</li>
</ul>
<p>If you compare this with main stream functional match expressions then they are quite syntactically different, and I think the mainstream syntax is probably a bit simpler (and much more familiar)
(I can see this potentially extending to lots of subsequent things but I'll keep it to the headline)</p>
<p>I think something like</p>
<pre><code>&lt;xsl:template mode="foo" as="xs:string"&gt;
    &lt;xsl:match select="Foo"&gt;
        &lt;xsl:sequence select="'this is a foo'"/&gt;
    &lt;/xsl:match&gt;
    &lt;xsl:match select="Bar"&gt;
        &lt;xsl:sequence select="'this is a bar'"/&gt;
    &lt;/xsl:match&gt;
    &lt;xsl:match&gt;
        &lt;xsl:sequence select="'this is something else'"/&gt;
    &lt;/xsl:match&gt;
&lt;/xsl:template&gt;
</code></pre>
<ul>
<li>templates are matched in sequence (as is the norm), no opaque priority rules</li>
<li>if nothing is matched then nothing is returned...I have effectively a catchall match above.</li>
<li>everything is cohesive, the template contains all matches....no secret ones hidden at the bottom of the file.</li>
</ul>
<p>there's lots of holes here,</p>
<ul>
<li>how does this interact with existing match templates?</li>
<li>are the a different syntax for the same thing?</li>
<li>how do they work with includes and imports?</li>
</ul>
<p>my guesses are...they ARE just different syntax for the existing infrastructure...because thats the smallest change.
and then the other questions are answered by how the above syntax maps into "priority" but tbh, as I barely know how the current priority rules work, I can't really give a sensible guess.</p>
<p>tbh, if this is just different syntax then secret matches CAN exist elsewhere in the spaghetti, but at least the programmer does have a construct to not do that, rather than the default contract to lack cohesion from the outset.</p>
</div></details></div>
<div class="toot" id="created-1055"><h2>Issue #1055 created<span class="toot-id"> #created-1055</span></h2><div class="pubdate">01 Mar at 13:20:51 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1055">https://github.com/qt4cg/qtspecs/issues/1055</a></div><details><summary>simplifying the language - attempt 2</summary><div class="markup"><p>I've thought about it.</p>
<p>The key issue I had which genuinely caused me years of confusion (I didnt understand it so I ignored it, and dealt with it by typeing random xslt code)....this....</p>
<pre><code>            &lt;xsl:variable name="presentationMediaElement" as="element(urn:presentationMedia)"&gt;
                &lt;presentationMedia/&gt;
            &lt;/xsl:variable&gt;
</code></pre>
<p>if I don't declare the "as" then it does something different and confusing (it assumes its a document element <strong>I think</strong>, though I NEVER want it to do this).</p>
<p>so for stylesheets declared as version "4.0"+, can we make the default interpretation of that its an element?</p>
<p>Does this breaks backwards compatability with v1? tbh, the code is already incompatible because the equivalent 1.0 code requires <code>node-set</code>, its already broken, so I suggest making the fix simple to understand.</p>
<p>why is this so irksome to me?
because for me its <strong>incredibly</strong> confusing</p>
<p>its confusing because (and i didnt express this well the last time), it makes a type declaration have inconsistent behaviours.</p>
<p>In languages with OO (is it reynolds?) type systems this also happens  BUT in an OO type system an expression has a type than can be cast to a <strong>subtype</strong> and a subtype is very special because everything that is true of the supertype (in the constained type logic) is true of the subtype (you can express this in terms of set/class membership in a universe if thats how you think about these things).</p>
<p>but in this case, this isnt the case....the two interpretations are disjoint, this isnt a cast.</p>
<p>So the concrete proposal is uniquely define the semantics of.</p>
<pre><code>             &lt;xsl:variable name="presentationMediaElement"&gt;
                &lt;presentationMedia/&gt;
            &lt;/xsl:variable&gt;
</code></pre>
<p>to be</p>
<pre><code>            &lt;xsl:variable name="presentationMediaElement" as="element(urn:presentationMedia)"&gt;
                &lt;presentationMedia/&gt;
            &lt;/xsl:variable&gt;
</code></pre>
<p>from 4.0 onwards.</p>
<p>(ironically, personally i will probably still put the "as" clause in, but if i were trying to learn the language today I'd understand this on day 1, not day 1000).</p>
<p>P.S.</p>
<p>I have a suspicion I still dont fully understand it, but i'm sure someone will point that out in due course.</p>
</div></details></div>
<div class="toot" id="created-1054"><h2>Issue #1054 created<span class="toot-id"> #created-1054</span></h2><div class="pubdate">01 Mar at 10:50:08 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1054">https://github.com/qt4cg/qtspecs/issues/1054</a></div><details><summary>Spec fn:message #id using old name fn:log</summary><div class="markup"><ul>
<li>https://qt4cg.org/specifications/xpath-functions-40/Overview.html#func-message</li>
<li>https://qt4cg.org/specifications/xpath-functions-40/Overview.html#func-log</li>
</ul>
</div></details></div>
<div class="toot" id="closed-1018"><h2>Issue #1018 closed<span class="toot-id"> #closed-1018</span></h2><div class="pubdate">29 Feb at 10:11:47 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1018">https://github.com/qt4cg/qtspecs/issues/1018</a></div><p>Output of parse-csv()</p></div>
<div class="toot" id="created-1053"><h2>Pull request #1053 created<span class="toot-id"> #created-1053</span></h2><div class="pubdate">29 Feb at 10:06:30 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1053">https://github.com/qt4cg/qtspecs/pull/1053</a></div><details><summary>1047 Default predicate for some#1 and every#1</summary><div class="markup"><p>Changes the default predicate for <code>fn:some#1</code> and <code>fn:every#1</code> to be <code>fn:boolean#1</code>, which takes the EBV of the items in the input sequence. The previous use of <code>fn:identity#1</code> caused some unexpected behaviour.</p>
</div></details></div>
<div class="toot" id="created-1052"><h2>Issue #1052 created<span class="toot-id"> #created-1052</span></h2><div class="pubdate">29 Feb at 08:41:10 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1052">https://github.com/qt4cg/qtspecs/issues/1052</a></div><details><summary>parse-csv() - simplify output</summary><div class="markup"><p>Currently parse-csv produces a structure like this:</p>
<pre><code>map {
  "columns": map {
      "names": map{"one":1, "two":2},
      "fields": ("one", "two")
   }
  "rows":  (
     map{
        "fields": ("aaa", "bbb"),
        "field" fn($col){$this?fields[$col]}
    },
   map{
        "fields": ("ccc", "ddd"),
        "field" fn($col){$this?fields[$col]}
    }
 )
}
</code></pre>
<p>There are a number of ways this could be improved.</p>
<ul>
<li>The structure is needlessly different from the return value of maps-to-arrays(). Users will get confused between the two representations, and will find it hard to switch from one to the other. For example, one delivers rows as sequences, the other delivers rows as arrays.</li>
<li>There are too many levels in the structure; the expressions to select within it are unnecessarily complicated, and users will get poor diagnostics when they get it wrong.</li>
<li>In this example (with two columns) for each row there is one map, one sequence, one function, and two strings - five values in all. The output of <code>csv-to-arrays</code> has only three objects (one array and two strings). However hard an optimized implementation tries to reduce the overhead, the space occupied by a million-row parsed CSV is likely to be larger than needed.</li>
<li>The use of sequences rather than arrays means that no JSON-serialization of the structure is possible</li>
</ul>
<p>I propose using a flatter structure, like this pseudo-code sketch:</p>
<pre><code>map {
      "column-index": map{"one":1, "two":2},
      "columns": ["one", "two"]
      "rows": (
         ["aaa", "bbb"],
         ["ccc", "ddd"]
     )
     "get": fn($row, $col){$this?rows[$row]($col)}
     "size": fn(){count($this?rows)}
}
</code></pre>
<p>This doesn't meet all the objections outlined above; for example it represents rows as a sequence of arrays, which is consistent with <code>csv-to-arrays</code>, but not JSON-serializable. But I think it's a considerable improvement.</p>
</div></details></div>
<div class="toot" id="created-1051"><h2>Pull request #1051 created<span class="toot-id"> #created-1051</span></h2><div class="pubdate">28 Feb at 23:58:33 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1051">https://github.com/qt4cg/qtspecs/pull/1051</a></div><details><summary>1043 Clarification of CSV edge cases</summary><div class="markup"><p>Gives a more precise definition of blank rows and empty fields, and generally adds detail on how edge cases should be handled.</p>
<p>Fix #1043.</p>
</div></details></div>
<div class="toot" id="closed-1038"><h2>Issue #1038 closed<span class="toot-id"> #closed-1038</span></h2><div class="pubdate">28 Feb at 22:23:58 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1038">https://github.com/qt4cg/qtspecs/issues/1038</a></div><p>Backwards incompatibility caused by use of EBV in callback functions</p></div>
<div class="toot" id="created-1050"><h2>Issue #1050 created<span class="toot-id"> #created-1050</span></h2><div class="pubdate">28 Feb at 16:02:13 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1050">https://github.com/qt4cg/qtspecs/issues/1050</a></div><details><summary>Potential (low-risk) Ambiguities in XPath EBNF</summary><div class="markup"><p>After demonstrating <code>iXML</code> XPath grammar production at the meeting of 27th Feburary, it seemed worth recording some of the ambiguity issues encountered, if only so others might be aware of possible pitfalls.</p>
<p>Please note that the <a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#lexical-structure">Lexical Structure</a> notes in the spec <em>do</em> resolve these ambiguities, by extra-grammatical interpretations, most notably the choice of <em>longest conforming match</em>, but for grammar/parsers which don't specify or support this, such as <a href="https://invisiblexml.org/">InvisibleXML</a>, ambiguities might arise, though there may be ameliorating changes to the resulting grammar that will resolve them. <strong>I am not advocating changes to the specification EBNF</strong>  but merely noting where such problems might occur from my implementation experience, and potentially suggesting some workarounds.</p>
<p>Here are a couple of cases:</p>
<h3>TypeName / AtomicOrUnionType</h3>
<p>The rule for <code>ItemType </code>is ~</p>
<blockquote>
<p><code>ItemType ::= ... TypeName| .... | AtomicOrUnionType |  ... </code></p>
</blockquote>
<p>where both <code>TypeName </code>and <code>AtomicOrUnionType</code> resolve solely to the <code>EQName </code>production. The grammar interpretation notes suggests (I think) that it binds to <code>TypeName</code> if such exists in the current static context, which is an extra-grammatical concept, but I may be mistaken.</p>
<h3>StringTemplate</h3>
<p>The productions for StringTemplate are:</p>
<pre><code>[106]   	StringTemplate	             ::=   	"`" (StringTemplateFixedPart | StringTemplateVariablePart)* "`"	
[107]   	StringTemplateFixedPart	     ::=   	((Char - ('{' | '}' | '`')) | "{{" | "}}" | "``")*
[108]   	StringTemplateVariablePart   ::=   	EnclosedExpr 
</code></pre>
<p>where it relies on <em>longest match</em> semantics to avoid ambiguity. (If this was not the case a potential infinity of empty  <code>StringTemplateFixedPart</code> productions could be satisfied, or any sequential partitions of a sequence of characters.)</p>
<p>An alternative (recursive and more cumbersome) formulation, which avoids the ambiguity is (in an iXML grammar for compactness):</p>
<pre><code>               StringTemplate: -"`", StringTemplateContent?, -"`".
       -StringTemplateContent: StringTemplateFixedPart |
                               StringTemplateVariablePart |
                               StringTemplateVariablePart, StringTemplateContent |
                               StringTemplateFixedPart, StringTemplateVariablePart, StringTemplateContent?.
      StringTemplateFixedPart: ("{{"; "}}"; "``"; ~["`{}"])+.
</code></pre>
<p><code>StringTemplateVariablePart</code> remains unchanged. (iXML doesn't support character set subtraction, so <code>~["``{}"]</code> (<em>any character except...</em>) is used for the <code>Char -  ....</code> term.) By allowing a fixed part only to be followed by a variable part, this effectively permits the content either to be empty, or a sequence of parts such that <code>StringTemplateVariablePart</code> terms can be consecutive, but not <code>StringTemplateFixedPart</code> and it seems to work effectively, at least in my iXML parser.</p>
<p>Reactions, corrections, remarks, praise and brickbats welcome.
I'll document any more as I find them.
John</p>
</div></details></div>
<div class="toot" id="created-1049"><h2>Pull request #1049 created<span class="toot-id"> #created-1049</span></h2><div class="pubdate">28 Feb at 13:46:17 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1049">https://github.com/qt4cg/qtspecs/pull/1049</a></div><details><summary>340-partial fn:format-number: Specifying decimal format</summary><div class="markup"><p>The PR introduces an additional <code>$format</code> argument to <code>fn:format-number</code>, which allows you to override decimal formats with custom properties.</p>
<p>Next, we may need to clarify if the current specification already allows processors to provide custom decimal formats (https://github.com/qt4cg/qtspecs/issues/340#issuecomment-1968856655). It’s not part of this PR.</p>
</div></details></div>
<div class="toot" id="created-1048"><h2>Issue #1048 created<span class="toot-id"> #created-1048</span></h2><div class="pubdate">28 Feb at 11:14:07 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1048">https://github.com/qt4cg/qtspecs/issues/1048</a></div><details><summary>fn:format-number: relax restrictions on exponent-separator (possibly minus-sign, percent, per-mille)</summary><div class="markup"><p>The current rules for decimal formats are too restrictive (i.e., too much focused on Anglo-Saxon formatting rules). The most prominent case is the Arabic exponent-separator „character“, which consists of two characters: <code>عر</code> (https://www.localeplanet.com/icu/ar/). The exponent separator of other locales is not restricted to a single character either. For example, <code>se-NO</code> uses <code>·10^</code>.</p>
<p>When we include the ICU library in the analysis, we also find <code>minus-sign</code>, <code>percent</code> and <code>per-mille</code> properties that are longer than 1 character. Examples:</p>
<ul>
<li>The <code>minus-sign</code> character for <code>he</code> consists of <code>200e</code> and <code>002d</code> (<code>200e</code> is the Left-to-Right Mark).</li>
<li>The Arabic <code>percent</code> character consists of <code>066a</code> and <code>061c</code> (<code>061c</code> is the “Arabic Letter Mark”).</li>
<li>The <code>per-mille</code> property of <code>en-US-posix</code> is <code>0/00</code>.</li>
</ul>
</div></details></div>
<div class="toot" id="created-1047"><h2>Issue #1047 created<span class="toot-id"> #created-1047</span></h2><div class="pubdate">28 Feb at 10:13:25 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1047">https://github.com/qt4cg/qtspecs/issues/1047</a></div><details><summary>Incorrect note for `fn:some` and `fn:every`</summary><div class="markup"><p><code>fn:some</code> and <code>fn:every</code> state (non-normatively):</p>
<blockquote>
<p>"If the second argument is omitted or an empty sequence, the first argument must be a sequence of xs:boolean values.".</p>
</blockquote>
<p>I don't think this note is correct. If the default predicate <code>identity#1</code> is used, it is coerced to the required type <code>function(item()) as xs:boolean</code>, so the effective predicate is <code>fn($x as item()) as xs:boolean {identity($x)}</code>. This atomises the result of calling <code>identity($x)</code> and casts the result to <code>xs:boolean</code>. Therefore expressions such as <code>some([true()])</code> and <code>some(&lt;a&gt;true&lt;/a&gt;)</code> return true, not an error.</p>
</div></details></div>
<div class="toot" id="created-1046"><h2>Pull request #1046 created<span class="toot-id"> #created-1046</span></h2><div class="pubdate">28 Feb at 09:55:48 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1046">https://github.com/qt4cg/qtspecs/pull/1046</a></div><details><summary>1038 take-while predicate no longer uses EBV</summary><div class="markup"><p>See issue #1038, which pointed out compatibility problems with using EBV for callback predicates, as proposed in issue #919.</p>
<p>In specifying <code>fn:take-while</code> we anticipated acceptance of the proposal to use EBV for predicate callbacks; now that we have decided not to make that change, this PR brings <code>take-while</code> into alignment with other functions using a predicate callback.</p>
</div></details></div></div><p>See 2038
            more statuses in yearly archives.</p></article></main></body></html>