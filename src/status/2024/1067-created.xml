<item>
   <title>Issue #1067 created</title>
   <pubDate>2024-03-07T12:22:18Z</pubDate>
   <link>https://github.com/qt4cg/qtspecs/issues/1067</link>
   <guid>https://qt4cg.org/@qt4cg/2024/#created-1067</guid>
   <description>&lt;div&gt;&lt;p&gt;fn:deep-equal: significant children&lt;/p&gt;&lt;div class="markup"&gt;&lt;p&gt;The current rules of &lt;a href="https://qt4cg.org/specifications/xpath-functions-40/Overview.html#func-deep-equal"&gt;fn:deep-equal&lt;/a&gt; are:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;e. Let &lt;code&gt;significant-children($parent)&lt;/code&gt; be the sequence of nodes obtained by applying the following steps to the children of &lt;code&gt;$parent&lt;/code&gt;, in turn:
  i. Comment nodes are discarded if the option &lt;code&gt;comments&lt;/code&gt; is false.
  ii. Processing instruction nodes are discarded if the option &lt;code&gt;processing-instructions&lt;/code&gt; is false.
  iii. Adjacent text nodes are merged.
…
…the sequence &lt;code&gt;significant-children($i1)&lt;/code&gt; is deep-equal to the sequence &lt;code&gt;significant-children($i2)&lt;/code&gt;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;If my interpretation is correct, the following expression is now expected to return &lt;code&gt;true&lt;/code&gt;…&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-xquery"&gt;deep-equal(
  &amp;lt;e&amp;gt;A&amp;lt;!----&amp;gt;B&amp;lt;/e&amp;gt;,
  &amp;lt;e&amp;gt;AB&amp;lt;/e&amp;gt;
)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;…and we need to update various test cases (e.g. &lt;a href="https://github.com/qt4cg/qt4tests/blob/af7640a513bd7bda9f301a0cc8334a58bb5ea78e/fn/deep-equal.xml#L2390-L2398"&gt;K2-SeqDeepEqualFunc-22&lt;/a&gt;).&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;</description>
</item>
