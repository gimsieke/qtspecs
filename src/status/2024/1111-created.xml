<item>
   <title>Issue #1111 created</title>
   <pubDate>2024-03-24T08:40:27Z</pubDate>
   <link>https://github.com/qt4cg/qtspecs/issues/1111</link>
   <guid>https://qt4cg.org/@qt4cg/2024/#created-1111</guid>
   <description>&lt;div&gt;&lt;p&gt;xsl:pipeline&lt;/p&gt;&lt;div class="markup"&gt;&lt;p&gt;In XSLT 3.0 it is not possible to write a multi-phase streaming transformation, where two are more phases each operate in streaming mode and the result of one phase is piped into the next. Such transformations can only be written as multiple stylesheets, coordinated by some calling application.&lt;/p&gt;
&lt;p&gt;A non-streamed multiphase transformation typically uses variables for the intermediate results:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;xsl:variable name="temp1"&amp;gt;
   &amp;lt;xsl:apply-templates mode="phase1"/&amp;gt;
&amp;lt;/xsl:variable&amp;gt;
&amp;lt;xsl:variable name="temp2"&amp;gt;
   &amp;lt;xsl:apply-templates select="$temp1" mode="phase2"/&amp;gt;
&amp;lt;/xsl:variable&amp;gt;
&amp;lt;xsl:apply-templates select="$temp2"/&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This cannot be streamed because variables cannot hold streamed nodes.&lt;/p&gt;
&lt;p&gt;The idea is to allow this to be written:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;xsl:pipeline streamable="yes"&amp;gt;
   &amp;lt;xsl:apply-templates mode="phase1"/&amp;gt;
   &amp;lt;xsl:apply-templates select="." mode="phase2"/&amp;gt;
   &amp;lt;xsl:apply-templates select="." mode="phase3"/&amp;gt;
&amp;lt;/xsl:pipeline&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;where each instruction in the pipeline takes as its context value the result of the previous instruction.&lt;/p&gt;
&lt;p&gt;Even when no streaming is involved, the xsl:pipeline instruction brings usability benefits: it's much clearer to the reader what is going on.&lt;/p&gt;
&lt;p&gt;(Triggered by a support request from a user wanting to make an existing pipelined transformation streamable; but the idea was considered and "postponed to v.next" during XSLT 3.0 development. The replacement of "context item" by "context value" removes one of the obstacles.)&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;</description>
</item>
