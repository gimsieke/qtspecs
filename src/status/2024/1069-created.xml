<item>
   <title>Issue #1069 created</title>
   <pubDate>2024-03-08T03:58:06Z</pubDate>
   <link>https://github.com/qt4cg/qtspecs/issues/1069</link>
   <guid>https://qt4cg.org/@qt4cg/2024/#created-1069</guid>
   <description>&lt;div&gt;&lt;p&gt;fn:ucd&lt;/p&gt;&lt;div class="markup"&gt;&lt;p&gt;This issue floats the idea of a new function, &lt;code&gt;fn:ucd&lt;/code&gt; (for Unicode character database).&lt;/p&gt;
&lt;p&gt;The working signature would be &lt;code&gt;fn:ucd($codepoint as xs:positiveInteger) as map(*)?&lt;/code&gt;.  In the returned map, each entry would have a key that is a Unicode property name (full or abbreviated) and a value that reflects the property of &lt;code&gt;$character&lt;/code&gt; in the Unicode character database.&lt;/p&gt;
&lt;p&gt;What would users get? Access to a deep store of character data not otherwise (easily) available, such as name, name alias, bidirectional properties, age (when it entered Unicode), breaks (word, sentence, grapheme), scripts, and dozens of other properties. See &lt;a href="https://www.unicode.org/reports/tr44/#Property_Index"&gt;Unicode TR 44&lt;/a&gt;. Although many properties are of specialized interest, I think most people would find at least a few of these properties of significance.&lt;/p&gt;
&lt;p&gt;Can't we already do this with regular expressions? Well, no. Category escapes in XPath regular expressions, e.g., &lt;code&gt;\p{Lm}&lt;/code&gt;, are based upon general categories, but the properties mentioned above cut across these general categories. For example, general category &lt;code&gt;Pd&lt;/code&gt; dash is not coterminous with the property &lt;code&gt;Dash&lt;/code&gt;. Property &lt;code&gt;Quotation_Mark&lt;/code&gt; crosses many subcategories of &lt;code&gt;P&lt;/code&gt; Punctuation.&lt;/p&gt;
&lt;p&gt;A few use cases:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Extrapolation&lt;/strong&gt;
&lt;code&gt;string-to-codepoints('ɑϞ') ! ('U+' || dec-to-hex(.) || ': ' || ucd(.)('Name'))&lt;/code&gt; would return &lt;code&gt;('U+251: LATIN SMALL LETTER ALPHA', 'U+3DE: GREEK LETTER KOPPA')&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Filtering&lt;/strong&gt;
&lt;code&gt;if (some $i in string-to-codepoints($text) satisfies ucd($i)('Soft_Dotted')) then...&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Annotating&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;div class="{myfunc:most-frequent((string-to-codepoints($text) ! ucd(.)('Script')))}"&amp;gt;
    &amp;lt;xsl:value-of select="$text"/&amp;gt;
&amp;lt;/div&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;might produce&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;div class="Syriac"&amp;gt;ܡܠܟܘܬܐ ܕܫܡܝܐ ܐܝܬܝܗ̇. ܠܐ ܚܫܘܫܘܬܐ ܕܢܦܫܐ܆ ܥܡ ܝܕܥܬܐ ܕܫܪܪܐ ܕܗܠܝܢ ܕܐܝܬܝܗܝܢ&amp;lt;/div&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;And so forth. I can think of dozens of different types of operations where &lt;code&gt;fn:ucd&lt;/code&gt; might be significant.&lt;/p&gt;
&lt;p&gt;Thoughts?&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;</description>
</item>
