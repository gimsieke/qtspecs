<item>
   <title>Issue #572 created</title>
   <pubDate>2023-06-26T16:36:41Z</pubDate>
   <link>https://github.com/qt4cg/qtspecs/issues/572</link>
   <guid>https://qt4cg.org/@qt4cg/2023/#created-572</guid>
   <description>&lt;div&gt;&lt;p&gt;fn:evaluate-xpath() function&lt;/p&gt;&lt;div class="markup"&gt;&lt;p&gt;XSLT 3.0 introduced an instruction, xsl:evaluate, for dynamic evaluation of XPath expressions. But there is no way of doing this in XQuery.&lt;/p&gt;
&lt;p&gt;It was done as an instruction in XSLT because functions at the time were not flexible enough to cope with a range of optional parameters. This situation has changed.&lt;/p&gt;
&lt;p&gt;An &lt;code&gt;fn:evaluate()&lt;/code&gt; function might operate successfully with the following parameters:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;xpath - the XPath expression as a string.&lt;/li&gt;
&lt;li&gt;namespaces - the namespace bindings as a map from prefix to URI, defaulting to the namespace bindings in the static context of the caller&lt;/li&gt;
&lt;li&gt;parameters - parameter values as a map from QName to value, defaulting to an empty map&lt;/li&gt;
&lt;li&gt;context-item - the context item for evaluation, defaulting to the context item of the caller&lt;/li&gt;
&lt;li&gt;options:
&lt;ul&gt;
&lt;li&gt;default collation&lt;/li&gt;
&lt;li&gt;base URI&lt;/li&gt;
&lt;li&gt;schema-aware = true/false&lt;/li&gt;
&lt;li&gt;allow-external-access = true/false&lt;/li&gt;
&lt;li&gt;cache = true/false (whether to cache compiled expressions for reuse)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Before &lt;code&gt;xsl:evaluate&lt;/code&gt; as introduced, there was some concern in the WG about security and the risk of injection attacks. I think that the allow-external-access switch is sufficient for this: if you don't trust the expression, set it to false, and all dangerous things like access to external documents and other resources, use of extension functions, etc, is disabled.&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;</description>
</item>
