<item>
   <title>Issue #706 created</title>
   <pubDate>2023-09-15T14:45:33Z</pubDate>
   <link>https://github.com/qt4cg/qtspecs/issues/706</link>
   <guid>https://qt4cg.org/@qt4cg/2023/#created-706</guid>
   <description>&lt;div&gt;&lt;p&gt;FLWOR: for member $m1 in $a1, member $m2 in $a2&lt;/p&gt;&lt;div class="markup"&gt;&lt;p&gt;Currently, the &lt;code&gt;member&lt;/code&gt; keyword must always be placed directly after the &lt;code&gt;for&lt;/code&gt; clause:&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-xquery"&gt;(: valid :)
for $a in 1 to 10
for $m member $m in $array

(: invalid :)
for $a in 1 to 10, member $m in $array
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;In addition, the keyword applies to all other bindings in the same &lt;code&gt;for&lt;/code&gt; clause:&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-xquery"&gt;for member $m1 in $array1, $m2 in $array2
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;My feeling is that this syntax is a bit odd, as other keywords (&lt;code&gt;allowing empty&lt;/code&gt;, &lt;code&gt;at&lt;/code&gt;) only refer to the currently bound variable. Next, the &lt;code&gt;member&lt;/code&gt; syntax would differ from the semantics of XQuery Full Text: The &lt;code&gt;score&lt;/code&gt; keyword is placed before the variable name, and can be used more than once (or omitted):&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-xquery"&gt;let score $s1 := $data1, score $s2 := $data2
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;I think we should change this. It would also simplify the grammar:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;InitialClause     ::=  ForClause | LetClause | WindowClause
ForClause         ::=  "for" ForBinding ("," ForBinding)*
ForBinding        ::=  (SimpleForBinding | ForMemberBinding) PositionalVar? "in" ExprSingle
SimpleForBinding  ::=  VarBinding AllowingEmpty?
ForMemberBinding  ::=  "member" VarBinding
AllowingEmpty     ::=  "allowing" "empty"
PositionalVar     ::=  "at" "$" VarName
VarBinding        ::=  "$" VarName TypeDeclaration?
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;And one more motivation for changing is that map bindings will be easier to define (see &lt;a href="https://github.com/qt4cg/qtspecs/issues/31#issuecomment-1721400625"&gt;#31&lt;/a&gt;).&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;</description>
</item>
