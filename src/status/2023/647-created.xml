<item>
   <title>Issue #647 created</title>
   <pubDate>2023-08-01T13:29:21Z</pubDate>
   <link>https://github.com/qt4cg/qtspecs/issues/647</link>
   <guid>https://qt4cg.org/@qt4cg/2023/#created-647</guid>
   <description>&lt;div&gt;&lt;p&gt;XQuery: import schema with multiple location hints&lt;/p&gt;&lt;div class="markup"&gt;&lt;p&gt;XQuery 3.1 clarified what is intended when an "import module" declaration provides multiple location hints - there's now a clear indication that the processor should expect to load multiple modules all with the same module namespace.&lt;/p&gt;
&lt;p&gt;For "import schema" it's still completely vague what is intended, and there's no analogy in XSD or XSLT which only ever allow a single location URI to be supplied. Currently we say:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The URILiterals that follow the at keyword are optional location hints, and can be interpreted or disregarded in an implementation-dependent way. Multiple location hints might be used to indicate more than one possible place to look for the schema or multiple physical resources to be assembled to form the schema.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;I propose changing this to:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The URILiterals that follow the at keyword are optional location hints, intended to allow a processor to locate schema documents containing definitions of the required schema components in the target namespace. Processors may interpret or disregard these hints in an implementation-dependent way. The &lt;em&gt;recommended&lt;/em&gt; default strategy is as follows (but this may be varied through user options):&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;All the location hints are dereferenced, treating them as relative URIs&lt;/li&gt;
&lt;li&gt;If any location hint cannot be dereferenced, or fails to resolve to a valid schema document with the required target namespace, then that location hint is disregarded (optionally with a warning); but if none of the location hints can be resolved to a valid schema document with the required target namespace, then a static error is reported.&lt;/li&gt;
&lt;li&gt;If multiple location hints are dereferenced, yielding multiple schema documents A, B, and C, then they should be treated as if there were a single schema document containing &lt;code&gt;xs:include&lt;/code&gt; declarations referencing A, B, and C. This implies that the schema documents must together comprise a valid schema, for example there cannot be two different type definitions with the same name.&lt;/li&gt;
&lt;li&gt;Notwithstanding the previous rule, if a processor is able to establish that two or more location hints refer to identical or equivalent schema documents, then the duplicates should be ignored.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;This text gives users and implementors alike a much better sense of what is intended, while still retaining flexibility for implementations to do something different.&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;</description>
</item>
