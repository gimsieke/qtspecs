<item>
   <title>Issue #548 created</title>
   <pubDate>2023-06-13T07:55:05Z</pubDate>
   <link>https://github.com/qt4cg/qtspecs/issues/548</link>
   <guid>https://qt4cg.org/@qt4cg/2023/#created-548</guid>
   <description>&lt;div&gt;&lt;p&gt;Space separation in lambda expressions&lt;/p&gt;&lt;div class="markup"&gt;&lt;p&gt;Currently the expression &lt;code&gt;$a -&amp;gt; {$a+1}&lt;/code&gt; requires a space before the arrow, because the hyphen is otherwise tokenized as part of the variable name.&lt;/p&gt;
&lt;p&gt;Not only is this a very easy trap to fall into, it also tends to result in poor diagnostics because we're in lookahead territory where we are also considering an alternative parse along the lines &lt;code&gt;$a- &amp;gt; EXPR&lt;/code&gt; (where the variable name is &lt;code&gt;a-&lt;/code&gt;), and this parse only gets disqualified because an expression can't begin with &lt;code&gt;{&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;If we later introduce expressions that start with &lt;code&gt;{&lt;/code&gt;, writing &lt;code&gt;$a-&amp;gt;{3}&lt;/code&gt; with no space would no longer be an error, it would just mean something completely different from what you intended.&lt;/p&gt;
&lt;p&gt;One solution, not a very pretty one, is to require parentheses around the argument list even when there is only a single argument. Almost as inconvenient as requiring the space, but with better diagnostics if you forget.&lt;/p&gt;
&lt;p&gt;Another solution might be to restrict the parameter name so it can't contain a hyphen. The problem with that is that the tokenization becomes sensitive to the grammatical context, which is not totally unexplored territory, but complicates the fact that we're already in lookahead territory where we are looking at alternative parses. (The Saxon implementation already does the lookahead by retokenizing, so it's not impossible.)&lt;/p&gt;
&lt;p&gt;Would it be too horrendous to contemplate a backwards-incompatible change to say variable names cannot end in a hyphen, anywhere? Perhaps with a mode bit for compatibility? After all, all this complication is caused by the need to cater for something which no sane user ever does.&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;</description>
</item>
